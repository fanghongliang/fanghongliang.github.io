<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ÊØèÊó•‰∏ÄÈ¢ò]]></title>
    <url>%2F2024%2F03%2F14%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ÈìæÂºèË∞ÉÁî®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * * ÈìæÂºèË∞ÉÁî® * * ÂéüÁêÜÔºö ÈÉΩÊòØÈÄöËøáËøîÂõûÂØπË±°‰æõ‰πãÂêéËøõË°åË∞ÉÁî®„ÄÇ * 1„ÄÅthisÁöÑ‰ΩúÁî®ÂüüÈìæÔºåjQueryÁöÑÂÆûÁé∞ÊñπÂºèÔºåÈÄöÂ∏∏ÈìæÂºèË∞ÉÁî®ÈÉΩÊòØÈááÁî®ËøôÁßçÊñπÂºè„ÄÇ * 2„ÄÅËøîÂõûÂØπË±°Êú¨Ë∫´ÔºåÂêå this ÁöÑÂå∫Âà´Â∞±ÊòØÊòæÂºèËøîÂõûÈìæÂºèÂØπË±° * 3„ÄÅÈó≠ÂåÖËøîÂõûÂØπË±°ÁöÑÊñπÂºèÂÆûÁé∞Ôºå‰∏éÂáΩÊï∞ÊüØÈáåÂåñÁ±ª‰ºº * * !!! ÁÆ≠Â§¥ÂáΩÊï∞thisÊåáÂêë */let Person = function() &#123;&#125;;Person.prototype.setAge = function(age)&#123; this.age = age; log(`ta$&#123;age&#125;Â≤Å`) return this;&#125;Person.prototype.setWeight = function(weight)&#123; this.weight = weight; log(`‰ΩìÈáç$&#123;weight&#125;kg`) return this;&#125;Person.prototype.eat = function (food) &#123; this.food = food log(`eat $&#123;food&#125;`) return this &#125;Person.prototype.run = function(merter) &#123; this.merter = merter log(`run $&#123;merter&#125;Á±≥`) return this &#125;Person.prototype.sleep = function (hour) &#123; this.hour = hour log(`sleep $&#123;hour&#125; hours`) return this &#125;var person = new Person();person.setAge(19).setWeight(110).eat('apple').run(30).sleep(8)// ‰ΩøÁî®ÂØπË±°ÂΩ¢Âºèconst Monkey = &#123; name: null, age: null, weight: null, setName: function(name) &#123; this.name = name return this &#125;, setAge: function(age) &#123; this.age = age; return this &#125;, setWeight: function(weight) &#123; this.weight = weight return this &#125;, get: function() &#123; let desc = `TA is $&#123;this.name&#125; and $&#123;this.age&#125;Â≤Å „ÄÅ $&#123;this.weight&#125;kg` log(desc) &#125;&#125;Monkey.setName('monkey').setAge(9).setWeight(23).get()]]></content>
      <categories>
        <category>ÊØèÊó•‰∏ÄÈ¢ò</category>
      </categories>
      <tags>
        <tag>ËÖæËÆØ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â≠ó‰ΩìÂ≠êÈõÜÂåñÂ∫îÁî®]]></title>
    <url>%2F2023%2F10%2F30%2F%E5%AD%97%E4%BD%93%E5%AD%90%E9%9B%86%E5%8C%96%2F</url>
    <content type="text"><![CDATA[fontminfontmin ÊòØ‰∏Ä‰∏™Âü∫‰∫éNode.jsÁöÑÂ≠ó‰ΩìÂ≠êÈõÜÂåñÂ∑•ÂÖ∑ÔºåÂÆÉÂèØ‰ª•Â∞ÜÂ≠ó‰ΩìÊñá‰ª∂ÂéãÁº©‰∏∫ÊúÄÂ∞èÁöÑÂ≠êÈõÜÔºå‰ª•‰æøÂú®WebÂ∫îÁî®Á®ãÂ∫è‰∏≠‰ΩøÁî®„ÄÇÂÆÉÂèØ‰ª•Â∏ÆÂä©ÂáèÂ∞ëÂ≠ó‰ΩìÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶ÔºåÂπ∂ÂáèÂ∞ëÂ∏¶ÂÆΩ‰ΩøÁî®„ÄÇ ÊèêÂèñÂ≠ó‰Ωì‰∏≠ÊåáÂÆöÂ≠óÁ¨¶ÈõÜÂèÇËÄÉÁôæÂ∫¶ fontmin / ‰ªãÁªç Â¶Ç‰Ωï‰ΩøÁî® npm ÂëΩ‰ª§ËøõË°åÂÆâË£Ö fontmin 1npm install fontmin ÂàõÂª∫ÂÜÖÂÆπÊñá‰ª∂Â§π,ÂëΩÂêçÊúÄÂ•ΩÊòØÂ≠ó‰ΩìÂêçÁß∞Ôºå‰æãÂ¶ÇÔºö DINPro \ youshebiaotihei \ yuwei„ÄêÁ¶πÂç´‰π¶Ê≥ïË°åÊï∞ÁÆÄ‰Ωì„Äë Êñá‰ª∂Â§π‰∏ãÂàõÂª∫ content.txt Âíå ÂØºÂÖ•Áõ∏ÂÖ≥Â≠ó‰ΩìÂåÖÊñá‰ª∂Ôºå Ê†ºÂºè XXXX.ttf ËøôÈáåÊàë‰ΩøÁî® Á¶πÂç´‰π¶Ê≥ïË°åÊï∞ÁÆÄ‰Ωì Â≠ó‰ΩìÂåÖÔºåcontent.txt ‰∏≠ÂÜôÂÖ•‰Ω†ÈúÄË¶ÅÂ∫îÁî®Â≠ó‰ΩìÁöÑÊñáÂ≠óÔºå‰æãÂ¶ÇÔºö ‰ø°ÊÅØÊäÄÊúØÊ†áÂáÜ „Äê1„ÄëÊê≠Âª∫ÁéØÂ¢É„ÄÅ„Äê2„ÄÅ3„ÄëÂáÜÂ§áÁâ©Êñô„ÄÇËøô‰∏ÄÊ≠•Êàë‰ª¨ÁºñÂÜôËÑöÂÖ∑‰ΩìËÑöÊú¨ Â¶Ç‰∏ã‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;!-- convert.js --&gt;/** * * * ‰ΩøÁî®ÊñπÂºè * npm run font yuwei * * */let Fontmin = require('fontmin')let path = require('path')let fs = require('fs')let fontName = process.argv[2] // node ÂëΩ‰ª§ÔºåÂêéÈù¢‰ºö‰ªãÁªç‰∏çÊ≠¢‰∏ÄÁßçÂ≠ó‰ΩìÊó∂ÁöÑËß£ÂÜ≥ÂäûÊ≥ïÔºå‰∏ªË¶ÅÊòØÊãøÂà∞ „Äê1„Äë‰∏≠ÁöÑÂ≠ó‰ΩìÁõÆÂΩïÂêçÁß∞let srcPath = path.resolve('act-font/'+fontName) // act-font ÊòØÊàëÁöÑÈ°πÁõÆ‰∏ÄÁ∫ßÁõÆÂΩï„ÄÇËá™Â∑±Ê†πÊçÆÁõÆÂΩï‰ΩçÁΩÆÊü•ÊâæÂç≥ÂèØÔºå‰∏ªË¶ÅÊòØÊãøÂà∞ „Äê1„Äë ÁõÆÂΩï‰ΩçÁΩÆÂç≥ÂèØ„ÄÇlet srcFontPath = srcPath + '/font.ttf' // Ëé∑ÂèñÂÖ∑‰ΩìÂ≠ó‰ΩìÊñá‰ª∂ËµÑÊ∫êÔºåËøôÈáåÊãøÂà∞‰∫Ü yuwei ÁöÑÂ≠ó‰ΩìÂåÖË∑ØÂæÑlet contentPath = srcPath + '/content.txt' // ÂêåÁêÜÔºåËé∑Âèñ‰Ω†ÈúÄË¶ÅÂ§ÑÁêÜÁöÑÊñáÂ≠ó „Äê3„Äëlet distPath = path.resolve('act-font/dist/' + fontName) // ÊâìÂåÖËæìÂá∫ÁöÑÊñá‰ª∂‰ΩçÁΩÆÔºåÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂Â≠òÂú®ËøôÈáåconsole.log('------ convert start ------')console.log('srcFontPath:', srcFontPath)console.log('contentPath:', contentPath)console.log('distPath:', distPath)let content = fs.readFileSync(contentPath,'utf8').toString()console.log('content:', content)let fontmin = new Fontmin().src(srcFontPath).dest(distPath)console.log('srcFontPath:', srcFontPath)fontmin .use(Fontmin.glyph(&#123; text: content, hinting: false // keep ttf hint info (fpgm, prep, cvt). default = true &#125;)) .use(Fontmin.ttf2eot()) .use(Fontmin.ttf2svg()) .use(Fontmin.ttf2woff(&#123; deflate: true // deflate woff. default = false &#125;)) .use(Fontmin.css(&#123; fontPath: './', // location of font file base64: true, // inject base64 data:application/x-font-ttf; (gzip font with css). // default = false glyph: false, // generate class for each glyph. default = false iconPrefix: 'my-icon', // class prefix, only work when glyph is `true`. default to "icon" fontFamily: fontName, // custom fontFamily, default to filename or get from analysed ttf file asFileName: false, // rewrite fontFamily as filename force. default = false local: true // boolean to add local font. default = false &#125;)) .run((err, files, stream) =&gt; &#123; if (err) &#123; throw err; &#125; console.log('distPath:', distPath) console.log('------ convert success ------') &#125;) ËÑöÊú¨ÁºñÂÜôÂÆåÊØïÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® node ÊâßË°å convert.js ËÑöÊú¨ÔºåËøôÈáåÊàë‰ª¨Âú® scripts ‰∏≠Â∞ÅË£Ö‰∏Ä‰∏ãÂëΩ‰ª§ÔºåÊñπ‰æøÂêéÁª≠‰ΩøÁî® 123456789// package.json "scripts": &#123; "font": "node convert-font.js"&#125;// ÊâßË°å `npm run font &#123;Â≠ó‰ΩìÂêç&#125;`// eg: npm run font yuwei ÊâßË°åÂÆåÊØïÔºåÂèØ‰ª•ÁúãÂà∞Âú® dist Êñá‰ª∂‰∏≠ËæìÂá∫‰∫ÜÂ≠ó‰ΩìÊñá‰ª∂ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî® .ttf Êñá‰ª∂Âç≥ÂèØ„ÄÇ Âú®Á¨¨‰∏âÊñπÈ°πÁõÆ‰∏≠ÂºïÁî®ÔºåÈááÁî®ÂÖ®Â±Ä CSS Ê†∑ÂºèÂºïÂÖ• 12345678910111213141516/* ÂÖ®Â±ÄCSSÊ†∑Âºè *//* yuwei.ttf Âç≥ dist ÁõÆÂΩï‰∏ã yuwei/font.ttf ÊîπÂêç,‰∏∫Âå∫ÂàÜÂÖ∂‰ªñÂ≠ó‰Ωì */@font-face &#123; font-family: yuwei; src: url($&#123;require('@assets/styles/yuwei.ttf').default&#125;) format('truetype'); font-style: normal;&#125;.yu-wei &#123; font-family: yuwei, Tahoma, Arial;&#125;&lt;div&gt;ËøôÈáåÊòØÊôÆÈÄöÂ≠ó‰Ωì&lt;/div&gt;&lt;div className="yu-wei"&gt;‰ø°ÊÅØÊäÄÊúØÊ†áÂáÜ&lt;/div&gt; ÊÄªÁªìfontmin ‰ºòÁÇπÂú®‰∫éËäÇÁúÅ‰∫ÜÂ≠ó‰ΩìÊñá‰ª∂ÂåÖÔºåÂú®Â§öÂ≠ó‰ΩìÂú∫ÊôØ‰∏ãÔºåÊåâÈúÄÂä†ËΩΩÔºåÂáèÂ∞ëÂ≠ó‰ΩìÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶ÔºåÂπ∂ÂáèÂ∞ëÂ∏¶ÂÆΩ‰ΩøÁî®„ÄÇ‰∏î‰∏çÂú®Â±ÄÈôê‰∫éËÆ©UIÂàáÂõæ„ÄÇ‰∏çË∂≥‰πãÂ§ÑÔºö ÊåâÈúÄÂä†ËΩΩÈúÄË¶ÅÊØèÊ¨°Êñ∞Â¢ûÊñáÂ≠óÁöÑÊó∂ÂÄôÈÉΩË¶ÅÊõ¥Êñ∞ content.txt Êñá‰ª∂ÔºåÂπ∂ÈáçÊñ∞ÊâßË°åËÑöÊú¨ÔºåÂØºÂÖ•Êñ∞ÁöÑ .ttf Â≠ó‰ΩìÂåÖ„ÄÇÊÄª‰ΩìÊù•ËØ¥ÔºåÊòØÂæà‰∏çÈîôÁöÑ‰∏ÄÊ¨æÂ≠ó‰ΩìÂ≠êÈõÜÂåñÂ∫îÁî®Â∫ìÔºå Fontmin.js ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•Â∏ÆÂä©ÁΩëÁ´ôÊàñÂ∫îÁî®Á®ãÂ∫èÂáèÂ∞èÂ≠ó‰ΩìÊñá‰ª∂Â§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶„ÄÇ‰ΩÜÊòØÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂÆÉÂèØËÉΩ‰ºöÂΩ±ÂìçÂ≠ó‰ΩìÁöÑÂ§ñËßÇÔºåÂπ∂ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§ÑÁêÜÊ≠•È™§„ÄÇ ËØïËØïAIÂØπÂÆÉÁöÑËØÑ‰ª∑ÔºöFontmin.js ÁöÑ‰ºòÁÇπÂåÖÊã¨Ôºö ÂáèÂ∞èÂ≠ó‰ΩìÊñá‰ª∂Â§ßÂ∞èÔºöFontmin.js ÂèØ‰ª•Â∞Ü‰∏Ä‰∏™Â§ßÂûãÂ≠ó‰ΩìÊñá‰ª∂ÂéãÁº©‰∏∫‰ªÖÂåÖÂê´ÊâÄÈúÄÂ≠óÁ¨¶ÁöÑÂ∞èÂûãÂ≠ó‰ΩìÊñá‰ª∂Ôºå‰ªéËÄåÂáèÂ∞èÂ≠ó‰ΩìÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶„ÄÇÁÅµÊ¥ªÊÄßÔºöFontmin.js Êèê‰æõ‰∫ÜÂ§öÁßçÊñπÊ≥ïÔºåÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈÄâÊã©‰ΩøÁî®Ôºå‰æãÂ¶Ç Fontmin.glyph()„ÄÅFontmin.ttf2eot() Âíå Fontmin.ttf2woff() Á≠âÊñπÊ≥ï„ÄÇÊòì‰∫é‰ΩøÁî®ÔºöFontmin.js ÁöÑ API ÁÆÄÂçïÊòìÁî®ÔºåÂè™ÈúÄË¶ÅÂá†Ë°å‰ª£Á†ÅÂ∞±ÂèØ‰ª•ÂÆåÊàêÂ≠ó‰ΩìÂ≠êÈõÜÂåñÁöÑÊìç‰Ωú„ÄÇ Fontmin.js ÁöÑÁº∫ÁÇπÂåÖÊã¨Ôºö Êó†Ê≥ïÂÆåÂÖ®‰øùÁïôÂ≠ó‰ΩìÁöÑÂ§ñËßÇÔºöÁî±‰∫é Fontmin.js Âè™‰øùÁïôÊâÄÈúÄÂ≠óÁ¨¶ÔºåÂõ†Ê≠§ÂèØËÉΩ‰ºöÂΩ±ÂìçÂ≠ó‰ΩìÁöÑÂ§ñËßÇÔºåÁâπÂà´ÊòØÂØπ‰∫é‰∏Ä‰∫õÂ§çÊùÇÁöÑÂ≠ó‰Ωì„ÄÇÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§ÑÁêÜÊ≠•È™§ÔºöFontmin.js ÁîüÊàêÁöÑÂ≠ó‰ΩìÊñá‰ª∂ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§ÑÁêÜÊ≠•È™§Ôºå‰æãÂ¶ÇÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞ CSS Êñá‰ª∂‰∏≠ÔºåÂπ∂Á°Æ‰øùÂú®‰∏çÂêåÊµèËßàÂô®ÂíåËÆæÂ§á‰∏äÈÉΩËÉΩÊ≠£Â∏∏ÊòæÁ§∫„ÄÇ ÊÄªÁöÑÊù•ËØ¥ÔºåFontmin.js ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•Â∏ÆÂä©ÁΩëÁ´ôÊàñÂ∫îÁî®Á®ãÂ∫èÂáèÂ∞èÂ≠ó‰ΩìÊñá‰ª∂Â§ßÂ∞èÔºåÊèêÈ´òÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶„ÄÇ‰ΩÜÊòØÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂÆÉÂèØËÉΩ‰ºöÂΩ±ÂìçÂ≠ó‰ΩìÁöÑÂ§ñËßÇÔºåÂπ∂ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§ÑÁêÜÊ≠•È™§„ÄÇ]]></content>
      <categories>
        <category>fontmin</category>
      </categories>
      <tags>
        <tag>fontmin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[electron]]></title>
    <url>%2F2023%2F02%2F13%2Felectron%2F</url>
    <content type="text"><![CDATA[12 ElectronÊú¨ÁØáÊñáÁ´†Â∞ÜÁªìÂêàÂÆòÊñπÊñáÊ°£‰ª•ÂèäÂÆûÈôÖÁ∫ø‰∏äÊØèÂ§©‰∏á‰∫∫‰ΩøÁî®ÁöÑ‰∏ÄÊ¨æÂºÄÊí≠Â∑•ÂÖ∑Ê∫êÁ†ÅÁâáÊÆµÁªºÂêàÈòêËø∞‰∏ãElectron ÁöÑÂºÄÂèëÁªèÈ™åÂíåÊäÄÂ∑ß ElectronÊòØ‰∏Ä‰∏™‰ΩøÁî® JavaScript„ÄÅHTML Âíå CSS ÊûÑÂª∫Ê°åÈù¢Â∫îÁî®Á®ãÂ∫èÁöÑÊ°ÜÊû∂„ÄÇ ÂµåÂÖ• Chromium Âíå Node.js Âà∞ ‰∫åËøõÂà∂ÁöÑ Electron ÂÖÅËÆ∏ÊÇ®‰øùÊåÅ‰∏Ä‰∏™ JavaScript ‰ª£Á†Å‰ª£Á†ÅÂ∫ìÂπ∂ÂàõÂª∫ Âú®Windows‰∏äËøêË°åÁöÑË∑®Âπ≥Âè∞Â∫îÁî® macOSÂíåLinux‚Äî‚Äî‰∏çÈúÄË¶ÅÊú¨Âú∞ÂºÄÂèëÁªèÈ™å„ÄÇ ÂºÄÂèëÁéØÂ¢É ÊÇ®ÈúÄË¶ÅÂÆâË£Ö node.js Âª∫ËÆÆÂÆâË£ÖÊúÄÊñ∞ÁöÑLTSÁâàÊú¨ Âõ†‰∏∫ Electron Â∞Ü Node.js ÂµåÂÖ•Âà∞ÂÖ∂‰∫åËøõÂà∂Êñá‰ª∂‰∏≠Ôºå‰Ω†Â∫îÁî®ËøêË°åÊó∂ÁöÑ Node.js ÁâàÊú¨‰∏é‰Ω†Á≥ªÁªü‰∏≠ËøêË°åÁöÑ Node.js ÁâàÊú¨Êó†ÂÖ≥„ÄÇ Electron Â∫îÁî®Á®ãÂ∫èÈÅµÂæ™‰∏éÂÖ∂‰ªñ Node.js È°πÁõÆÁõ∏ÂêåÁöÑÁªìÊûÑ„ÄÇ È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂Â§πÂπ∂ÂàùÂßãÂåñ npm ÂåÖ„ÄÇ 12mkdir my-electron-app &amp;&amp; cd my-electron-appnpm init initÂàùÂßãÂåñÂëΩ‰ª§‰ºöÊèêÁ§∫ÊÇ®Âú®È°πÁõÆÂàùÂßãÂåñÈÖçÁΩÆ‰∏≠ËÆæÁΩÆ‰∏Ä‰∫õÂÄº ‰∏∫Êú¨ÊïôÁ®ãÁöÑÁõÆÁöÑÔºåÊúâÂá†Êù°ËßÑÂàôÈúÄË¶ÅÈÅµÂæ™Ôºö. entry point Â∫î‰∏∫ main.js.. author ‰∏é description ÂèØ‰∏∫‰ªªÊÑèÂÄºÔºå‰ΩÜÂØπ‰∫éÂ∫îÁî®ÊâìÂåÖÊòØÂøÖÂ°´È°π„ÄÇËøôÈáåÂÆòÁΩëÂè™ÊòØ‰Ωú‰∏∫‰∏Ä‰∏™demoÊù•ËßÑÂàíÊñá‰ª∂ÁªìÊûúÔºåÂÆûÈôÖÂºÄÂèëÁéØÂ¢É‰∏≠ÔºåElectronÂ∫îÁî®ÂæàÂèØËÉΩÊòØÂú®ÂéüÊúâ‰∏öÂä°ÁöÑÁΩëÈ°µÁâàÈ°πÁõÆ‰∏≠ ÔºåÊØîÂ¶Ç‰∏Ä‰∏™ÁΩëÈ°µÁâàÁõ¥Êí≠È°µÈù¢Ôºå‰ΩøÁî®React + next ÂÆûÁé∞„ÄÇÁé∞Âú®Ë¶ÅÂÆûÁé∞ÂºÄÊí≠Â∑•ÂÖ∑Ê°åÈù¢Á´ØÈ•ÆÁî®Ôºå‰∏ÄËà¨Áõ¥Êé•ÈÄâÊã©Âú®ÂéüÊúâÁöÑÈ°πÁõÆÊñá‰ª∂‰∏≠Áõ¥Êé•Êñ∞Âª∫Êñá‰ª∂Â§πÂºÄÂßãÔºåÈÇ£‰πàÂÖ•Âè£Êñá‰ª∂ÂæàÂèØËÉΩ‰∏çÊòØÊ†πÁõÆÂΩï‰∏ã main.jsÔºåËøôÁÇπÊàë‰ª¨ÈÄöËøá package.json ÁöÑÈÖçÁΩÆ main: ‚Äòxxx‚ÄôÂèØ‰ª•Ëß£ÂÜ≥. Ëá≥‰∫éËØ¥ Electron ÊòØ ‚ÄúWebÁΩëÈ°µ‚Äù Â•ó‰∫ÜÊ°åÈù¢Á´ØÁöÑÂ£≥ÔºåÈÇ£‰∏∫‰ªÄ‰πàÊàë‰ª¨ËøòË¶Å‰ΩøÁî® ElectronÂë¢Ôºü Âõ†‰∏∫WebÂ∫îÁî®Êó†Ê≥ïÊãøÂà∞Êìç‰ΩúÁ≥ªÁªüÁöÑÊùÉÈôêÔºåËøôÂØπ‰∫éÊàë‰ª¨Ëß£ÂÜ≥‰∏Ä‰∫õÈóÆÈ¢òÂçÅÂàÜÂÖ≥ÈîÆ„ÄÇ 12345// package.json&#123; "description": "www.2339.com", "main": "app/main.js", // ËøôÈáåÈÖçÁΩÆ‰∫ÜÈ°πÁõÆÁöÑÂÖ•Âè£Êñá‰ª∂&#125; ÊåâË£Ö ElectronÂåÖ Âπ∂ÂàõÂª∫ÊâßË°åËÑöÊú¨ 1234567891011121314yarn add --dev electron// ÈÖçÁΩÆ package.json 4ÁßçÁéØÂ¢ÉÔºå‰∏ÄËà¨Â≠¶‰π†Âè™ÈúÄË¶ÅÈÖçÁΩÆ‰∏ÄÁßçÂç≥ÂèØÔºåÊâìÂåÖÂëΩ‰ª§ÂêéÁª≠‰πüÂú®ËøôÈáåÈÖçÁΩÆ&#123; "scripts": &#123; "electron:dev": "electron .", "electron:staging": "cross-env NODE_ENV=development ELECTRON=1 MODE=staging nextron -p 9401 .", "electron:grey": "electron .", "electron:production": "electron .", &#125;&#125;// ÂëΩ‰ª§ÂêØÂä® dev ÁéØÂ¢Éyarn electron:dev ËøêË°å‰∏ªËøõÁ®ã‰ªª‰Ωï Electron Â∫îÁî®Á®ãÂ∫èÁöÑÂÖ•Âè£ÈÉΩÊòØ main Êñá‰ª∂„ÄÇ Ëøô‰∏™Êñá‰ª∂ÊéßÂà∂‰∫Ü‰∏ªËøõÁ®ãÔºåÂÆÉËøêË°åÂú®‰∏Ä‰∏™ÂÆåÊï¥ÁöÑNode.jsÁéØÂ¢É‰∏≠ÔºåË¥üË¥£ÊéßÂà∂ÊÇ®Â∫îÁî®ÁöÑÁîüÂëΩÂë®ÊúüÔºåÊòæÁ§∫ÂéüÁîüÁïåÈù¢ÔºåÊâßË°åÁâπÊÆäÊìç‰ΩúÂπ∂ÁÆ°ÁêÜÊ∏≤ÊüìÂô®ËøõÁ®ã(Á®çÂêéËØ¶ÁªÜ‰ªãÁªç)„ÄÇÊâßË°åÊúüÈó¥ÔºåElectron Â∞Ü‰æùÊçÆÂ∫îÁî®‰∏≠ package.jsonÈÖçÁΩÆ‰∏ãmainÂ≠óÊÆµ‰∏≠ÈÖçÁΩÆÁöÑÂÄºÊü•ÊâæÊ≠§Êñá‰ª∂ÔºåÊÇ®Â∫îËØ•Â∑≤Âú®Â∫îÁî®ËÑöÊâãÊû∂Ê≠•È™§‰∏≠ÈÖçÁΩÆ„ÄÇ ÂàõÂª∫È°µÈù¢Âú®ÂèØ‰ª•‰∏∫Êàë‰ª¨ÁöÑÂ∫îÁî®ÂàõÂª∫Á™óÂè£ÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅÂÖàÂàõÂª∫Âä†ËΩΩËøõËØ•Á™óÂè£ÁöÑÂÜÖÂÆπ„ÄÇ Âú®Electron‰∏≠ÔºåÂêÑ‰∏™Á™óÂè£ÊòæÁ§∫ÁöÑÂÜÖÂÆπÂèØ‰ª•ÊòØÊú¨Âú∞HTMLÊñá‰ª∂Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ËøúÁ®ãurl„ÄÇ Âú®Á™óÂè£‰∏≠ÊâìÂºÄÊÇ®ÁöÑÈ°µÈù¢Áé∞Âú®ÊÇ®Êúâ‰∫Ü‰∏Ä‰∏™È°µÈù¢ÔºåÂ∞ÜÂÆÉÂä†ËΩΩËøõÂ∫îÁî®Á™óÂè£‰∏≠„ÄÇ Ë¶ÅÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºå‰Ω†ÈúÄË¶Å ‰∏§‰∏™ElectronÊ®°ÂùóÔºö . app Ê®°ÂùóÔºåÂÆÉÊéßÂà∂Â∫îÁî®Á®ãÂ∫èÁöÑ‰∫ã‰ª∂ÁîüÂëΩÂë®Êúü„ÄÇ. BrowserWindow Ê®°ÂùóÔºåÂÆÉÂàõÂª∫ÂíåÁÆ°ÁêÜÂ∫îÁî®Á®ãÂ∫è Á™óÂè£„ÄÇÂõ†‰∏∫‰∏ªËøõÁ®ãËøêË°åÁùÄ Node.jsÔºåÊÇ®ÂèØ‰ª•Âú® main.js Êñá‰ª∂Â§¥ÈÉ®Â∞ÜÂÆÉ‰ª¨ÂØºÂÖ•‰Ωú‰∏∫ CommonJS Ê®°ÂùóÔºö ‰∏ìÊúâÂêçËØç Á™óÂè£ È¢ÑÂä†ËΩΩËÑöÊú¨ Ê∏≤ÊüìÂô® ‰∏ªËøõÁ®ãÊØè‰∏™ Electron Â∫îÁî®ÈÉΩÊúâ‰∏Ä‰∏™Âçï‰∏ÄÁöÑ‰∏ªËøõÁ®ãÔºå‰Ωú‰∏∫Â∫îÁî®Á®ãÂ∫èÁöÑÂÖ•Âè£ÁÇπ„ÄÇ ‰∏ªËøõÁ®ãÂú® Node.js ÁéØÂ¢É‰∏≠ËøêË°åÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂÖ∑Êúâ require Ê®°ÂùóÂíå‰ΩøÁî®ÊâÄÊúâ Node.js API ÁöÑËÉΩÂäõ‰∏ªËøõÁ®ãÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊòØ‰ΩøÁî® BrowserWindow Ê®°ÂùóÂàõÂª∫ÂíåÁÆ°ÁêÜÂ∫îÁî®Á®ãÂ∫èÁ™óÂè£„ÄÇBrowserWindow Á±ªÁöÑÊØè‰∏™ÂÆû‰æãÂàõÂª∫‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÁ™óÂè£Ôºå‰∏îÂú®ÂçïÁã¨ÁöÑÊ∏≤ÊüìÂô®ËøõÁ®ã‰∏≠Âä†ËΩΩ‰∏Ä‰∏™ÁΩëÈ°µ„ÄÇ ÊÇ®ÂèØ‰ªé‰∏ªËøõÁ®ãÁî® window ÁöÑ webContent ÂØπË±°‰∏éÁΩëÈ°µÂÜÖÂÆπËøõË°å‰∫§‰∫í„ÄÇ Â∫îÁî®Á®ãÂ∫èÁîüÂëΩÂë®Êúü‰∏ªËøõÁ®ãËøòËÉΩÈÄöËøá Electron ÁöÑ app Ê®°ÂùóÊù•ÊéßÂà∂ÊÇ®Â∫îÁî®Á®ãÂ∫èÁöÑÁîüÂëΩÂë®Êúü„ÄÇ ËØ•Ê®°ÂùóÊèê‰æõ‰∫Ü‰∏ÄÊï¥Â•óÁöÑ‰∫ã‰ª∂ÂíåÊñπÊ≥ïÔºåÂèØ‰ª•ËÆ©ÊÇ®Áî®Êù•Ê∑ªÂä†Ëá™ÂÆö‰πâÁöÑÂ∫îÁî®Á®ãÂ∫èË°å‰∏∫ (‰æãÂ¶ÇÔºö‰ª•ÁºñÁ®ãÊñπÂºèÈÄÄÂá∫ÊÇ®ÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÅ‰øÆÊîπÂ∫îÁî®Á®ãÂ∫èÂùûÔºåÊàñÊòæÁ§∫‰∏Ä‰∏™ÂÖ≥‰∫éÈù¢Êùø) app Ê®°Âùó BrowserWindow Ê®°ÂùóBrowserWindow Á±ªÁöÑÊØè‰∏™ÂÆû‰æãÂàõÂª∫‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÁ™óÂè£Ôºå‰∏îÂú®ÂçïÁã¨ÁöÑÊ∏≤ÊüìÂô®ËøõÁ®ã‰∏≠Âä†ËΩΩ‰∏Ä‰∏™ÁΩëÈ°µ„ÄÇ ÊÇ®ÂèØ‰ªé‰∏ªËøõÁ®ãÁî® window ÁöÑ webContent ÂØπË±°‰∏éÁΩëÈ°µÂÜÖÂÆπËøõË°å‰∫§‰∫í„ÄÇÁî±‰∫é BrowserWindow Ê®°ÂùóÊòØ‰∏Ä‰∏™ EventEmitterÔºå ÊâÄ‰ª•ÊÇ®‰πüÂèØ‰ª•‰∏∫ÂêÑÁßçÁî®Êà∑‰∫ã‰ª∂ ( ‰æãÂ¶ÇÔºåÊúÄÂ∞èÂåñ Êàñ ÊúÄÂ§ßÂåñÊÇ®ÁöÑÁ™óÂè£ ) Ê∑ªÂä†Â§ÑÁêÜÁ®ãÂ∫è„ÄÇÂΩì‰∏Ä‰∏™ BrowserWindow ÂÆû‰æãË¢´ÈîÄÊØÅÊó∂Ôºå‰∏éÂÖ∂Áõ∏Â∫îÁöÑÊ∏≤ÊüìÂô®ËøõÁ®ã‰πü‰ºöË¢´ÁªàÊ≠¢„ÄÇ CommonJS Ê®°Âùó Preload ËÑöÊú¨È¢ÑÂä†ËΩΩÔºàpreloadÔºâËÑöÊú¨ÂåÖÂê´‰∫ÜÈÇ£‰∫õÊâßË°å‰∫éÊ∏≤ÊüìÂô®ËøõÁ®ã‰∏≠Ôºå‰∏îÂÖà‰∫éÁΩëÈ°µÂÜÖÂÆπÂºÄÂßãÂä†ËΩΩÁöÑ‰ª£Á†Å „ÄÇ Ëøô‰∫õËÑöÊú¨ËôΩËøêË°å‰∫éÊ∏≤ÊüìÂô®ÁöÑÁéØÂ¢É‰∏≠ÔºåÂç¥Âõ†ËÉΩËÆøÈóÆ Node.js API ËÄåÊã•Êúâ‰∫ÜÊõ¥Â§öÁöÑÊùÉÈôê„ÄÇÈ¢ÑÂä†ËΩΩËÑöÊú¨ÂèØ‰ª•Âú® BrowserWindow ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÁöÑ webPreferences ÈÄâÈ°πÈáåË¢´ÈôÑÂä†Âà∞‰∏ªËøõÁ®ã„ÄÇÂõ†‰∏∫È¢ÑÂä†ËΩΩËÑöÊú¨‰∏éÊµèËßàÂô®ÂÖ±‰∫´Âêå‰∏Ä‰∏™ÂÖ®Â±Ä Window Êé•Âè£ÔºåÂπ∂‰∏îÂèØ‰ª•ËÆøÈóÆ Node.js APIÔºåÊâÄ‰ª•ÂÆÉÈÄöËøáÂú®ÂÖ®Â±Ä window ‰∏≠Êö¥Èú≤‰ªªÊÑè API Êù•Â¢ûÂº∫Ê∏≤ÊüìÂô®Ôºå‰ª•‰æø‰Ω†ÁöÑÁΩëÈ°µÂÜÖÂÆπ‰ΩøÁî®„ÄÇ ‰∏ãÈù¢ÊòØÊ∏≤ÊüìËøõÁ®ã‰∏≠ÈÄâÂèñÁî®Êà∑Êìç‰ΩúÁ≥ªÁªüÊñá‰ª∂‰∏≠ÁöÑ‰∏ÄÂº†ÂõæÁâáÂç≥ÊâìÂºÄÁ≥ªÁªüÊñá‰ª∂Â§πÔºåÈÄâÂèñ‰∏ÄÂº†ÂõæÁâá 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191// Âú® preload ËÑöÊú¨‰∏≠Â¢ûÂä†ÂÖ®Â±ÄÊ∂àÊÅØÂ§ÑÁêÜÊú∫Âà∂ // preload.jswindow.electron = &#123; message: &#123; send: (payload) =&gt; &#123; return ipcRenderer.send('message', payload); &#125;, on: (handler) =&gt; &#123; return ipcRenderer.on('message', handler); &#125;, off: (handler) =&gt; &#123; return ipcRenderer.off('message', handler); &#125;, &#125;,&#125;;// lib/qtClient ËµÑÊ∫êÊñá‰ª∂Â§π// Â∞ÅË£Ö‰∏Ä‰∏™ÂÖ®Â±ÄÂÖ¨Áî®ÊñπÊ≥ïconst clientEvent = new EventEmitter();const inti = (cb) =&gt; &#123; // PCÈ°πÁõÆÂíåelectronÈ°πÁõÆÂú®Âêå‰∏ÄÂ∑•Á®ã‰∏≠ if (!browser.electronClient) &#123; console.info( '======================\r\nÈùû electron ÁéØÂ¢É\r\n======================', ); return; &#125; // ÁõëÂê¨‰∏ªËøõÁ®ã‰∫ã‰ª∂ window.electron.message.on((event, msg) =&gt; &#123; if (msg.id) &#123; clientEvent.emit(msg.id, msg); &#125; else &#123; clientEvent.emit(msg.action, msg); &#125; clientEvent.emit('all', msg); &#125;); cb &amp;&amp; cb();&#125;// call Ê∂àÊÅØÂ∞ÅË£Öconst call = (&#123; action, data = &#123;&#125;, onSuccess = (msg) =&gt; &#123;&#125;, onFail = (msg) =&gt; &#123;&#125;,&#125;) =&gt; &#123; // Âêå‰∏äÔºåÂå∫ÂàÜelectronÁéØÂ¢É if (!browser.electronClient) &#123; return; &#125; if (!action) &#123; console.error('action is required'); return; &#125; const options = &#123; id: utils.getRandomString(), action, data, &#125;; clientEvent.once(options.id, (msg) =&gt; &#123; if (msg.code === 1) &#123; onSuccess(msg); &#125; else &#123; onFail(msg); &#125; &#125;); if (typeof data === 'function') &#123; options.data = &#123;&#125;; &#125; if (action !== 'getSystemInfo') &#123; log(`call„Äê$&#123;action&#125;„Äë options:`, options); &#125; window.electron.message.send(options);&#125;;const qtClient = &#123; init, call&#125;export default call// Â∞ÅË£ÖÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÈúÄÊ±Ç-ÈÄâÂèñÂõæÁâá// app-client.jsconst selectImage = (onSuccess) =&gt; &#123; qtClient.call(&#123; action: 'selectImage', onSuccess, &#125;);&#125;;// ÂÖ∑‰Ωì‰∏öÂä°ÁéØÂ¢É‰∏≠‰ΩøÁî®// eg ‰∏ªÊí≠ÂºÄÊí≠ÂêàÊµÅÊó∂ÂæÄËßÜÈ¢ëÂå∫ÂüüÊ∑ªÂä†‰∏ÄÂº†ÂõæÁâáconst handleAddImage = () =&gt; &#123; appClient.selectImage((msg) =&gt; &#123; const &#123; filePath, fileName, ext, width, height &#125; = msg.data; // ËøîÂõûÊúâÊñá‰ª∂ÁöÑÂÖ∑‰Ωì‰ø°ÊÅØÔºåÊñá‰ª∂Âêç„ÄÅË∑ØÂæÑÁ≠â // Â§ÑÁêÜ‰Ω†ÁöÑ‰∏öÂä° // ÊØîÂ¶ÇÔºö ÊääÊñá‰ª∂‰ø°ÊÅØÂú®ÈÄöËøáÂàô zego Á≠â‰∏âÊñπ‰º†ÈÄíÂá∫ÂéªÔºåÊúÄÁªàÂú®Áõ¥Êí≠ÊµÅ‰∏≠ÊàêÂäüÊ∑ªÂä†‰∏ÄÂº†ÂõæÁâáÊàñGif &#125;)&#125;// -----------------ÂàÜÂâ≤Á∫ø--------------// ‰ª•‰∏ä‰ª£Á†ÅÊòØÊ∏≤ÊüìËøõÁ®ãÂ§ÑÁêÜÁöÑ‰∫ã// Ê∏≤ÊüìËøõÁ®ãÂêë‰∏ªËøõÁ®ãÂèëÈÄÅ‰∫ÜÊÉ≥Ë¶ÅÊâìÂºÄÁî®Êà∑Êñá‰ª∂Â§πËé∑ÂèñÂõæÁâáÁöÑÊ∂àÊÅØÔºå ipcRenderer// ‰ª•‰∏ãÂ∞ÜÊòØ‰∏ªËøõÁ®ã‰∏≠ÁõëÂê¨Ê∏≤ÊüìËøõÁ®ãÁöÑÊ∂àÊÅØÔºåÂπ∂‰ΩúÂá∫Â§ÑÁêÜ ipcMain// main.tsimport message from './message';message.init()// message.ts// Â§ÑÁêÜÊâÄÊúâÁöÑ‰∏ªËøõÁ®ãÊ∂àÊÅØ // ÊâìÂºÄÊñá‰ª∂Â§πÔºåÂπ∂ÈÄâÂèñÂõæÁâáÊñá‰ª∂ const selectImage = (event, message) =&gt; &#123; dialog .showOpenDialog(&#123; title: 'ÈÄâÊã©ÂõæÁâá', properties: ['openFile'], filters: [ &#123; name: 'Images', extensions: ['jpg', 'png', 'jpeg', 'gif', 'bmp'] &#125;, ], &#125;) .then(async (&#123; canceled, filePaths, bookmarks &#125;) =&gt; &#123; if (filePaths.length) &#123; const filePath = filePaths[0]; const &#123; width, height &#125; = imageSize(filePath); // const &#123;fileTypeFromFile&#125; = await import('file-type') // const fileType = await fileTypeFromFile(filePath); const [fileName, fileExt] = filePath .replace(/\\/gi, '/') .split('/') .pop() .split('.'); // const ext = fileType?.ext || fileExt; const ext = fileExt; responseSuccess(event, message, &#123; data: &#123; filePath: filePaths[0], fileName, width, height, ext: ext.toLowerCase(), &#125;, &#125;); &#125; &#125;);&#125;;const actions = &#123; selectImage,&#125;const init = () =&gt; &#123; ipcMain.on('message', (event, message) =&gt; &#123; // event.sender.send('message', message); if (message.action !== 'getSystemInfo') &#123; log.info('[ipcMain message]', message); &#125; if (actions[message.action]) &#123; actions[message.action](event, message); &#125; else &#123; log.warn('action not found', message.action); &#125; &#125;);&#125;; Ëá≥Ê≠§Ôºå‰∏Ä‰∏™ÂÆåÂñÑÁöÑÊ∏≤ÊüìËøõÁ®ã-‰∏ªËøõÁ®ãÈÄö‰ø°Ê°ÜÊû∂Â∞±Êê≠Âª∫ÂÆåÊØïÔºåÂêéÁª≠ÂÖ∂‰ªñÁöÑÈÄö‰ø°ÈúÄÊ±ÇÁõ¥Êé•Êâ©Â±ï‰∏äÂç≥ÂèØ„ÄÇ ËôΩÁÑ∂È¢ÑÂä†ËΩΩËÑöÊú¨‰∏éÂÖ∂ÊâÄÈôÑÁùÄÁöÑÊ∏≤ÊüìÂô®Âú®ÂÖ±‰∫´ÁùÄ‰∏Ä‰∏™ÂÖ®Â±Ä window ÂØπË±°Ôºå‰ΩÜÊÇ®Âπ∂‰∏çËÉΩ‰ªé‰∏≠Áõ¥Êé•ÈôÑÂä†‰ªª‰ΩïÂèòÂä®Âà∞ window ‰πã‰∏äÔºåÂõ†‰∏∫ contextIsolation ÊòØÈªòËÆ§ÁöÑ„ÄÇËØ≠Â¢ÉÈöîÁ¶ªÔºàContext IsolationÔºâÊÑèÂë≥ÁùÄÈ¢ÑÂä†ËΩΩËÑöÊú¨‰∏éÊ∏≤ÊüìÂô®ÁöÑ‰∏ªË¶ÅËøêË°åÁéØÂ¢ÉÊòØÈöîÁ¶ªÂºÄÊù•ÁöÑÔºå‰ª•ÈÅøÂÖçÊ≥ÑÊºè‰ªª‰ΩïÂÖ∑ÁâπÊùÉÁöÑ API Âà∞ÊÇ®ÁöÑÁΩëÈ°µÂÜÖÂÆπ‰ª£Á†Å‰∏≠„ÄÇ ÂèñËÄå‰ª£‰πãÔºåÊàë‰ª¨Â∞á‰ΩøÁî® contextBridge Ê®°ÂùóÊù•ÂÆâÂÖ®Âú∞ÂÆûÁé∞‰∫§‰∫í darwinDarwin ÊòØMacOSX Êìç‰ΩúÁéØÂ¢É, Âç≥ËãπÊûúÁîµËÑëÁöÑÊìç‰ΩúÁ≥ªÁªü ÊâìÂåÖÂ∑•ÂÖ∑electron-builder CLIÂëΩ‰ª§Ë°åÊé•Âè£ devDependenciesÂºÄÂèëÁéØÂ¢ÉÈúÄË¶ÅÁöÑÈ¢ùÂ§ñ‰æùËµñÔºåÊÇ®ÁöÑÂ∫îÁî®ÈúÄË¶ÅËøêË°å Electron APIÔºåÂõ†Ê≠§ËøôÂê¨‰∏äÂéªÂèØËÉΩÊúâÁÇπÂèçÁõ¥Ëßâ„ÄÇ ÂÆûÈôÖ‰∏äÔºåÊâìÂåÖÂêéÁöÑÂ∫îÁî®Êú¨Ë∫´‰ºöÂåÖÂê´ Electron ÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂõ†Ê≠§‰∏çÈúÄË¶ÅÂ∞Ü Electron ‰Ωú‰∏∫Áîü‰∫ßÁéØÂ¢É‰æùËµñ„ÄÇ ÂéüÁîü API‰∏∫‰∫Ü‰Ωø Electron ÁöÑÂäüËÉΩ‰∏ç‰ªÖ‰ªÖÈôê‰∫éÂØπÁΩëÈ°µÂÜÖÂÆπÁöÑÂ∞ÅË£ÖÔºå‰∏ªËøõÁ®ã‰πüÊ∑ªÂä†‰∫ÜËá™ÂÆö‰πâÁöÑ API Êù•‰∏éÁî®Êà∑ÁöÑ‰Ωú‰∏öÁ≥ªÁªüËøõË°å‰∫§‰∫í„ÄÇ Electron ÊúâÁùÄÂ§öÁßçÊéßÂà∂ÂéüÁîüÊ°åÈù¢ÂäüËÉΩÁöÑÊ®°ÂùóÔºå‰æãÂ¶ÇËèúÂçï„ÄÅÂØπËØùÊ°Ü‰ª•ÂèäÊâòÁõòÂõæÊ†á„ÄÇ]]></content>
      <categories>
        <category>code</category>
      </categories>
      <tags>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Áõ¥Êí≠Áõ∏ÂÖ≥Live„Äêhybrid„Äë]]></title>
    <url>%2F2022%2F01%2F01%2Fpage%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄÁõ¥Êí≠Èó¥‰∏Ä‰∫õÂ§çÊùÇÂäüËÉΩÁöÑÂÆûÁé∞ÂíåÊÄªÁªìÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫é IM ÂèäÊó∂ÈÄöËÆØÊ∂àÊÅØ„ÄÅËûç‰∫ë„ÄÅËûç‰ø° IM ÁßÅËÅäÊ∂àÊÅØ„ÄÅÊé®ÊãâÊµÅ„ÄÅWebSocket Êé®ÈÄÅ„ÄÅHybrid ‰∏é H5 ÁöÑÊ°•Êé•ÈÄö‰ø°„ÄÅmobx-state-tree | React ÈáçÊûÑ ËøúÂè§ JQ ‰ª£Á†Å„ÄÅ PC Áõ¥Êí≠Èó¥Ê∑±Â∫¶ÈìæÊé•Ëá≥ÁßªÂä®Á´Ø„ÄÅÁî®Êà∑ÊûÅÈ™åËØÅÔºàÈ™åËØÅÈùûËÑöÊú¨ÊàñÊú∫Âô®‰∫∫Ôºâ„ÄÅËøõÂú∫ÁâπÊïà„ÄÅÁî®Êà∑Â§¥ÂÉèÊåÇÂù†„ÄÅÁÇ´ÂΩ©ÊòµÁß∞„ÄÅÁî®Êà∑Ë¥¢ÂØå„ÄÅÁ≠âÁ∫ß„ÄÅË∫´‰ªΩÊ†áÁ≠æÁªÑ‰ª∂Âåñ„ÄÅÊãñÊãΩÁ≠âÁªÑ‰ª∂Â∫îÁî®„ÄÅ Âä®ÁîªSVGASvga ÊòØÂ∏∏ËßÅÁöÑ‰∏ÄÁßçÁõ¥Êí≠Èó¥Âä®ÁîªÊí≠ÊîæÊ†ºÂºèÔºåÂÖ∂ÁâπÊÄßËøôÈáå‰∏çÂÅöËøáÂ§öËß£ÈáäÔºå‰ªäÂ§©ÊÄªÁªì‰∏Ä‰∏ãÂú® H5 Á´Ø Âíå PC Á´Ø Êí≠Êîæ Svga Âä®ÁîªÁöÑÂÖ®ËøáÁ®ã„ÄÇÂ∞ÅË£ÖÂÖ¨Áî®ÊñπÊ≥ï‰ª•Âèä‰ºòÂåñ„ÄÅÈÅøÂùë„ÄÇ Âä®ÁîªÊí≠ÊîæÂú®Áî®Êà∑ÈÄÅÁ§º„ÄÅÁ§ºÁâ©È¢ÑËßàÁ≠âÂú∫ÊôØ‰∏ã‰ΩøÁî®È¢ëÁπÅÔºåÂ∞ÅË£Ö‰∏Ä‰∏™ÂÖ¨Áî®ÊñπÊ≥ïÂú®È°πÁõÆ lib ÂçÅÂàÜÂøÖË¶Å„ÄÇËøôÈáå‰ΩøÁî® „Äêsvgaplayerweb„Äë Â∞ÅË£ÖÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172export function retryPromise(promiseFn, retriesLeft = 5, interval = 1500) &#123; return new Promise((resolve, reject) =&gt; &#123; promiseFn() .then(resolve) .catch((error) =&gt; &#123; setTimeout(() =&gt; &#123; if (retriesLeft === 1) &#123; reject(error); return; &#125; retryPromise(promiseFn, retriesLeft - 1, interval).then( resolve, reject ); &#125;, interval); &#125;); &#125;);&#125;/** * Âä†ËΩΩsvgaÂä®Áîª * @param &#123;String&#125; id dom-id * @param &#123;src&#125; src svgaÊñá‰ª∂Ë∑ØÂæÑ * @param &#123;Number&#125; loops Âæ™ÁéØÊ¨°Êï∞,ÈªòËÆ§‰∏∫0Êó†ÈôêÂæ™ÁéØ * @param &#123;Function&#125; onFinished ÂÆåÊàêÂõûË∞É * @param &#123;Boolean&#125; isPlayNow ÊòØÂê¶Á´ãÂç≥Êí≠ÊîæÔºåÈªòËÆ§true */const svgaModules = &#123;&#125;;export function svgaPlayer(option) &#123; const &#123; id, src, loops = 0, onFinished, clearsAfterStop = true, fillMode = "Backward", isPlayNow = true, &#125; = option; if (!id) &#123; return; &#125; const play = () =&gt; &#123; const &#123; svga &#125; = svgaModules; const player = new svga.Player(`#$&#123;id&#125;`); const parser = new svga.Parser(`#$&#123;id&#125;`); parser.load(src, (videoItem) =&gt; &#123; player.loops = loops; player.clearsAfterStop = clearsAfterStop; player.fillMode = fillMode; player.setVideoItem(videoItem); player.onFinished(() =&gt; &#123; if (onFinished) &#123; onFinished(); &#125; &#125;); isPlayNow &amp;&amp; player.startAnimation(); &#125;); &#125;; if (svgaModules.svga) &#123; play(); return; &#125; retryPromise(() =&gt; import("svgaplayerweb")).then((svga) =&gt; &#123; svgaModules.svga = svga; play(); &#125;);&#125; ‰ª•‰∏äÂ∞ÅË£ÖÂèØ‰ª•Êª°Ë∂≥Â∏∏ËßÅÁöÑÂä®ÁîªÊí≠ÊîæÂú∫ÊôØ„ÄÇ Tab ÁÇπÂáªÂä®ÁîªÂú∫ÊôØÁé∞Âú®ÁöÑ H5 ‰∫§‰∫íË∂äÊù•Ë∂ä‰ΩìÁé∞Áî®Êà∑Ëá≥‰∏äÔºåÂú® tab ÁöÑÁÇπÂáª‰∏äÔºåËÆæËÆ°Â∏àÊõ¥ÊÉ≥Ë¶ÅÁî®Êà∑ÁÇπÂáª Êüê‰∏™ tab Êí≠ÊîæËØ• tab ÁöÑÂä®ÁîªÁä∂ÊÄÅÔºåÂ∏∏ËßÅÁöÑÊúâÁÇπÂáª hybrid È°µÈù¢Ê†π tabÔºåËØ• tab ‰ºöÊäñÂä®Âä®ÁîªÊàñËÄÖÊó†Ë°îÊé•Êí≠Êîæ‰∏Ä‰∏™Â∞èÂä®ÁîªÔºåËøô‰∏™ËÆæËÆ°Â∏àÁªôÁöÑ svga Âä®ÁîªÔºåÂÆûÁé∞Âè™ÈúÄË¶Å‰∏äËø∞ÂÖ¨Áî®ÊñπÊ≥ï „ÄêisPlayNow„Äë ÂèÇÊï∞ÔºåÈªòËÆ§Âè™ËÆ©Âä®ÁîªÂä†ËΩΩËÄå‰∏çÁ´ãÂç≥Êí≠ÊîæÔºåÂ±ïÁ§∫Á¨¨‰∏ÄÂ∏ßÔºåÊïàÊûúÂíåÈùôÊÄÅ tab ‰∏ÄÊ†∑ÔºåÂæÖÁÇπÂáªÊó∂Âú® ‰øÆÊîπ „ÄêisPlayNow„Äë ‰∏∫ trueÔºåÊí≠ÊîæÂä®ÁîªÂç≥ÂèØÂÆûÁé∞‰∏äËø∞ÊïàÊûú„ÄÇ VAPvap [video-animation-player] ÊòØËÖæËÆØ‰ºÅÈπÖÁîµÁ´ûÊé®Âá∫ÁöÑÂºÄÊ∫ê mp4 Êí≠ÊîæÂ∫ìÔºåÂÖ∑‰ΩìÁßªÊ≠• GitHub ‰ªìÂ∫ìÔºåËØ•Â∫ìÈÄÇÈÖç‰∏âÁ´ØÔºåËøôÈáåÂè™ÊÄªÁªì‰∏ã Web Á´Ø Â∞ÅË£ÖÂÖ¨Áî®ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475// vap-player.jsimport Vap from "video-animation-player";import &#123; request &#125; from "lib";let vap = null;const play = (opt) =&gt; &#123; let &#123; container, src, configUrl, imgUser, textUser, width = "100%", height = "100%", fontStyle, loop = false, fps = 24, mute = true, precache = false, accurate = false, onStop = () =&gt; &#123;&#125;, &#125; = opt; const fn = (config) =&gt; &#123; if (vap) &#123; vap.destroy(); &#125; vap = new Vap( Object.assign( &#123;&#125;, &#123; container, src, config, width, height, fontStyle, imgUser, textUser, loop, fps: config.info.fps || fps, precache, mute, accurate, &#125; ) ) .on("error", (e) =&gt; &#123; vap.destroy(); onStop(); &#125;) .on("ended", () =&gt; &#123; vap.destroy(); onStop(); &#125;); &#125;; request.api.get(configUrl).then((res) =&gt; &#123; fn(res.data); &#125;);&#125;;const destroy = () =&gt; &#123; if (vap) &#123; vap.destroy(); &#125;&#125;;export default &#123; play, destroy &#125;;// ÂºïÁî®import VapPlayer from "lib";VapPlayer.play(options); ‰ΩøÁî® vap Âú®ÈÉ®ÂàÜÊú∫ÂûãÂØºËá¥Âä®ÁîªÊïàÊûúÊ®°Á≥äÈîØÈΩøÁöÑËß£ÂÜ≥ÂäûÊ≥ïÔºö Dom ÂÆπÂô®ÁöÑÂÆΩÈ´òÊâ©Â§ß 400%ÔºåÂÜçÁº©Â∞è ‚Äòtransform: scale(0.25);‚Äô Áº©Â∞èÂõõÂÄç„ÄÇ Chrome‰∏çÊîØÊåÅobsËôöÊãüÊëÑÂÉèÂ§¥Ëß£ÂÜ≥ÊñπÊ≥ïÁõ¥Êí≠Âπ≥Âè∞‰∏ÄËà¨ÈÉΩ‰ºöÊúâËá™Â∑±ÂØπÂ∫îÁöÑÂºÄÊí≠Â∑•ÂÖ∑ÔºåÊØîÂ¶ÇYY„ÄÅËôéÁâôÂä©Êâã„ÄÅOBSÁ≠â„ÄÇÈááÁî®OBSÈááÈõÜËßÜÈ¢ëÊµÅÔºå‰ºö‰ΩøÁî®ËôöÊãüÊëÑÂÉèÂ§¥ÔºåChromeÊúâÊó∂ÂÄô‰ºö‰∏çÊîØÊåÅËôöÊãüÊëÑÂÉèÂ§¥ÔºåËß£ÂÜ≥ÂäûÊ≥ï‰∏∫Ôºö ÊµèËßàÂô®ÈªòËÆ§Êú™ÂÖÅËÆ∏ËôöÊãüÊëÑÂÉèÂ§¥ÁöÑ‰ΩøÁî®ÔºåÂú®Âá∫ChromeÁöÑËÆæÁΩÆ‰∏≠ÊâìÂºÄÂØπÂ∫îÁöÑÈöêÁßÅÈÖçÁΩÆÂç≥ÂèØÔºåÂÖ∑‰ΩìÊ≠•È™§ÂèØ‰ª•Google„ÄÇ IM ÂèäÊó∂ÈÄöËÆØÊ∂àÊÅØÂæÖÊï¥ÁêÜ Êé®ÊãâÊµÅdsBridge Ê°•Êé•ÈÄö‰ø°socket ÁõëÂê¨ÂèëÂ∏ÉCSSÁÇ´ÂΩ©ÊòµÁß∞‰∫îÈ¢úÂÖ≠Ëâ≤ÁöÑÁÇ´ÂΩ©ÊòµÁß∞CSSÂÆûÁé∞ 1234&lt;!-- html --&gt;&lt;WrapColorName&gt; &lt;div className="name"&gt;Áî®Êà∑ÊòµÁß∞ÂìáÂìàÂìà&lt;/div&gt;&lt;/WrapColorName&gt; 1234567891011121314151617181920212223242526272829/* ËøôÈáå‰ΩøÁî® styled-components ÂÜôÊ≥ïÔºåÂèØ‰ª•ÊîπÊàêÂÖ∂‰ªñCSSÊ°ÜÊû∂ÂÜôÊ≥ïÔºåËØ≠Ê≥ï‰∏çÂèò */const maskedAnimation = keyframes` from &#123; background-position: 0 0; &#125; to &#123; background-position: -200% 0; &#125;`;const WrapColorName = styled.div` background-image: -webkit-linear-gradient( left, #f70000, #ff891c 14.3%, #ffe719 28.6%, #33e97c 43%, #1dd5ff 57%, #ec80ff 71.4%, #ff43dc 86%, #ff43cb 100% ); -webkit-text-fill-color: transparent; -webkit-background-clip: text; -webkit-background-size: 200% 100%; -webkit-animation: $&#123;maskedAnimation&#125; 3s infinite linear;` ‰∏äÈù¢ÁöÑdemo ÂèØ‰ª•Áõ¥Êé•Âú®Êú¨Âú∞Ë∑ëÔºå‰∏ªË¶ÅÂà©Áî® webkit-background-size ÁöÑ‰ΩçÁΩÆÂÅèÁßªÂíå webkit-animation ËÉåÊôØÂÖâÊùüÂÆûÁé∞ÁÇ´ÂΩ©Âä®ÁîªÊñáÊ°àÔºå‰∏äËø∞Ê°à‰æãÂèØ‰ª•Áõ¥Êé•Âú® ÊºîÁ§∫Âú∞ÂùÄ Êü•Áúã]]></content>
      <categories>
        <category>ÈªòËÆ§</category>
      </categories>
      <tags>
        <tag>ÈªòËÆ§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MST]]></title>
    <url>%2F2021%2F07%2F13%2FMST%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄReactÁöÑÁªÑ‰ª∂ÂåñÂºÄÂèëÁ°ÆÂÆûÂØπ‰∫éÂ§ßÂûãÈ°πÁõÆÈùûÂ∏∏ÊúâÁî®ÔºåÂ§ßÂûãÈ°πÁõÆÁöÑÊï∞ÊçÆÁä∂ÊÄÅÁÆ°ÁêÜÂÜô‰π±‰∫Ü‰πüÊòØÂ§¥ÁñºÂíåÈöæ‰ª•Áª¥Êä§ÁöÑÔºåËøôÈáåËÆ∞ÂΩï‰∏Ä‰∏ãÈ°πÁõÆ‰∏≠‰ΩøÁî®ÁöÑÁä∂ÊÄÅÁÆ°ÁêÜMSTÔºàmobx-state-treeÔºâ È¢ÑÂ§áÁü•ËØÜ MobXÔºöËøôÊòØMSTÁöÑÊ†∏ÂøÉÔºåMST‰∏≠Â≠òÂÇ®ÁöÑÂìçÂ∫îÂºè‚ÄúÁä∂ÊÄÅ‚ÄùÈÉΩÊòØMobXÁöÑObservable ReactÔºö‰ΩøÁî®ReactÊù•ÊµãËØïMSTÁöÑÂäüËÉΩÈùûÂ∏∏ÁÆÄÂçï TypeScriptÔºöÂêéÊñá‰∏≠‰ºö‰ΩøÁî®TSÊù•ÁºñÂÜôÁ§∫‰æã‰ª£Á†ÅÔºåTSÂº∫Â§ßÁöÑÊô∫ËÉΩÊèêÁ§∫ÂíåÁ±ªÂûãÊ£ÄÊü•ÔºåÊúâÂä©‰∫éÂø´ÈÄüÊéåÊè°MSTÁöÑAPI ÂÆâË£ÖMST‰æùËµñMobX„ÄÇÈ°πÁõÆ‰∏≠ÊâßË°åyarn add mobx mobx-state-treeÂç≥ÂèØÂÆåÊàêÂÆâË£Ö„ÄÇMobXÊúâ‰∏§‰∏™ÁâàÊú¨ÔºåÊñ∞ÁâàÊú¨ÈúÄË¶ÅÊµèËßàÂô®ProxyÊîØÊåÅÔºå‰∏Ä‰∫õËÄÅÊóßÁöÑÊµèËßàÂô®Âπ∂‰∏çÊîØÊåÅÔºåÈúÄË¶ÅÂÖºÂÆπËÄÅÊµèËßàÂô®ÁöÑËØ∑ÂÆâË£Ömobx@4Ôºöyarn add mobx@4 mobx-state-tree„ÄÇ ÁªìÊûÑ ‰ΩøÁî®MSTÊù•Áª¥Êä§Áä∂ÊÄÅÔºåÈ¶ñÂÖàÈúÄË¶ÅËÆ©MSTÁü•ÈÅìÔºåËøô‰∏™Áä∂ÊÄÅÁöÑÁªìÊûÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑ„ÄÇMSTÂÜÖÂª∫‰∫Ü‰∏Ä‰∏™Á±ªÂûãÊú∫Âà∂„ÄÇÈÄöËøáÁ±ªÂûãÁöÑÁªÑÂêàÂ∞±ÂèØ‰ª•ÂÆö‰πâÂá∫Êï¥‰∏™Áä∂ÊÄÅÁöÑÂΩ¢Áä∂„ÄÇÂπ∂‰∏îÔºåÂú®ÂºÄÂèëÁéØÂ¢É‰∏ãÔºåMSTÂèØ‰ª•ÈÄöËøáËøô‰∏™ÂÆö‰πâÂ•ΩÁöÑÂΩ¢Áä∂ÔºåÊù•Âà§Êñ≠Áä∂ÊÄÅÁöÑÂÄºÂíåÂΩ¢Áä∂‰∏éÂÖ∂ÂØπÂ∫îÁöÑÁ±ªÂûãÊòØÂê¶ÂåπÈÖçÔºåÁ°Æ‰øùÁä∂ÊÄÅÁöÑÁ±ªÂûã‰∏éÈ¢ÑÊúü‰∏ÄËá¥ÔºåËøôÊúâÂä©‰∫éÂú®ÂºÄÂèëÊó∂ÂèäÊó∂ÂèëÁé∞Êï∞ÊçÆÁ±ªÂûãÁöÑÈóÆÈ¢òÔºö MSTÊèê‰æõÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂØπË±°Â∞±ÊòØtypesÔºåÂú®Ëøô‰∏™ÂØπË±°‰∏≠ÔºåÂåÖÂê´‰∫ÜÂü∫Á°ÄÁöÑÂÖÉÁ±ªÂûãÔºàprimitives typesÔºâÔºåÂ¶Çstring„ÄÅboolean„ÄÅnumberÔºåËøòÂåÖÂê´‰∫Ü‰∏Ä‰∫õÂ§çÊùÇÁ±ªÂûãÁöÑÂ∑•ÂéÇÊñπÊ≥ïÂíåÂ∑•ÂÖ∑ÊñπÊ≥ïÔºåÂ∏∏Áî®ÁöÑÊúâmodel„ÄÅarray„ÄÅmap„ÄÅoptionalÁ≠â„ÄÇmodelÊòØ‰∏Ä‰∏™types‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏Ä‰∏™typeÔºå‰ΩøÁî®types.modelÊñπÊ≥ïÂæóÂà∞ÁöÑÂ∞±ÊòØModelÔºåÂú®Model‰∏≠ÔºåÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™typeÊàñËÄÖÂÖ∂‰ªñModel„ÄÇ‰∏Ä‰∏™ModelÂèØ‰ª•Áúã‰ΩúÊòØ‰∏Ä‰∏™ËäÇÁÇπÔºàNodeÔºâÔºåËäÇÁÇπ‰πãÈó¥Áõ∏‰∫íÁªÑÂêàÔºåÂ∞±ÊûÑÈÄ†Âá∫‰∫ÜÊï¥Ê£µÁä∂ÊÄÅÊ†ëÔºàState TreeÔºâ„ÄÇMSTÂèØÁî®ÁöÑÁ±ªÂûãÂíåÁ±ªÂûãÊñπÊ≥ïÈùûÂ∏∏Â§öÔºåËøôÈáå‰∏ç‰∏Ä‰∏ÄÂàó‰∏æÔºåÂèØ‰ª•Âú®ËøôÈáåÊü•ÁúãÂÆåÊï¥ÁöÑÂàóË°®„ÄÇÂÆåÊàêModelÁöÑÂÆö‰πâÂêéÔºåÂèØ‰ª•‰ΩøÁî®Model.createÊñπÊ≥ïËé∑ÂæóModelÁöÑÂÆû‰æã„ÄÇModel.createÂèØ‰ª•‰º†ÂÖ•‰∏§‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÊòØModelÁöÑÂàùÂßãÁä∂ÊÄÅÂÄºÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÂèØÈÄâÂèÇÊï∞ÔºåË°®Á§∫ÈúÄË¶ÅÁªôModelÂèäÂ≠êModelÁöÑenvÂØπË±°ÔºàÁéØÂ¢ÉÈÖçÁΩÆÂØπË±°ÔºâÔºåenvÁî®‰∫éÂÆûÁé∞ÁÆÄÂçïÁöÑ‰æùËµñÊ≥®ÂÖ•ÂäüËÉΩ„ÄÇ PropsViewsviewsÊòØModel‰∏≠‰∏ÄÁ≥ªÂàóË°çÁîüÊï∞ÊçÆÊàñËé∑ÂèñË°çÁîüÊï∞ÊçÆÁöÑÊñπÊ≥ïÁöÑÈõÜÂêàÔºåÁ±ª‰ººVueÁªÑ‰ª∂ÁöÑcomputedËÆ°ÁÆóÂ±ûÊÄß„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂÆö‰πâviewsÊó∂Êúâ‰∏§ÁßçÈÄâÊã©Ôºå‰ΩøÁî®getterÊàñËÄÖ‰∏ç‰ΩøÁî®„ÄÇ‰ΩøÁî®getterÊó∂ÔºåË°çÁîüÊï∞ÊçÆÁöÑÂÄº‰ºöË¢´ÁºìÂ≠òÁõ¥Âà∞‰æùËµñÁöÑÊï∞ÊçÆÂèëÈÄÅÂèòÂåñ„ÄÇËÄå‰∏ç‰ΩøÁî®Êó∂ÔºåÈúÄË¶ÅÈÄöËøáÊñπÊ≥ïË∞ÉÁî®ÁöÑÊñπÂºèËé∑ÂèñË°çÁîüÊï∞ÊçÆÔºåÊó†Ê≥ïÂØπËÆ°ÁÆóÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇÂ∞ΩÂèØËÉΩ‰ΩøÁî®getterÔºåÊúâÂä©‰∫éÊèêÂçáÂ∫îÁî®ÁöÑÊÄßËÉΩ„ÄÇ Actions‰ªéÂêçÂ≠ó‰∏äÂèØ‰ª•ÁúãÂá∫Êù•Ôºå‰∏äÈù¢Âõõ‰ΩçÈÉΩÊòØÁîüÂëΩÂë®ÊúüÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®‰ªñ‰ª¨Âú®ModelÁöÑÂêÑ‰∏™ÁîüÂëΩÂë®ÊúüÊâßË°å‰∏Ä‰∫õÊìç‰ΩúÔºö Èô§‰∫ÜÈÄöÂ∏∏ÊÑè‰πâ‰∏äÁî®Êù•Êõ¥Êñ∞Áä∂ÊÄÅÁöÑactionsÂ§ñÔºåÂú®model.actionsÊñπÊ≥ï‰∏≠ÔºåËøòÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∫õÁâπÊÆäÁöÑactionsÔºö afterCreateafterAttachbeforeDetachbeforeDestroy ‰ªéÂêçÂ≠ó‰∏äÂèØ‰ª•ÁúãÂá∫Êù•Ôºå‰∏äÈù¢Âõõ‰ΩçÈÉΩÊòØÁîüÂëΩÂë®ÊúüÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®‰ªñ‰ª¨Âú®ModelÁöÑÂêÑ‰∏™ÁîüÂëΩÂë®ÊúüÊâßË°å‰∏Ä‰∫õÊìç‰ΩúÔºö 1234567const Model = types .model(...) .actions(self =&gt; (&#123; afterCreate () &#123; // ÊâßË°å‰∏Ä‰∫õÂàùÂßãÂåñÊìç‰Ωú &#125; &#125;)); ÂºÇÊ≠•Action„ÄÅFlowÂºÇÊ≠•Êõ¥Êñ∞Áä∂ÊÄÅÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑÈúÄÊ±ÇÔºåMST‰ªéÂ∫ïÂ±ÇÊîØÊåÅÂºÇÊ≠•action„ÄÇ 1234567891011121314151617181920const model = types .model(...) .actions(self =&gt; (&#123; // async/await async getData () &#123; try &#123; const data = await api.getData(); ... &#125; catch (err) &#123; ... &#125; ... &#125;, // promise updateData () &#123; return api.updateData() .then(...) .catch(...); &#125; &#125;)); Ëã•‰ΩøÁî®Promise„ÄÅasync/awaitÊù•ÁºñÂÜôÂºÇÊ≠•ActionÔºåÂú®ÂºÇÊ≠•Êìç‰Ωú‰πãÂêéÊõ¥Êñ∞Áä∂ÊÄÅÊó∂Ôºå‰ª£Á†ÅÊâßË°åÁöÑ‰∏ä‰∏ãÊñá‰ºöËÑ±Á¶ªactionÔºåÂØºËá¥Áä∂ÊÄÅÂú®action‰πãÂ§ñË¢´Êõ¥Êñ∞ËÄåÊä•Èîô„ÄÇËøôÈáåÊúâ‰∏§ÁßçËß£ÂÜ≥ÂäûÊ≥ïÔºö Â∞ÜÊõ¥Êñ∞Áä∂ÊÄÅÁöÑÊìç‰ΩúÂçïÁã¨Â∞ÅË£ÖÊàêaction ÁºñÂÜô‰∏Ä‰∏™runInActionÁöÑactionÂú®ÂºÇÊ≠•Êìç‰Ωú‰∏≠‰ΩøÁî® 123456789101112131415161718192021222324252627282930313233343536373839// ÊñπÊ≥ï1const Model = types .model(...) .actions(self =&gt; (&#123; setLoading (loading: boolean) &#123; self.loading = loading; &#125;, setData (data: any) &#123; self.data = data; &#125;, async getData () &#123; ... self.setLoading(true); // ËøôÈáåÂõ†‰∏∫Âú®ÂºÇÊ≠•Êìç‰Ωú‰πãÂâçÔºåÁõ¥Êé•ËµãÂÄºself.loading = true‰πüok const data = await api.getData(); self.setData(data); self.setLoading(false); ... &#125; &#125;)); // ÊñπÊ≥ï2const Model = types .model(...) .actions(self =&gt; (&#123; runInAction (fn: () =&gt; any) &#123; fn(); &#125;, async getData () &#123; ... self.runInAction(() =&gt; self.loading = true); const data = await api.getData(); self.runInAction(() =&gt; &#123; self.data = data; self.loading = false; &#125;); ... &#125; &#125;)); ÊñπÊ≥ï1ÈúÄË¶ÅÈ¢ùÂ§ñÂ∞ÅË£ÖN‰∏™actionÔºåÊØîËæÉÈ∫ªÁÉ¶„ÄÇÊñπÊ≥ï2Â∞ÅË£Ö‰∏ÄÊ¨°Â∞±ÂèØ‰ª•Â§öÊ¨°‰ΩøÁî®„ÄÇ‰ΩÜÊòØÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå‰∏§ÁßçÊñπÊ≥ïÈÉΩ‰∏çÂ§üÂÆåÁæéÔºö‰∏Ä‰∏™ÂºÇÊ≠•actionË¢´ÂàÜÂâ≤Êàê‰∫ÜN‰∏™actionË∞ÉÁî®ÔºåÊó†Ê≥ï‰ΩøÁî®MSTÁöÑÊèí‰ª∂Êú∫Âà∂ÂÆûÁé∞Êï¥‰∏™ÂºÇÊ≠•actionÁöÑÂéüÂ≠êÊìç‰Ωú„ÄÅÊí§ÈîÄ/ÈáçÂÅöÁ≠âÈ´òÁ∫ßÂäüËÉΩ„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåMSTÊèê‰æõ‰∫ÜflowÊñπÊ≥ïÊù•ÂàõÂª∫ÂºÇÊ≠•actionÔºö 1234567891011121314151617181920import &#123; types, flow &#125; from 'mobx-state-tree';const model = types .model(...) .actions(self =&gt; &#123; const getData = flow(function * () &#123; self.loading = true; try &#123; const data = yield api.getData(); self.data = data; &#125; catch (err) &#123; ... &#125; self.loading = false; &#125;); return &#123; getData &#125;; &#125;) ‰ΩøÁî®flowÊñπÊ≥ïÈúÄË¶Å‰º†ÂÖ•‰∏Ä‰∏™generator functionÔºåÂú®Ëøô‰∏™ÁîüÊàêÂô®ÊñπÊ≥ï‰∏≠Ôºå‰ΩøÁî®yieldÂÖ≥ÈîÆÂ≠óÂèØ‰ª•resolveÂºÇÊ≠•Êìç‰Ωú„ÄÇÂπ∂‰∏îÔºåÂú®ÊñπÊ≥ï‰∏≠ÂèØ‰ª•Áõ¥Êé•ÁªôÁä∂ÊÄÅËµãÂÄºÔºåÂÜôËµ∑Êù•Êõ¥ÁÆÄÂçïËá™ÁÑ∂„ÄÇ Âø´ÁÖß SnapshotsnapshotÂç≥‚ÄúÂø´ÁÖß‚ÄùÔºåË°®Á§∫Êüê‰∏ÄÊó∂ÂàªÔºåModelÁöÑÁä∂ÊÄÅÂ∫èÂàóÂåñ‰πãÂêéÁöÑÂÄº„ÄÇËøô‰∏™ÂÄºÊòØÊ†áÂáÜÁöÑJSÂØπË±°„ÄÇ ‰ΩøÁî®getSnapshotÊñπÊ≥ïËé∑ÂèñÂø´ÁÖßÔºö ‰ΩøÁî®applySnapshotÊñπÊ≥ïÂèØ‰ª•Êõ¥Êñ∞ModelÁöÑÁä∂ÊÄÅÔºö Volatile StateÂú®MST‰∏≠ÔºåpropsÂØπÂ∫îÁöÑÁä∂ÊÄÅÈÉΩÊòØÂèØÊåÅ‰πÖÂåñÁöÑÔºå‰πüÂ∞±ÊòØÂèØ‰ª•Â∫èÂàóÂåñ‰∏∫Ê†áÂáÜÁöÑJSONÊï∞ÊçÆ„ÄÇÂπ∂‰∏îÔºåpropsÂØπÂ∫îÁöÑÁä∂ÊÄÅÂøÖÈ°ª‰∏épropsÁöÑÁ±ªÂûãÁõ∏ÂåπÈÖç„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂú®Model‰∏≠Â≠òÂÇ®Êó†ÈúÄÊåÅ‰πÖÂåñÔºåÂπ∂‰∏îÊï∞ÊçÆÁªìÊûÑÊàñÁ±ªÂûãÊó†Ê≥ïÈ¢ÑÁü•ÁöÑÂä®ÊÄÅÊï∞ÊçÆÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏∫Volatile State„ÄÇ Volatile StateÁöÑÂÄº‰πüÊòØObservableÔºå‰ΩÜÊòØÂè™‰ºöÂìçÂ∫îÂºïÁî®ÁöÑÂèòÂåñÔºåÊòØ‰∏Ä‰∏™ÈùûDeep Observable„ÄÇ ÈÄâÊã©Ê≠£Á°ÆÁöÑtypesÁ±ªÂûãtypes.stringÂÆö‰πâ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Á±ªÂûãÂ≠óÊÆµ„ÄÇ types.numberÂÆö‰πâ‰∏Ä‰∏™Êï∞ÂÄºÁ±ªÂûãÂ≠óÊÆµ„ÄÇ types.booleanÂÆö‰πâ‰∏Ä‰∏™Â∏ÉÂ∞îÁ±ªÂûãÂ≠óÊÆµ„ÄÇ types.integerÂÆö‰πâ‰∏Ä‰∏™Êï¥Êï∞Á±ªÂûãÂ≠óÊÆµ„ÄÇÊ≥®ÊÑèÔºåÂç≥‰ΩøÊòØTypeScript‰∏≠‰πüÊ≤°Êúâ‚ÄúÊï¥Êï∞‚ÄùËøô‰∏™Á±ªÂûãÔºåÂú®ÁºñÁ†ÅÊó∂Ôºå‰º†ÂÖ•‰∏Ä‰∏™Â∏¶Â∞èÊï∞ÁöÑÂÄºTypeScript‰πüÊó†Ê≥ïÂèëÁé∞ÂÖ∂‰∏≠ÁöÑÁ±ªÂûãÈîôËØØ„ÄÇÂ¶ÇÊó†ÂøÖË¶ÅÔºåËØ∑‰ΩøÁî®types.number„ÄÇ types.DateÂÆö‰πâ‰∏Ä‰∏™Êó•ÊúüÁ±ªÂûãÂ≠óÊÆµ„ÄÇËøô‰∏™Á±ªÂûãÂ≠òÂÇ®ÁöÑÂÄºÊòØÊ†áÂáÜÁöÑDateÂØπË±°„ÄÇÂú®ËÆæÁΩÆÂÄºÊó∂ÔºåÂèØ‰ª•ÈÄâÊã©‰º†ÂÖ•Êï∞ÂÄºÁ±ªÂûãÁöÑÊó∂Èó¥Êà≥ÊàñËÄÖDateÂØπË±°„ÄÇ types.nullÂÆö‰πâ‰∏Ä‰∏™ÂÄº‰∏∫nullÁöÑÁ±ªÂûãÂ≠óÊÆµ„ÄÇ types.undefinedÂÆö‰πâ‰∏Ä‰∏™ÂÄº‰∏∫undefinedÁöÑÁ±ªÂûãÂ≠óÊÆµ„ÄÇÂ§çÂêàÁ±ªÂûã types.modelÂÆö‰πâ‰∏Ä‰∏™ÂØπË±°Á±ªÂûãÁöÑÂ≠óÊÆµ„ÄÇ types.arrayÂÆö‰πâ‰∏Ä‰∏™Êï∞ÁªÑÁ±ªÂûãÁöÑÂ≠óÊÆµ„ÄÇtypes.array(types.string);types.array(types.model); types.mapÂÆö‰πâ‰∏Ä‰∏™mapÁ±ªÂûãÁöÑÂ≠óÊÆµ„ÄÇËØ•mapÁöÑkeyÈÉΩ‰∏∫Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºåmapÁöÑÂÄºÈÉΩ‰∏∫ÊåáÂÆöÁ±ªÂûã„ÄÇmapÂèØÁî®set„ÄÅ getËøõË°åÂèñËµãÂÄº 1234567891011121314151617181920export enum PopupType &#123; Rule = 'ËßÑÂàô', Award = 'Â•ñÂä±', Buy = 'Ë¥≠‰π∞', Tip = 'ÊèêÁ§∫',&#125;popup: types.map(types.boolean);const showPopup = (type: PopupType) =&gt; &#123; self.popup.set(type: true)&#125;const hidePopup = (type: PopupType) =&gt; &#123; self.popup.set(type, false);&#125;;// ÂÖ∑‰Ωì‰ΩøÁî®&#123;popup.get(PopupType.Rule) &amp;&amp; &lt;PopupRule /&gt;&#125; types.optionalÂèØÈÄâÁ±ªÂûã,Ê†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÂÆö‰πâ‰∏Ä‰∏™Â∏¶ÊúâÈªòËÆ§ÂÄºÁöÑÂèØÈÄâÁ±ªÂûã„ÄÇtypes.optionalÊòØ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÊñπÊ≥ïÊúâ‰∏§‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÊï∞ÊçÆÁöÑÁúüÂÆûÁ±ªÂûãÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÊï∞ÊçÆÁöÑÈªòËÆ§ÂÄº„ÄÇtypes.optional(types.number, 1);‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÈªòËÆ§ÂÄº‰∏∫1ÁöÑÊï∞ÂÄºÁ±ªÂûã„ÄÇÊ≥®ÊÑèÔºåtypes.arrayÊàñËÄÖtypes.mapÂÆö‰πâÁöÑÁ±ªÂûãËá™Â∏¶ÈªòËÆ§ÂÄºÔºàarray‰∏∫[]Ôºåmap‰∏∫{}ÔºâÔºå‰πüÂ∞±ÊòØËØ¥Ôºå‰∏ãÈù¢‰∏§ÁßçÂÆö‰πâÁöÑÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºö 1234567// ‰ΩøÁî®types.optionaltypes.optional(types.array(types.number), []);types.optional(types.map(types.number), &#123;&#125;);// ‰∏ç‰ΩøÁî®types.optionaltypes.array(types.number);types.map(types.number); Â¶ÇÊûúË¶ÅËÆæÁΩÆÁöÑÈªòËÆ§ÂÄº‰∏étypes.arrayÊàñtypes.mapËá™Â∏¶ÁöÑÈªòËÆ§ÂÄºÁõ∏ÂêåÔºåÈÇ£‰πàÂ∞±‰∏çÈúÄË¶Å‰ΩøÁî®types.optional„ÄÇ types.customÂ¶ÇÊûúÊÉ≥ÊéßÂà∂Á±ªÂûãÊõ¥Â∫ïÂ±ÇÁöÑÂ¶ÇÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ„ÄÅÁ±ªÂûãÊ†°È™åÁ≠âÁªÜËäÇÔºåÊàñËÄÖÊ†πÊçÆ‰∏Ä‰∏™classÊàñinterfaceÊù•ÂÆö‰πâÁ±ªÂûãÔºåÂèØ‰ª•‰ΩøÁî®types.customÂÆö‰πâËá™ÂÆö‰πâÁ±ªÂûã„ÄÇ 1234567891011121314151617181920class Decimal &#123; ...&#125;const DecimalPrimitive = types.custom&lt;string, Decimal&gt;(&#123; name: "Decimal", fromSnapshot(value: string) &#123; return new Decimal(value) &#125;, toSnapshot(value: Decimal) &#123; return value.toString() &#125;, isTargetType(value: string | Decimal): boolean &#123; return value instanceof Decimal &#125;, getValidationMessage(value: string): string &#123; if (/^-?\d+\.\d+$/.test(value)) return "" // OK return `'$&#123;value&#125;' doesn't look like a valid decimal number` &#125;&#125;); types.unionÂÆûÈôÖÂºÄÂèë‰∏≠‰πüËÆ∏‰ºöÈÅáÂà∞ËøôÊ†∑ÁöÑÊÉÖÂÜµÔºö‰∏Ä‰∏™ÂÄºÁöÑÁ±ªÂûãÂèØËÉΩÊòØÂ≠óÁ¨¶‰∏≤Ôºå‰πüÂèØËÉΩÊòØÊï∞ÂÄº„ÄÇÈÇ£Êàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®types.unionÂÆö‰πâËÅîÂêàÁ±ªÂûãÔºö types.union(types.number, types.string);ËÅîÂêàÁ±ªÂûãÂèØ‰ª•Êúâ‰ªªÊÑè‰∏™ËÅîÂêàÁöÑÁ±ªÂûã„ÄÇ types.literalÂ≠óÈù¢ÂÄºÁ±ªÂûãÂèØ‰ª•ÈôêÂà∂Â≠òÂÇ®ÁöÑÂÜÖÂÆπ‰∏éÁªôÂÆöÁöÑÂÄº‰∏•Ê†ºÁõ∏Á≠â„ÄÇÊØîÂ¶Ç‰ΩøÁî®types.literal(‚Äòmale‚Äô)ÂÆö‰πâÁöÑÁä∂ÊÄÅÂÄºÂè™ËÉΩ‰∏∫‚Äômale‚Äô„ÄÇÂÆûÈôÖ‰∏äÔºå‰∏äÈù¢ÊèêÂà∞ËøáÁöÑtypes.null‰ª•Âèätypes.undefinedÂ∞±ÊòØÂ≠óÈù¢ÂÄºÁ±ªÂûãÔºö const NullType = types.literal(null);const UndefinedType = types.literal(undefined);Êê≠ÈÖçËÅîÂêàÁ±ªÂûãÔºåÂèØ‰ª•ËøôÊ†∑ÂÆö‰πâ‰∏Ä‰∏™ÊÄßÂà´Á±ªÂûãÔºöconst GenderType = types.union(types.literal(‚Äòmale‚Äô), types.literal(‚Äòfemale‚Äô)); types.enumerationÊûö‰∏æÁ±ªÂûãÂèØ‰ª•Áúã‰ΩúÊòØËÅîÂêàÁ±ªÂûã‰ª•ÂèäÂ≠óÈù¢ÂÄºÁ±ªÂûãÁöÑ‰∏ÄÂ±ÇÂ∞ÅË£ÖÔºåÊØîÂ¶Ç‰∏äÈù¢ÁöÑÊÄßÂà´ÂèØ‰ª•‰ΩøÁî®Êûö‰∏æÁ±ªÂûãÊù•ÂÆö‰πâÔºöconst GenderType = types.enumeration(‚ÄòGender‚Äô, [‚Äòmale‚Äô, ‚Äòfemale‚Äô]);ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂèØÈÄâÁöÑÔºåË°®Á§∫Êûö‰∏æÁ±ªÂûãÁöÑÂêçÁß∞„ÄÇÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰º†ÂÖ•ÁöÑÊòØÂ≠óÈù¢ÂÄºÊï∞ÁªÑ„ÄÇÂú®TypeScriptÁéØÂ¢É‰∏ãÔºåÂèØ‰ª•ËøôÊ†∑Êê≠ÈÖçTypeScriptÊûö‰∏æ‰ΩøÁî®Ôºö 123456enum Gender &#123; male, female&#125;const GenderType = types.enumeration&lt;Gender&gt;('Gender', Object.values(Gender)); types.maybeÂÆö‰πâ‰∏Ä‰∏™ÂèØËÉΩ‰∏∫undefinedÁöÑÂ≠óÊÆµÔºåÂπ∂Ëá™Â∏¶ÈªòËÆ§ÂÄºundefined„ÄÇ 123types.maybe(type)// Á≠âÂêå‰∫étypes.optional(types.union(type, types.literal(undefined)), undefined) types.maybeNull‰∏étypes.maybeÁ±ª‰ººÔºåÂ∞ÜundefinedÊõøÊç¢Êàê‰∫Ünull„ÄÇ 123types.maybe(type)// Á≠âÂêå‰∫étypes.optional(types.union(type, types.literal(null)), null) types.frozenfrozenÊÑè‰∏∫‚ÄúÂÜªÁªìÁöÑ‚ÄùÔºåtypes.frozenÊñπÊ≥ïÁî®Êù•ÂÆö‰πâ‰∏Ä‰∏™immutableÁ±ªÂûãÔºåÂπ∂‰∏îÂ≠òÊîæÁöÑÂÄºÂøÖÈ°ªÊòØÂèØÂ∫èÂàóÂåñÁöÑ„ÄÇ ÂΩìÊï∞ÊçÆÁöÑÁ±ªÂûã‰∏çÁ°ÆÂÆöÊó∂ÔºåÂú®TypeScript‰∏≠ÈÄöÂ∏∏Â∞ÜÂÄºÁöÑÁ±ªÂûãËÆæÁΩÆ‰∏∫anyÔºåËÄåÂú®MST‰∏≠ÔºåÂ∞±ÈúÄË¶Å‰ΩøÁî®types.frozenÂÆö‰πâ„ÄÇ 12awardPosition: types.frozen(),notices: types.array(types.frozen()), Âú®MSTÁúãÊù•Ôºå‰ΩøÁî®types.frozenÂÆö‰πâÁ±ªÂûãÁöÑÁä∂ÊÄÅÂÄºÊòØ‰∏çÂèØÂèòÁöÑÔºåÊâÄ‰ª•‰ºöÂá∫Áé∞ËøôÊ†∑ÁöÑÊÉÖÂÜµÔºö 12model.anyData = &#123;a: 1, b: 2&#125;; // ok, reactivemodel.anyData.b = 3; // not reactive ‰πüÂ∞±ÊòØÂè™ÊúâËÆæÁΩÆ‰∏Ä‰∏™Êñ∞ÁöÑÂÄºÁªôËøô‰∏™Â≠óÊÆµÔºåÁõ∏ÂÖ≥ÁöÑobserverÊâç‰ºöÂìçÂ∫îÁä∂ÊÄÅÁöÑÊõ¥Êñ∞„ÄÇËÄå‰øÆÊîπËøô‰∏™Â≠óÊÆµÂÜÖÈÉ®ÁöÑÊüê‰∏™ÂÄºÔºåÊòØ‰∏ç‰ºöË¢´ÊçïÊçâÂà∞ÁöÑ!! types.lateÊªûÂêéÁ±ªÂûãÊúâÊó∂ÂÄô‰ºöÂá∫Áé∞ËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºåÈúÄË¶Å‰∏Ä‰∏™Model AÔºåÂú®A‰∏≠ÔºåÂ≠òÂú®Á±ªÂûã‰∏∫AÊú¨Ë∫´ÁöÑÂ≠óÊÆµ„ÄÇ Â¶ÇÊûúËøôÊ†∑ÂÜô 1234const A = types .model('A', &#123; a: types.maybe(A), // ‰ΩøÁî®mabeÈÅøÂÖçÊó†ÈôêÂæ™ÁéØ &#125;); ‰ºöÊèêÁ§∫Block-scoped variable ‚ÄòA‚Äô used before its declarationÔºå‰πüÂ∞±ÊòØÂú®AÂÆö‰πâÂÆåÊàê‰πãÂâçÂ∞±ËØïÂõæ‰ΩøÁî®‰ªñÔºåËøôÊ†∑ÊòØ‰∏çË¢´ÂÖÅËÆ∏ÁöÑ Ëøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶Å‰ΩøÁî®types.lateÔºö 1234const A = types .model('A', &#123; a: types.maybe(types.late(() =&gt; A)) &#125;); types.lateÈúÄË¶Å‰º†ÂÖ•‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂú®ÊñπÊ≥ï‰∏≠ËøîÂõûAÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÅøÂºÄ‰∏äÈù¢Êä•ÈîôÁöÑÈóÆÈ¢ò„ÄÇ types.refinementÊèêÁ∫ØÁ±ªÂûã types.refinementÂèØ‰ª•Âú®ÂÖ∂‰ªñÁ±ªÂûãÁöÑÂü∫Á°Ä‰∏äÔºåÊ∑ªÂä†È¢ùÂ§ñÁöÑÁ±ªÂûãÊ†°È™åËßÑÂàô„ÄÇ ÊØîÂ¶ÇÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™emailÂ≠óÊÆµÔºåÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤‰ΩÜÂøÖÈ°ªÊª°Ë∂≥emailÁöÑÊ†áÂáÜÊ†ºÂºèÔºåÂ∞±ÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö 12345const EmailType = types.refinement( 'Email', types.string, (snapshot) =&gt; /^[a-zA-Z_1-9]+@\.[a-z]+/.test(snapshot), // Ê†°È™åÊòØÂê¶Á¨¶ÂêàemailÊ†ºÂºè); ÂÆûÊìçMST (mobx-state-tree)ÔºåÈ°æÂêçÊÄù‰πâÊòØReactÁî®‰∫éÁÆ°ÁêÜÁä∂ÊÄÅÁöÑÁä∂ÊÄÅÊ†ëÁªìÊûÑÔºåÊ†πÊçÆÊØè‰∏™ÁªÑ‰ª∂ÊûÑÂª∫ÂçïÁã¨ÁöÑÁä∂ÊÄÅÊ†ëÁªìÊûÑÔºå‰∏ÄËà¨Âª∫ËÆÆÁä∂ÊÄÅÊ†ëÁªìÊûÑÂíåÊé•Âè£ÊàñËÄÖÊé®ÈÄÅ‰øùÊåÅ‰∏ÄËá¥ÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰æø‰∫éÊõ¥Êñ∞Áª¥Êä§„ÄÇÂú®ËØ∑Ê±ÇÊé•Âè£ÂíåÊé®ÈÄÅÊó∂ÔºåÂè™ÈúÄË¶ÅÊõ¥Êñ∞ÂØπÂ∫îÁöÑstateÔºåÂÖ∂‰ªñÁöÑÈ°µÈù¢Á∫ßÂà´ÁöÑÊ∏≤ÊüìÁ≠â‰∫§Áªô observer ÁõëÂê¨ÁöÑÁªÑ‰ª∂„ÄÇÁÆÄÂçï‰ΩøÁî®ÊµÅÁ®ãÂ¶Ç‰∏ã‚¨áÔ∏è &#123;.line-numbers&#125;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175// 1 - Â∞ÅË£ÖuseContext/*** * * ÂàõÂª∫ÊÄªÁöÑstoreÊñá‰ª∂Â§π * ./store * ./store/index.ts * ./store/room.ts */// 1-1 ./store/index.tsimport &#123; useContent, createContext &#125; from 'react'import &#123; types, Instance, onSnapshot, applySnapshot&#125; from 'mobx-state-tree'import room from './room'const RootModel = types.modal('RootModel', &#123; room: room.Modal, // ËøòÂèØ‰ª•Êâ©Â±ïÁõ∏ÂÖ≥ÂÖ∂‰ªñÁöÑstore // users: users.Modal,&#125;).action(self =&gt; &#123; return &#123;&#125;&#125;)let rootStore;export const initStore = (&#123;roomId, allRoomInfo&#125;) =&gt; &#123; const _rootStore = rootStore ?? RootModal.create(&#123; room: assign(&#123;&#125;, room.initStore, &#123; roomId: roomId, allRoomInfo, &#125;) //users: users.initState, &#125;) if ( typeof window !== 'undefined' ) &#123; window.__store = _rootStore &#125; if (typeof window === 'undefined' ) return _rootStore if (!rootStore) &#123; rootStore = _rootStore // onSnapshot(rootStore, snapshot =&gt; console.log("stage Snapshot: ", snapshot)); &#125; return rootStore;&#125;export type RootInstance = Instance&lt;typeof RootStore&gt;const RootStoreContext = createContext&lt;null || RootInstance&gt;(null);export const Provider = RootStoreContext.provider;export const useStore = () =&gt; &#123; const store = useContext(RootStoreContext); if (store === null) &#123; throw new Error('Store cannot be null, please add a context provider'); &#125; return store;&#125;export const getStore = () =&gt; &#123; return rootStore;&#125;// ÂàõÂª∫ÂÖ∑‰ΩìstoreÔºàroom.tsÔºâÊñá‰ª∂import &#123; flow, types &#125; from 'mobx-state-tree'import &#123; getStore &#125; from './index'const initState = &#123; roomId: 0, allRoomInfo: &#123;&#125;&#125;const PkModel = types.model('PkModel', &#123;&#125;)const AllRoomInfoModel = types.model('AllRoomInfoModel', &#123; _id: '', pk: types.maybeNull(PkModel)&#125;).views(self =&gt; &#123; return &#123;&#125;&#125;).actions(self =&gt; &#123; return &#123;&#125;&#125;)export const Model = types .model(&#123; roomId: types.number, allRoomInfo: AllRoomInfoModel, &#125;) .views(self =&gt; &#123; return &#123; get hasId() =&gt; &#123; return self._id !== '' &#125;, get isRoomOwner() &#123; let userId = getGlobalStore().userId; return userId &amp;&amp; userId === self.roomId; &#125; &#125; &#125;) .volatile(self=&gt; &#123; return &#123;&#125; &#125;) .actions(self =&gt; &#123; const update = flow(function* () &#123; let res; try &#123; res = yield request.api.get('****/api/room/$&#123;self.roomID&#125;') self.allRoomInfo = res.data &#125; &#125;), const setRoomInfo = (data) =&gt; &#123; self.allRoomInfo = data &#125;, const stopLive = () =&gt; &#123; ... &#125; return &#123; update, setRoomInfo, stopLive, &#125; &#125;)export default &#123; initState, Modal,&#125;// 3-ÁªÑ‰ª∂Â∫îÁî®import &#123; observer &#125; from 'mobx-react'import &#123; useStore &#125; from '../store'const BeHeadTip = observer(() =&gt; &#123; const &#123; room &#125; = useStore() const &#123; roomId, allRoomInfo, hasId&#125; = room return ( !hsdId ? 'ÂΩìÂâçÊàøÈó¥Êú™Âú®ÂºÄÊí≠ÂìüÔΩû' : &lt;StyledBeHead id=&#123; roomId &#125;&gt;ÁªÑ‰ª∂ÂÜÖÂÆπ&lt;/StyledBeHead&gt; )&#125;)const StyledBeHead = styled.div` position: relative;`// 4-Êé•Âè£„ÄÅÊé®ÈÄÅÊõ¥Êñ∞store// 4-1 Êé•Âè£const loadInfo = () =&gt; &#123; request.api.get('**/api/info_v2').then(res =&gt; &#123; setRoomInfo(res.data) &#125;)&#125;export default &#123; loadInfo &#125;// 4-2 Êé®ÈÄÅconst handle = (socket) =&gt; &#123; socket.on('room_info', (msg) =&gt; &#123; setRoomInfo(res.data) &#125;)&#125; Â∞ÅË£Ö‰ª•‰∏äÁöÑÂàõÈÄ†storeÔºåÂèØ‰ª•ÁÆÄÂçïÂ∞ÅË£Ö‰∏ãÈÄªËæëÔºåËÆ©Á®ãÂ∫èÂëòÊõ¥‰∏ìÊ≥®‰∫émodelÁöÑÊûÑÂª∫ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778// utils/create-store.tsimport &#123; Instance &#125; from 'mobx-state-tree'import &#123; createContext, useContext &#125; from 'react'const createStore = ( Model: any, initialState: any ) =&gt; &#123; type IStore = Instance&lt;typeof Model&gt; const store = Model.create(initialState) const StoreContext = createContext&lt;null | IStore&gt;(null) if (typeof window !== 'undefined') &#123; if (window['__Act' + Model.name]) &#123; window['__Act' + Model.name + random(100000, 10000)] = store &#125; else &#123; window['__Act' + Model.name] = store &#125; &#125; const useStore = ():IStore =&gt; &#123; const currentStore = useContext(StoreContext) if (currentStore === null ) &#123; throw new Error(`$&#123;Model.name&#125; Store cannot be null, please add a context provider`) &#125; return currentStore; &#125; return &#123; store, Provider: StoreContext.Provider, useStore, &#125;&#125;export default createStore;//ÂÖ∑‰ΩìÊñá‰ª∂‰ΩøÁî®// **/store.tsximport &#123; createStore &#125; from '@utils/create-store'export const Model = types .model('Model', &#123; currentTab: '', list: [], &#125;) .action((self) =&gt; &#123; const setCurrTab = (tab: string) =&gt; &#123; self.currentTab = tab &#125; return &#123; setCurrTab &#125; &#125;)interface IModelSnapshotIn extend SnapshotIn&lt;typeof Model&gt;&#123;&#125;// const initState: IModelSnapshotIn = &#123;&#125;const initState = &#123; currentTab: 'home', list: []&#125;const &#123; store, Provider, useStore &#125; = createStore(Model, initState)export &#123; store, Provider, useStore &#125;// È°µÈù¢ÂºïÁî®store// **/index.tsximport &#123; useStore &#125; from './store'const &#123; currentTab, setCurrTab &#125; = useStore() ÊÄªÁªìÂú®Êï¥‰∏™Á®ãÂ∫èÊâßË°å‰∏≠ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊéßÂà∂Êï∞ÊçÆÁä∂ÊÄÅÁöÑÊõ¥Êñ∞Ôºå‰ª•ÂèäÂú®MST‰∏≠Â§ÑÁêÜÂ•ΩÊï∞ÊçÆÁöÑÈÄªËæëÔºåÊö¥Èú≤Âá∫Áõ¥Êé•ÂèØ‰ª•‰ΩøÁî®ÁöÑÊñπÊ≥ï„ÄÇ‰æãÂ¶Ç hasId, MST‰∏≠ÁöÑ views Áõ∏ÂΩì‰∫é Vue ‰∏≠ÁöÑ ËÆ°ÁÆóÂ±ûÊÄßÔºåÊ†πÊçÆ‰æùËµñÂÄºÁöÑÂèòÂåñÔºåËÆ°ÁÆóÊúÄÊñ∞ÁöÑÁªìÊûú„ÄÇÊï∞ÊçÆÁöÑÊõ¥Êñ∞Âè™ËÉΩÂú® actions ‰∏≠Êö¥Èú≤ÁöÑÊñπÊ≥ï‰∏≠ÂéªÂÆûÁé∞„ÄÇÂú®Èù¢ÂØπÂÖ∑ÊúâÈùûÂ∏∏Â§çÊùÇÁä∂ÊÄÅÁöÑÂ§ßÂûãÈ°πÁõÆÊó∂ÔºåÂèØ‰ª•ÊèêÈ´òÂºÄÂèëÊïàÁéá„ÄÇ]]></content>
      <categories>
        <category>ÈªòËÆ§</category>
      </categories>
      <tags>
        <tag>‰πà‰πàÁõ¥Êí≠</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰πà‰πàÁõ¥Êí≠-ÊÄªÁªì]]></title>
    <url>%2F2021%2F06%2F07%2Fsummary-meme%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄÁÆÄÂçïËÆ∞ÂΩï‰∏Ä‰∏ãÂú®‰πà‰πàÁõ¥Êí≠ÈÅáÂà∞ÁöÑÈóÆÈ¢ò‰ª•ÂèäËß£ÂÜ≥ÂäûÊ≥ïÔºåÈ°πÁõÆÊäÄÊúØÊ†àË∑®Â∫¶ÊØîËæÉÂ§ßÔºåÊúâ 6-7 Âπ¥Ââç jquery È°πÁõÆÔºå‰πüÊúâ React + MSTÔºàmobx state treeÔºâ + SSR È°πÁõÆÔºåËøòÊúâÁ∫Ø React È°πÁõÆÔºåÈÅáÂà∞ÁöÑÈóÆÈ¢òÊØîËæÉÂπøÊ≥õÔºåËÆ∞ÂΩï‰∏Ä‰∏ãÂ∏∏ËßÅÁöÑÈóÆÈ¢òÔºåÂ∏ÆÂä©Â≠¶‰π†„ÄÇ React ÁöÑÊõ¥Êñ∞Êú∫Âà∂Ref ÁöÑ‰∏Ä‰∫õÁî®Ê≥ïÂèóÊéßÁªÑÂª∫ÂíåÈùûÂèóÊéßÁªÑ‰ª∂ÂëΩÂêçÁ©∫Èó¥Canvas ÂÆûÁé∞ÂºπÂπïÁªÑ‰ª∂ ÂÆûÁé∞ÂºπÂπïÁöÑÊ†∏ÂøÉÊòØ Canvas ÁöÑ measureText()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂèØ‰ª•ËÆ°ÁÆóÂá∫ÁîªÂ∏É‰∏äÂ≠ó‰ΩìÁöÑÂÆΩÂ∫¶ÔºåÁî±‰∫éÂºπÂπïÁöÑÂÜÖÂÆπ‰∏ÄËà¨ÊòØÁî± Áõ∏ÂØπÂõ∫ÂÆöÁöÑÂõæÁâáÂä†Êú™Áü•ÈïøÂ∫¶ÁöÑÊñáÊ°àÊûÑÊàêÔºåÊ∏≤ÊüìÂ§çÊùÇÁöÑÂçïÊù°ÂºπÂπïÈ¶ñÂÖàÈúÄË¶ÅËß£ÂÜ≥ÂºπÂπïÊÄªÈïøÂ∫¶ÔºåÊãøÂà∞‰∫ÜÊÄªÈïøÂ∫¶ÔºåÈÇ£‰πà‰∏çÁÆ°ÊòØÊÄª‰ΩìÁöÑÂºπÂπïËÉåÊôØËøòÊòØÂõæÁâáÊñáÊ°àÁöÑÊú™Áü•ÈÉΩËÉΩ ÂáÜÁ°ÆÊó†ËØØÁöÑÊ∏≤ÊüìÂá∫Êù•ÔºåReact ÂèØ‰ª•ÊääÂäüËÉΩÂÅöÊàê‰∏Ä‰∏™ÁªÑ‰ª∂Ôºå‰∏ÄÊ¨°ÂÆåÊàêÔºåÂ§öÊ¨°Â§çÁî®ÔºåËøôÈáåÊàëÁÆÄÂçïÂàó‰∏æ‰∏§ÁßçÂºπÂπïÁöÑÂÆûÁé∞Ôºå‰∏ÄÁßçÊòØÊôÆÈÄöÁöÑÂºπÂπïÔºåÊûÑÊàêÊòØËÉåÊôØËâ≤ + Áî®Êà∑Â§¥ÂÉè + Áõ∏ÂØπÂõ∫ÂÆöÁöÑÊñáÊ°àÔºàÊØîÂ¶ÇÊäΩÂ•ñÂºπÂπïÔºåÂ§¥ÂÉè + XXX Âú® VVV Ê¥ªÂä®‰∏≠ ÊäΩ‰∏≠‰∫Ü AAAA x 99 Ê¨°ÔºâÔºå ‰∏ÄÁßçÊòØÁâπÊÆäÂºπÂπïÔºåÊØîÂ¶ÇÊò•ËäÇÊúüÈó¥‰∫ßÂìÅ‰∏äÁ∫ø‰∫ÜÁ•àÁ¶èÈÄÅÁ§ºÈúÄÊ±ÇÔºåÁî®Êà∑ÂèëÈÄÅÁ•ùÁ¶èËØ≠ÔºåÁÑ∂ÂêéÁ´ãÂç≥Âú®Â±èÂπï‰∏äÂºπÂπïÂΩ¢ÂºèÂá∫Áé∞ÔºåÊØèÊù°Á•ùÁ¶èËØ≠ÂºπÂπïÁöÑËÉåÊôØÊ†∑Âºè‰∏çÂêåÔºåüà∂Ô∏è Êñ∞Êò•ÂØπËÅî„ÄÅÁáïÂ≠êÈ´òÈ£û„ÄÅÊü≥Ê†ëÁ∫∏Êù°Á≠âÔºåÂàáÊØè‰∏™Áî®Êà∑ËæìÂÖ•ÁöÑÁ•ùÁ¶èËØ≠ÈïøÂ∫¶ÂèñÂÜ≥‰∫éÁî®Êà∑Ëá™Â∑±ÔºåÊúâÊó∂ÂÄô‰∏ÄÊù°ÂºπÂπïÂ∞±Âá†‰∏™Â≠óÔºåÊúâÁöÑÊúâÂá†ÂçÅÂ≠óÔºåÁü•ÈÅìÊØèÊù°ÂºπÂπïÁöÑÈïøÂ∫¶Êúâ‰∏§‰∏™Áî®Â§ÑÔºå‰∏ÄÊòØÂºπÂπïÁöÑËÉåÊôØ‰ΩçÁΩÆÊ∏≤ÊüìÔºåËÄåÊòØÂºπÂπïÈááÁî®ÂõõË°åÂπ∂Â≠òÁöÑÂΩ¢ÂºèÔºåÈÇ£‰πàÂºπÂπïÊèíÂÖ•Âì™‰∏ÄË°å‰πüÂèñÂÜ≥‰∫éÂì™‰∏ÄË°åÁöÑÂºπÂπïÁ®ÄÁñèÁ®ãÂ∫¶ÔºåËØù‰∏çÂ§öÂ∞ëÔºå‰∏äÂõæ‰∏ä‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477// common ÂºπÂπïÁöÑÂºïÁî®Êñá‰ª∂export function getDevicePixelRatio(): number &#123; // Fix fake window.devicePixelRatio on mobile Firefox const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') &gt; -1 if (window.devicePixelRatio !== undefined &amp;&amp; !isFirefox) &#123; return window.devicePixelRatio &#125; else if (window.matchMedia) &#123; const mediaQuery = (v: string, ov: string) =&gt; &#123; return ( '(-webkit-min-device-pixel-ratio: ' + v + '),' + '(min--moz-device-pixel-ratio: ' + v + '),' + '(-o-min-device-pixel-ratio: ' + ov + '),' + '(min-resolution: ' + v + 'dppx)' ) &#125; if (window.matchMedia(mediaQuery('1.5', '3/2')).matches) &#123; return 1.5 &#125; if (window.matchMedia(mediaQuery('2', '2/1')).matches) &#123; return 2 &#125; if (window.matchMedia(mediaQuery('0.75', '3/4')).matches) &#123; return 0.7 &#125; &#125; return 1&#125;// barrage-spring.tsximport &#123; cancelAnimation &#125; from '@utils/media'import &#123; getDevicePixelRatio &#125; from '@core/client'import &#123; max &#125; from '@utils/tool' const roundRect = function (ctx, left, top, width, height, r) &#123; const pi = Math.PI; ctx.beginPath(); ctx.arc(left + r, top + r, r, -pi, -pi / 2); ctx.arc(left + width - r, top + r, r, -pi / 2, 0); ctx.arc(left + width - r, top + height - r, r, 0, pi / 2); ctx.arc(left + r, top + height - r, r, pi / 2, pi); ctx.closePath(); &#125; const circleImg = function (ctx, img, l, t, r)&#123; const d = 2 * r ctx.save(); ctx.beginPath() ctx.arc(l + r + 30, t + r - 3, r, 0, 2 * Math.PI) ctx.closePath() ctx.clip(); ctx.drawImage(img, l + 30, t - 3, d, d); ctx.restore(); &#125; const leftBg = function (ctx, leftImg, left, top, width, height) &#123; ctx.save() ctx.drawImage(leftImg, left, top, width, height) // height 94 ctx.restore(); &#125; const middleBg = function (ctx, img, left, top, width, height) &#123; ctx.save() ctx.drawImage(img, left+112, top, width, height) ctx.restore(); &#125; const rightBg = function (ctx, img, left, top, width, height) &#123; ctx.save() ctx.drawImage(img, left, top, width, height) ctx.restore(); &#125; // const preImg = (url, callback, options) =&gt; &#123; // const &#123;x, y, w, h&#125; = options // const img = new Image() // img.src = testLeft || url // if (img.complete) &#123; // callback.call(img, x, y, w, h) // return // &#125; // img.onload = () =&gt; &#123; // callback.call(img, x, y, w, h) // &#125; // &#125; const getPxRatio = () =&gt; &#123; const c = document.createElement("canvas"), ctx = c.getContext("2d"), dpr = getDevicePixelRatio() || 1, bsr = ctx['webkitBackingStorePixelRatio'] || ctx['mozBackingStorePixelRatio'] || ctx['msBackingStorePixelRatio'] || ctx['oBackingStorePixelRatio'] || ctx['backingStorePixelRatio'] || 1; return dpr / bsr; &#125; export class Barrage &#123; constructor(option) &#123; const &#123; canvasId, onPalyFinish &#125; = option const pixelRatio = max([getPxRatio(), 2]) this.pxRatio = pixelRatio; // Áº©ÊîæÂÄçÊï∞Ôºå1‰ºöÁ≥ä this.canvas = document.getElementById(canvasId); this.canvas.width = this.w = this.canvas.width * pixelRatio; this.canvas.height = this.h = this.canvas.height * pixelRatio; this.drawing = true this.finishCount = 0 this.ctx = this.canvas.getContext('2d'); this.style = &#123; // ÂºπÂπïÊ†∑Âºè height: 47 * pixelRatio, // ÂºπÂπïÈ´òÂ∫¶ // ÊóßÁâàÈ´òÂ∫¶29 imgBgWidth: 56 * pixelRatio, // ËÉåÊôØÂõæÁâáÁöÑÂÆΩÂ∫¶(Â∑¶„ÄÅÂè≥) fontSize: 12 * pixelRatio, // Â≠ó‰ΩìÂ§ßÂ∞è marginBottom: 20 * pixelRatio, // ÂºπÂπï margin-bottom paddingX: 15 * pixelRatio, // ÂºπÂπï padding x avatarWidth: 20 * pixelRatio, // Â§¥ÂÉèÂÆΩÂ∫¶ ellipsisMaxWidth: 100 * pixelRatio, offsetRight: 56 * pixelRatio // Âè≥ËÉåÊôØÂÅèÁßªÈáè &#125; this.ctx.font = this.style.fontSize + 'px PingFangSC-Regular'; this.onPalyFinish = onPalyFinish this.barrageList = []; // ÂºπÂπïÂàóË°® this.rowStatusList = []; // ËÆ∞ÂΩïÊØèË°åÊòØÂê¶ÂèØÊèíÂÖ•ÔºåÈò≤Ê≠¢ÈáçÂè†„ÄÇ Ë°åÂè∑‰∏∫ÂèØÊèíÂÖ• false‰∏∫‰∏çÂèØÊèíÂÖ• let rowLength = Math.floor(this.h / (this.style.height + this.style.marginBottom)); for (var i = 0; i &lt; rowLength; i++) &#123; this.rowStatusList.push(i) &#125; &#125; shoot(value) &#123; const &#123; height, avatarWidth, fontSize, marginBottom, paddingX, ellipsisMaxWidth &#125; = this.style; const &#123; img, sortArr, t1, t2, t3, t4 &#125; = value; const ellipsisT2 = this.getEllipsisText(t2) let row = this.getRow(); let color = '#7C0102'; let offset = this.pxRatio; let offsetNew = 30 let w_0 = paddingX; // Â§¥ÂÉèÂºÄÂßã‰ΩçÁΩÆ let w_1 = w_0 + avatarWidth + 8 + offsetNew + 10; // t1ÊñáÂ≠óÂºÄÂßã‰ΩçÁΩÆ let w_2 = w_1 + Math.ceil(this.ctx.measureText(t1).width) + 8; // t2ÊñáÂ≠óÂºÄÂßã‰ΩçÁΩÆ let w_3 = w_2 + Math.ceil(this.ctx.measureText(ellipsisT2).width) + 8; // t3ÊñáÂ≠óÂºÄÂßã‰ΩçÁΩÆ let w_4 = w_3 + Math.ceil(this.ctx.measureText(t3).width) + 8; // t4ÊñáÂ≠óÂºÄÂßã‰ΩçÁΩÆ let w_5 = w_4 + Math.ceil(this.ctx.measureText(t4).width) + paddingX + 8; // ÂºπÂπïÊÄªÈïøÂ∫¶ let barrage = &#123; color, row, offset, top: row * (height + marginBottom), left: this.w, width: [w_0, w_1, w_2, w_3, w_4, w_5], value, ellipsisT2, &#125; this.barrageList.push(barrage); &#125; draw() &#123; if (!this.drawing) &#123; return &#125; if (!!this.barrageList.length) &#123; this.ctx.clearRect(0, 0, this.w, this.h); for (let i = 0, barrage; barrage = this.barrageList[i]; i++) &#123; // ÂºπÂπïÊªöÂá∫Â±èÂπïÔºå‰ªéÊï∞ÁªÑ‰∏≠ÁßªÈô§ if (barrage.left + barrage.width[5] &lt;= -25) &#123; this.barrageList.splice(i, 1); this.finishCount ++; i--; continue; &#125; // ÂºπÂπïÂÆåÂÖ®ÊªöÂÖ•Â±èÂπïÔºåÂΩìÂâçË°åÂèØÊèíÂÖ• if (!barrage.rowFlag) &#123; if ((barrage.left + barrage.width[5]) &lt; this.w - 45) &#123; // this.rowStatusList[barrage.row] = barrage.row; barrage.rowFlag = true; &#125; &#125; barrage.left -= barrage.offset; this.drawBarrage(barrage); &#125; &#125; this.reqAnimeId = requestAnimationFrame(this.draw.bind(this)); &#125; restartDraw() &#123; this.drawing = true; this.draw() &#125; clearDraw() &#123; this.drawing = false cancelAnimation(this.reqAnimeId) &#125; drawBarrage(barrage) &#123; const &#123; height, avatarWidth, fontSize, ellipsisMaxWidth &#125; = this.style; const &#123; value: &#123; img, sortArr, t1, t3, t4,&#125;, ellipsisT2, color, row, left, top, offset, width, &#125; = barrage; // ÁîªÊ°ÜÂ≠ê // roundRect(this.ctx, left, top, width[5], height, height / 2, avatarWidth) // this.ctx.fillStyle = 'rgba(0,0,0,0.45)'; // this.ctx.fill(); // -- ÁîªÂ∑¶ËæπËÉåÊôØ leftBg(this.ctx, sortArr[0], left , top, this.style.imgBgWidth, height) middleBg(this.ctx, sortArr[1], left , top, width[2]-width[1], height) rightBg(this.ctx, sortArr[2], left + width[5]- this.style.offsetRight , top, this.style.imgBgWidth, height ) // left, top, width[1], height // ÁîªÂ§¥ÂÉè // circleImg(this.ctx, img, left + width[0], top + (height - avatarWidth) / 2, avatarWidth/2) circleImg(this.ctx, sortArr[3], left + width[0], top + (height - avatarWidth) / 2, avatarWidth/2) // Êñ∞ÁöÑtopÂÅèÁßªÈáè 15 const offsetYNew = -4 const paddingTop = (height - fontSize) / 2 - 2 this.ctx.fillStyle = color; this.ctx.fillText(t1, left + width[1], top + fontSize + paddingTop + offsetYNew); this.ctx.fillStyle = '#CFFCFC'; this.ctx.fillText(ellipsisT2, left + width[2], top + fontSize + paddingTop); this.ctx.fillStyle = color; this.ctx.fillText(t3, left + width[3], top + fontSize + paddingTop); this.ctx.fillStyle = '#FFFF33'; this.ctx.fillText(t4, left + width[4], top + fontSize + paddingTop); &#125; getRow() &#123; let emptyRowList = this.rowStatusList.filter(d =&gt; /\d/.test(d)); // ÊâæÂá∫ÂèØÊèíÂÖ•Ë°å let row = emptyRowList[Math.floor(Math.random() * emptyRowList.length)]; // ÈöèÊú∫ÈÄâ‰∏ÄË°å this.rowStatusList[row] = false; return row; &#125; haveEmptyRow() &#123; let emptyRowList = this.rowStatusList.filter(d =&gt; /\d/.test(d)); // ÊâæÂá∫ÂèØÊèíÂÖ•Ë°å return !!emptyRowList.length; &#125; getEllipsisText(text) &#123; const &#123; ellipsisMaxWidth: maxWidth &#125; = this.style if (this.ctx.measureText(text).width &lt;= maxWidth) &#123; return text &#125; const textArr = text.split('');//ÂΩìÂâçÂâ©‰ΩôÁöÑÂ≠óÁ¨¶‰∏≤ for (let m = 1; m &lt;= textArr.length; m++) &#123; if (this.ctx.measureText(textArr.slice(0, m)).width &gt; maxWidth) &#123; return textArr.slice(0, m).join('') + '...' &#125; &#125; &#125; &#125; // danmu.tsx ÂºπÂπïÁªÑ‰ª∂ÔºåÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî® &lt;danmu /&gt; import React, &#123; useEffect, useRef &#125; from 'react' import styled from 'styled-components' import &#123; defAvatarNew &#125; from '@constants' import request from '@core/request' // import &#123; Barrage &#125; from '@utils/barrage' import &#123; Barrage &#125; from '@pages/act_spring_festival/barrage-spring' import &#123; choice &#125; from '@utils/tool' import &#123; actions &#125; from './config' export default (props: any) =&gt; &#123; const storeRef = useRef&lt;any&gt;(&#123; timer: 0, finishCount: 0, barrage: null, &#125;) useEffect(() =&gt; &#123; fetchData() &#125;, []) useEffect(() =&gt; &#123; const barrage = new Barrage(&#123; canvasId: 'act-spring-barrage' &#125;) barrage.draw() storeRef.current.barrage = barrage return () =&gt; &#123; barrage.clearDraw() clearTimeout(storeRef.current.timer) &#125; &#125;, []) const fetchData = () =&gt; &#123; request(actions.wishList).then((resData) =&gt; &#123; const items = resData || [] if (items &amp;&amp; items[0]) &#123; shootBarrage(items[0]) setTimeout(() =&gt; shootBarrage(items[1]), 500) startBarrage(2, items) &#125; &#125;) &#125; const startBarrage = (activeIndex: number, source: any[]) =&gt; &#123; const &#123; timer, barrage &#125; = storeRef.current clearTimeout(timer) storeRef.current.timer = setTimeout(() =&gt; &#123; let flag = false if (source[activeIndex]) &#123; flag = shootBarrage(source[activeIndex]) &#125; if (barrage.finishCount &amp;&amp; barrage.finishCount &gt;= source.length - 3) &#123; barrage.finishCount = 0 fetchData() &#125; startBarrage(!flag ? activeIndex : activeIndex + 1, source) &#125;, choice([1000, 1800])) &#125; const shootBarrage = (currentItem: any) =&gt; &#123; const barrage = storeRef.current.barrage if (!barrage.haveEmptyRow() || !currentItem) &#123; return false &#125; const &#123; pic = defAvatarNew, wish = '' &#125; = currentItem const data = &#123; t1: wish, t2: '', t3: '', t4: '', &#125; // --‰∏ÄËµ∑ÂàùÂßãÂåñËÉåÊôØÂõæ const imgConf1 = [ 'https://img.sumeme.com/28/4/1612232722204.png', 'https://img.sumeme.com/8/0/1612232705544.png', 'https://img.sumeme.com/14/6/1612232681614.png', pic, ] const imgConf2 = [ 'https://img.sumeme.com/32/0/1612232775520.png', 'https://img.sumeme.com/32/0/1612232762208.png', 'https://img.sumeme.com/54/6/1612232743414.png', pic, ] const imgConf3 = [ 'https://img.sumeme.com/27/3/1612232818395.png', 'https://img.sumeme.com/48/0/1612232804656.png', 'https://img.sumeme.com/32/0/1612232789280.png', pic, ] // const imgConf4 = [ // 'https://img.sumeme.com/25/1/1612232866777.png', // 'https://img.sumeme.com/32/0/1612232846432.png', // 'https://img.sumeme.com/33/1/1612232833441.png', // pic, // ] const imgConfAll = [imgConf1, imgConf2, imgConf3] const imgArray = choice(imgConfAll) const receiveArray: any[] = [] // let $myContent = document.getElementById("myContent"); // let [imgW, imgH] = [300, 300]; // let Canvas = document.createElement('canvas'); // let ctx = Canvas.getContext("2d"); // let scaleBy = 2; // Canvas.width = imgW * scaleBy; // Canvas.height = imgH * scaleBy; imgArray.forEach((e: any, idx: number) =&gt; &#123; const img = new Image() img.src = e img.setAttribute('crossOrigin', 'Anonymous') img.addEventListener('load', () =&gt; &#123; // ctx.drawImage(img, 0, 0, imgW * scaleBy, imgH * scaleBy); img.id = 'img' + idx receiveArray.push(img) // Â∞ÜÁªòÂà∂ÁöÑimgËäÇÁÇπÊî∂ÈõÜÂà∞Êï∞ÁªÑÈáåÔºåËøôÈáåÁöÑÈ°∫Â∫èÂèØËÉΩÂíåimgArrayÁöÑÈ°∫Â∫è‰∏ç‰∏ÄÊ†∑ if (receiveArray.length === imgArray.length) &#123; // ÊâÄÊúâÂõæÁâáloadÂπ∂ÁªòÂà∂ÂÆåÊàê const sortArr = new Array() receiveArray.forEach((ex) =&gt; &#123; // Â∞ÜÊâÄÊúâÁªòÂà∂ÂõæÁâáÊåâimgArrayÈ°∫Â∫èÊéíÂ∫è sortArr[ex.id.split('img')[1]] = ex &#125;) barrage.shoot(&#123; sortArr, ...data, &#125;) // sortArr.forEach(ex2 =&gt; &#123; // $myContent.appendChild(ex2) // &#125;) &#125; &#125;) &#125;) // const img = new Image() // img.setAttribute('crossOrigin', 'anonymous') // const data = &#123; // t1: wish, // t2: '', // t3: '', // t4: '', // &#125; // img.onload = () =&gt; &#123; // barrage.shoot(&#123; // img, // ...data, // &#125;) // &#125; // img.onerror = () =&gt; &#123; // barrage.finishCount++ // &#125; // let pic1 = 'https://img.sumeme.com/27/3/1611904142299.png' // console.log('---', pic) // img.src = pic1 return true &#125; return ( &lt;StyledBarrage&gt; &lt;canvas id="act-spring-barrage" height="250px" /&gt; &lt;/StyledBarrage&gt; ) &#125; export const StyledBarrage = styled.div` position: absolute; bottom: -120px; width: 750px; height: 550px; /* z-index: 99999; */ canvas &#123; width: 100%; height: 100%; &#125; ` ÊäΩÁ©∫ÊääËøô‰∏™ÂºπÂπïÂÜô‰∏™ demo ÔºåÂÖâÂπ≤Â∑¥Â∑¥ÁöÑÊñáÂ≠óÊòØÂú®Èöæ‰ª•ÁêÜËß£Âïä Node ÁöÑÁâàÊú¨ÊéßÂà∂ Ëøô‰∏™‰∏ÄËà¨‰ΩøÁî® nvm ÊàñËÄÖ n ÂëΩ‰ª§ ÁßªÂä®Á´ØÂíå H5 ÁöÑÊ°•Êé•ÈÄö‰ø° ‰ΩøÁî® jsBridge ËøõË°å H5 ÂíåÁßªÂä®Á´ØÁöÑÈÄö‰ø°„ÄÇÂÖ∑‰ΩìÂêéÈù¢Êï¥ÁêÜ‰∏Ä‰∏ã„ÄÇ Áõ¥Êí≠Á§ºÁâ©ÁöÑÂä®ÁîªÊí≠ÊîæÈòüÂàóÂÆûÁé∞Video Êí≠Êîæ mp4 ÁöÑÊ≥®ÊÑèÁÇπ react ‰∏≠Êí≠Êîæ mp4 Ê†ºÂºèÔºå‰ºöÊúâ‰∏Ä‰∫õ iOS Êú∫ÂûãÁöÑÂÖºÂÆπÈóÆÈ¢òÔºå‰∏çÂ¶Ç iOS ‰∏çËÉΩËá™Âä®Êí≠ÊîæÁ≠â 12345678910111213141516171819202122//React‰∏≠Êí≠Êîæmp4ÁöÑÊÉÖÂÜµÔºå‰∏ÄÂ∏ÆÊÉÖÂÜµ‰∏ãÊí≠ÊîæGIFÊàñËÄÖSVGA// ‰ª£Á†ÅÂ¶Ç‰∏ã&lt;div className="video-box" dangerouslySetInnerHTML=&#123;&#123; __html: ` &lt;video id="entry-video" poster="https://img.sumeme.com/16/0/1624613307152.png" autoPlay x-webkit-airplay="allow" x5-video-player-type="h5" webkit-playsinline playsinline muted style="object-fit:fill" &gt; &lt;source src="https://img.sumeme.com/swf/Render6-16.mp4" type="video/mp4"&gt; &lt;/video&gt; `, &#125;&#125;/&gt; posterÂ±ûÊÄßÂèØ‰ª•Âú®ËßÜÈ¢ëÊú™Âä†ËΩΩÂÆåÊàêÂâçÂ±ïÁ§∫‰∏ÄÂº†Â∞ÅÈù¢ÂõæÁâáÔºåËßÜÈ¢ëÂä†ËΩΩÂêéËá™Âä®Êí≠ÊîæËßÜÈ¢ë„ÄÇhooks Â∞ÅË£ÖÂÖ∂ÂÆûÁõ∏ÊØîËá™Â∑±Â∞ÅË£ÖÊúâÈíàÂØπÊÄßÁöÑ hooks Â§ñÔºåÈòøÈáåÁöÑ ahooks3.0 ‰πüÂèØ‰ª•‰ΩøÁî®ÔºåÂäüËÉΩËøòÊòØÂÄºÂæóÊúüÂæÖÁöÑReact ‰∏≠ÊåÇËΩΩÊªëÂä®ÂáΩÊï∞ÊäΩÂ•ñ‰∏Ä‰∫õ CSS12345678910111213141516171819202122232425262728-webkit-tap-highlight-color: rgba(0,0,0,0)// Ëß£ÂÜ≥iOSÂíåiPadËÆæÂ§á‰∏äÁÇπÂáªÁä∂ÊÄÅÂá∫Áé∞ÈªòËÆ§ËìùËâ≤È´ò‰∫ÆÔºåÂæàÂ∏∏ËßÅ&amp; + &amp; &#123;&#125;ÂèñÂ∑ßÔºåÈÄâÊã©ÈùûÁ¨¨‰∏Ä‰∏™ÂºÄÂßãÁöÑÊâÄÊúâÂêåÁ±ªÂûãÂÖÉÁ¥†font-size: 0;Áà∂ÂÖÉÁ¥†ËÆæÁΩÆÊîπÂ±ûÊÄßÂèØ‰ª•ÊúâÊïàËß£ÂÜ≥Ë°åÂÜÖÂÖÉÁ¥†ÁöÑÈªòËÆ§Èó¥Ë∑ùÔºå‰æãÂ¶Çspanpadding-bottom: 6%;ol li:before &#123; content:counter(sectioncounter) &quot;„ÄÅ&quot;; counter-increment:sectioncounter;&#125;//ÊúâÂ∫èÂÖÉÁ¥†ÁöÑÁ¨¶Âè∑ÊõøÊç¢Â±ïÁ§∫.gift-show-area[gift-id=&apos;7777&apos;] &#123;&#125;//ÂèØ‰ª•ËøôÊ†∑Êü•ÊâæÂÖÉÁ¥†background-image: linear-gradient(135deg, red, blue);background-clip: text;-webkit-background-clip: text;color: transparent;// ÊñáÂ≠óÈ¢úËâ≤Ê∏êÂèò::-webkit-input-placeholder// placeholderÊ†∑ÂºèÊ¨°‰øÆÊîπ Â§çÊùÇË°®Ê†ºÈ°πÂêàÂπ∂rowSpan colspan Ë°åÂàóÂêàÂπ∂ ÊåâÈúÄÂä†ËΩΩ‰ºòÂåñÈ°πÁõÆÂ∑≤ÁªèÂæàÂ∫ûÂ§ßÁöÑÊÉÖÂÜµ‰∏ãÔºåËøòË¶ÅËÄÉËôëhybridÁöÑ‰ΩìÈ™åÊÉÖÂÜµÔºåÈúÄË¶ÅËøõË°åÈ°πÁõÆ‰ºòÂåñÔºåÊåâÈúÄÂä†ËΩΩÊØîËæÉÈÄÇÂêàÊüê‰∫õÂú∫ÊôØ‰∏ãÔºåËøôÈáåÈááÁî®„Ääreact-intersection-observer„Äã‰∏≠ÁöÑhooks useInView Êù•Âà§Êñ≠ÂÖÉÁ¥†ÊòØÂê¶Âú®ÂèØËßÜÁ™óÂè£ÂÜÖ„ÄÇËøõËÄåÂà§Êñ≠ÊòØÂê¶Ê∏≤ÊüìËØ•ÂÖÉÁ¥†„ÄÇ 123456789101112131415161718192021222324252627282930313233// ËøôÈáåÂ∞ÅË£Ö‰∏Ä‰∏™ÂõæÁâáÊåâÈúÄÂä†ËΩΩÁöÑÂÖ¨Áî®ÁªÑÂª∫import React from 'react'import &#123; useInView, IntersectionOptions &#125; from 'react-intersection-observer'import styled from 'styled-components' const StyledImg = styled.div` width: 100%; height: 100%;`type Props = IntersectionOptions &amp; &#123; src: string title?: string className?: string children?: any&#125;const LazyImg = (props: Props) =&gt; &#123; const &#123; src, title, className, children, ...configProps &#125; = props const [res, inView] = useInView(&#123; triggerOnce: true, rootMargin: '20px 0', ...configProps, &#125;) return ( &lt;StyledImg ref=&#123;ref&#125; className=&#123;className&#125; title=&#123;title&#125;&gt; &#123;children&#125; &#123;inView &amp;&amp; &lt;img src=&#123;src&#125;/&gt;&#125; &lt;/StyledImg&gt; )&#125;export default LazyImg ModalÂ∞ÅË£Ö‰∏çËÆ∫ÊòØPCÈ°µÈù¢ÔºåËøòÊòØhybridÂéüÁîüÈ°µÈù¢ÔºåÈÉΩÈúÄË¶ÅÂ§ßÈáèÂΩ¢ÂΩ¢Ëâ≤Ëâ≤ÁöÑÂºπÁ™óÊù•ÈÄöÁü•Áî®Êà∑Â§ÑÁêÜ‰∏öÂä°ÈÄªËæëÔºåÂ∞ÅË£ÖÂá†ÁßçÂ∏∏ËßÅÁöÑModal CSS ÁÇπ‰πùÂõæÊúÄËøëÂπ¥‰∏≠ÂíåÂë®Âπ¥Â∫ÜÂºÄÂßãÔºåÈì∫Â§©ÁõñÂú∞ÁöÑÊ¥ªÂä®„ÄÇUI ËÆæËÆ°ÁöÑÈ£éÊ†ºÂíå‰∏ÄÂæÄ‰∏çÂ§™‰∏ÄÊ†∑Ôºå‰∏æ‰∏Ä‰∏™Ê†óÂ≠êÔºö Âú®ÊäïÁ•®È°µÈù¢‰∏≠ÔºåÊØè‰∏™Ë¢´ÊäïÁ•®ÁöÑ‰∏ªÊí≠ÈÉΩÊòØÂçïÁã¨ÁöÑ‰∏ÄÂº†ÁâπÊÆäËÉåÊôØÂõæÂåÖË£πÔºåËØ•ÂÆπÂô®ÂèØËÉΩ‰ºöÊ†πÊçÆË¢´ÊäïÁ•®‰∫∫ÁöÑ‰ø°ÊÅØÈïøÁü≠‰∏ç‰∏ÄÔºå‰∏çËßÑÂàôËÉåÊôØËæπÊ°ÜÂõæ‰πüË¶ÅËá™Âä®ÈÄÇÂ∫î„ÄÇÁ±ª‰ººËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºå‰∏ÄËà¨ÊúâËøô‰πàÂá†ÁßçÊñπÊ≥ïÂÆûÁé∞Ôºö ‰∏âÊÆµÂõæÈáçÂ§çÂ∞±ÊòØÊää‰∏çËßÑÂàôÁöÑËÉåÊôØÂõæÂàáÊàê‰∏âÊÆµ„ÄÇÂ§¥ÈÉ®„ÄÅ‰∏≠Èó¥ÈÉ®ÂàÜ„ÄÅÂ∫ïÈÉ®Ôºå‰∏≠Èó¥ÈÉ®ÂàÜÂà©Áî®ËÉåÊôØÂõæÁöÑ repeat Êù•Ëá™ÈÄÇÂ∫îÔºåÁº∫ÁÇπÂ∞±ÊòØ‰∏çÁÅµÊ¥ªÔºåÈúÄË¶ÅÊâæ UI ÂàáÂõæÔºåÈáåÈù¢ÂÜÖÂÆπÁöÑÈó¥Ë∑ùÊéßÂà∂‰∏çÁ≤æÂáÜ ÁÇπ‰πùÂõæÁÇπ‰πùÂõæÊòØÁßªÂä®Á´ØÁöÑ‰∏ÄÁßçÂÅöÊ≥ïÔºåÂ∞±ÊòØ‰∏ÄÂº†ÂõæÂàáÂõõÂàÄÔºåÂõõ‰∏™Ëßí‰∏ç‰º∏Áº©Ôºå‰øùÊåÅÂéüÂõæÊØî‰æã„ÄÇÂõõÊù°ËæπËøõË°å‰º∏Áº©Ôºå‰∏≠Èó¥ÁöÑÈÉ®ÂàÜÁî®Êù•Â°´ÂÖÖÔºå‰∏ÄÂÖ±‰πù‰∏™ÈÉ®ÂàÜÔºåÊâÄ‰ª•Áß∞ÁÇπ‰πùÂõæ„ÄÇCSS3 ‰πüÂèØ‰ª•ÂÆûÁé∞ÁÇπ‰πùÂõæÔºå‰∏îÊïàÊûú‰∏çÈîôÔºå‰∏æ‰∏™‰æãÂ≠êÔºöÂÜô‰∏Ä‰∏™‰∏öÂä°ÁªÑ‰ª∂ÔºåÂè™Áî®Êù•ÂÅö wrap ÂåÖË£πÔºåÁî®ÁÇπ‰πùÂõæÔºåËøôÊ†∑ÂÖ∂‰ªñÁöÑÂêåÊ†∑ÂºèÁöÑÁªÑ‰ª∂ÈÉΩÂèØ‰ª•Â§çÁî®„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091import React from 'react'import styled from 'styled-components'import &#123; StyledBaseWrap &#125; from '../styled'type Props = &#123; children: any title?: string // title?: string // headerType?: 'icon' | 'pureString'&#125;export default (props: Props) =&gt; &#123; const &#123; children, title = '' &#125; = props if (!children) &#123; return null &#125; return ( &lt;StyledBaseWrap&gt; &lt;i className="bg" /&gt; &#123; title &amp;&amp; ( &lt;div className="title-bg-box"&gt; &lt;i className="title-bg" /&gt; &#123;/* &lt;p className="you-she"&gt;&#123;title&#125;&lt;/p&gt; */&#125; &lt;div className="you-she"&gt;&#123;title&#125;&lt;/div&gt; &lt;/div&gt; ) &#125; &#123;children&#125; &lt;/StyledBaseWrap&gt; )&#125;const StyledBaseWrap = styled.div` position: relative; width: 680px; margin: 0 auto; min-height: 320px; &amp; &gt; * &#123; margin: 0 auto; &#125; .bg &#123; position: absolute; left: 0; right: 0; top: 0; bottom: 0; display: block; border-style: solid; border-width: 130px 340px 190px 340px; border-image-source: url($&#123;require('./images/bg_wrap.png')&#125;); border-image-slice: 130 340 190 340 fill; border-image-width: 1; border-image-repeat: repeat; &#125; .title-bg-box &#123; position: absolute; min-width: 380px; top: -20px; margin: 0 auto; font-size: 32px; left: 50%; transform: translateX(-50%); padding: 0 100px; box-sizing: border-box; div &#123; position: relative; height: 52px; line-height: 52px; white-space: nowrap; &#125; &#125; .title-bg &#123; position: absolute; left: 0; right: 0; top: 0; bottom: 0; display: block; border-style: solid; border-width: 24px 172px 24px 172px; border-image-source: url($&#123;require('./images/title_bg.png')&#125;); border-image-slice: 24 172 24 172 fill; border-image-width: 1; border-image-repeat: repeat; margin: 0 auto; &#125;` ‰ΩøÁî® ‚Äòborder-image-slice‚Äô Â±ûÊÄßÊù•ÂÆåÊàêÁÇπ‰πùÂõæÔºåÂÆÉÊé•Âèó 4 ‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´Âú®ÂõæÁâáÁöÑ‰∏äÂè≥‰∏ãÂ∑¶Âàá‰∏ÄÂàÄÔºåÊääÂõæÁâáÂàÜ‰∏∫ 9 ‰∏™ÈÉ®ÂàÜÔºå‰∏Ä‰∏≠ÂøÉÔºåÂõõ‰∏™ËßíÔºåÂõõ‰∏™Ëæπ„ÄÇ‰º∏Áº©Âè™‰ºöËÆ©ËæπËøõË°å‰º∏Áº©ÔºåÊâÄ‰ª•ÈúÄË¶ÅË∞ÉÊï¥ÂàáÁöÑ‰ΩçÁΩÆÔºåÂ∞ΩÈáèÂú®ËßÑÂàôÁöÑÂú∞Êñπ‰∏ãÂàÄ„ÄÇÊ≠§Êó∂ÔºåËã•Áà∂ÂÆπÂô®ÁöÑÂÆΩÈ´òÊú™ÁªôÂÆöÔºåÂàôÂÆåÂÖ®Áî±ÂÜÖÂÆπÊíëÂºÄÂÆΩÈ´òÔºå‰∏äÈù¢Ê†óÂ≠ê‰∏≠ÔºåÂÆΩÂ∫¶ÂÅö‰∫ÜÈôêÂà∂ÔºåÈ´òÂ∫¶Êú™ÈôêÂà∂Ôºå‰º†ÂÖ•ÁöÑ children ‰ºöÊíëÂºÄÁÇπ‰πùÂõæÁªÑ‰ª∂ÁöÑÈ´òÂ∫¶ÔºåÂÅöÂà∞ÊØè‰∏™Â≠êÁªÑ‰ª∂È´òÂ∫¶Ê†πÊçÆÂÜÖÂÆπËá™ÈÄÇÂ∫îÔºå‰ΩÜÊï¥‰ΩìÁöÑÊ†∑Âºè‰∏ç‰ºöÂèëÁîüÂèòÂåñ„ÄÇ HybridÂÖ®Èù¢Â±èH5È°µÈù¢Âú®iOSÂíåÂÆâÂçìÂ∫îÁî®ÔºåÈÄöÂ∏∏ÊòØÁßªÂä®Á´ØÁªô‰∫ÜÂ±èÂπïÁ©∫Èó¥ÔºåÁî®Êù•Â±ïÁ§∫H5È°µÈù¢Ôºå‰∏çÂåÖÂê´È°∂ÈÉ®ÁîµÊ±†Ê†ètabÔºåÊñ∞ÁöÑÊ≤âÊµ∏Âºè‰ΩìÈ™åÂàôÈúÄË¶ÅH5È°µÈù¢‰πüË¶ÅÊéßÂà∂ÁîµÊ±†Âå∫ÂüüÔºåÈì∫Êª°Êï¥‰∏™ÁßªÂä®Á´ØÂ±èÂπï„ÄÇ ÊØè‰∏™ÊâãÊú∫ËÆæÂ§áÁöÑÁîµÊ±†Âå∫ÂüüÈ´òÂ∫¶‰∏çÂ∞ΩÁõ∏ÂêåÔºå‰∏îËÆæÂ§áÁöÑdpi‰πü‰∏ç‰∏ÄËá¥ÔºåiOSÊòØÁõ∏ÂØπÂõ∫ÂÆöÁöÑ22ÂÉèÁ¥†ÔºåÂÆâÂçìÂàôÊòØ‰∫îËä±ÂÖ´Èó®ÔºåËøôÈáåÈúÄË¶ÅÊ°•Êé•ÈÄö‰ø°ÊãøÂà∞ÁßªÂä®Á´ØÁöÑ‚ÄútabÈ´òÂ∫¶‚ÄùÂíåËÆæÂ§ádpiÔºåÊúâËøô‰∏§‰∏™ÂèÇÊï∞ÔºåH5È°µÈù¢ÂàôÂèØ‰ª•ÂÆûÁé∞Áªü‰∏ÄÁöÑÂÖ®Èù¢Â±èÂπïÊ≤âÊµ∏Âºè‰ΩìÈ™å„ÄÇ dpi ÔºöÂΩìÂâçÊòæÁ§∫ËÆæÂ§áÁöÑÁâ©ÁêÜÂÉèÁ¥†ÂàÜËæ®Áéá‰∏éCSSÂÉèÁ¥†ÂàÜËæ®Áéá‰πãÊØîÔºåÈúÄË¶ÅËøõË°åËΩ¨Âåñ‰∏∫H5ÁöÑpxÂçï‰ΩçÔºåÂü∫Êú¨ÁÆóÊ≥ïÂàÜ‰∏∫Ôºö 123456789101112131415// res ‰∏∫Ê°•Êé•ÈÄö‰ø°ÁßªÂä®Á´ØËøîÂõûÁöÑÊï∞ÊçÆ// statusBarHeight‰∏∫Áä∂ÊÄÅÊ†èÁßªÂä®Á´ØÈ´òÂ∫¶if (res.data.statusBarHeight) &#123; if (client.instance.inIOsNative() ) &#123; statusBarHeight.setValue(res.data.statusBarHeight) &#125; else &#123; statusBarHeight.setValue(res.data.statusBarHeight / window.devicePixelRatio) &#125;&#125;// react&lt;HeaderBar style=&#123;&#123; paddingTop: `$&#123;statusBarHeight.value&#125;px`, ...style &#125;&#125; className=&#123;`$&#123;className&#125; `&#125;&gt; iOSÁöÑÈ´òÂ∫¶‰∏çÈúÄË¶ÅÈ¢ùÂ§ñËΩ¨Êç¢Ôºå‰∏ÄËà¨iOSÊú∫ÂûãËøîÂõûÈÉΩÊòØ22pxÔºåÂÆâÂçìÂàôÈúÄË¶ÅÈô§‰ª•dpiÂæóÂà∞CSSÂÉèÁ¥†„ÄÇ ÊãøÂà∞ÊúÄÁªàÁöÑÁä∂ÊÄÅÊ†èÈ´òÂ∫¶ÔºåËøõË°åapp-headerÁöÑÂ∏ÉÂ±ÄÔºåÂü∫Êú¨tabÊ†èÈ´òÂ∫¶‰∏ÄËà¨‰∏∫ 88 ÂÉèÁ¥†ÔºåÂÜçÂä†‰∏äÁä∂ÊÄÅÊ†èÔºàÁîµÊ±†Ê†èÔºâÁöÑÈ´òÂ∫¶ÔºåÂ¶ÇÊûúÊï¥‰∏™Â§¥ÈÉ®Êï¥‰ΩìÈúÄË¶ÅfixedÂ∏ÉÂ±ÄÔºåÂÖ®Â±ÄÂàôÂ¢ûÂä†padding-top ÂèñÂ∑ßÂÆûÁé∞„ÄÇÊï¥‰∏™H5È°µÈù¢ÊÄª‰ΩìÂàÜ‰∏∫‰∏§‰∏™Âå∫ÂüüÔºåtabÊ†èÂíåcontentÂÜÖÂÆπÈ°µÔºå‰∏ÄËà¨tabÊ†è‰ΩøÁî®Á∫ØËâ≤ËÉåÊôØÔºåÂÜÖÂÆπÈ°µÂàôÊúâÊó∂ÂÄô‰ºö‰ΩøÁî®Ê∏êÂèòËâ≤ÔºåÊ≠§Êó∂ÔºåcontentÁöÑÈ´òÂ∫¶Êó†Ê≥ïÁ°ÆÂÆöÔºåÂàôÊï¥‰ΩìÈ°µÈù¢‰ΩøÁî® flexÂ∏ÉÂ±ÄÔºåtabÊ†è‰ΩøÁî® shrinkÔºö 0 Ôºõ Á¶ÅÊ≠¢Áº©ÊîæÔºåcontentÂàô‰ΩøÁî® flex: 1; Ëá™Âä®Â°´ÂÖÖÊª°ËßÜÂè£ÔºåËøôÊ†∑ÔºåÂÜÖÂÆπÈ°µÁöÑÊ∏êÂèòËâ≤ÂàôÂíåtabÈ°µÊó†ÁºùË°îÊé•„ÄÇ hybrid touch barÂà§Êñ≠jsÂà§Êñ≠ÂΩìÂâçÊâãÊú∫ÊòØÂê¶Êúâtouch barÔºåÂ¶ÇÊûúÂ≠òÂú® touch bar ÔºåÂàôAppÂÖ®Â±ÄÂ§¥ÈÉ®Ê∑ªÂä†Ê†∑ÂºèÁ±ªÂêçÔºåÂêéÁª≠‰∏öÂä°Âè™ÈúÄÊ†πÊçÆÂØπÂ∫îCSSÊ†áËØÜÂ§ÑÁêÜ‰∏çÂêåÁöÑÊ†∑Âºè„ÄÇ Ëß£ÂÜ≥Ôºö iOS ÊâãÊú∫Â±èÂπïÂ∫ïÈÉ®Â≠òÂú®ÁôΩÁ∫øÔºàÊìç‰ΩúÊ†èÔºâÔºå‰ºöÈÅÆÊå°È°µÈù¢ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂ∏∏ËßÅÁöÑÈ°µÈù¢Â∫ïÈÉ®‰ºöÂ≠òÂú®Áî®Êà∑ÁÇπÂáªÊåâÈíÆÊàñÂÖ∂‰ªñUIÔºåÊìç‰ΩúÊ†è‰ºöÈôç‰ΩéÁî®Êà∑ÁöÑ‰ΩìÈ™å„ÄÇÂà§Êñ≠iOSÂ≠òÂú® touch bar ÔºåÂàôÂ¢ûÂä†ÂÖ®Â±ÄÊ†∑ÂºèÔºåÂú®ÂØπÂ∫îÂ≠ê‰∏öÂä°‰∏≠‰øÆÊîπÊ†∑ÂºèÂç≥ÂèØÈÅøÂÖç„ÄÇ 123456789101112131415&lt;!-- AppÂÖ®Â±ÄÊ†∑ÂºèÔºàapp.jsÔºâ --&gt;if ( /iphone/gi.test(navigator.userAgent) &amp;&amp; window.devicePixelRatio &amp;&amp; window.devicePixelRatio &gt;= 2 &amp;&amp; window.screen.height &gt;= 812) &#123; document.querySelector('html').classList.add('fix-bottom');&#125;&lt;!-- ÂÖ∑‰ΩìÂ≠ê‰∏öÂä° --&gt;.fix-bottom &amp; &#123; padding-bottom: 60px;&#125; iframe Ë∑®ÂüüÈÄö‰ø°Âú®ÂØπÊé•‰∏Ä‰∫õÁ¨¨‰∏âÊñπÁöÑÊ∏∏ÊàèÊó∂ÔºåÈááÁî® AppÂÆ¢Êà∑Á´Ø ÂµåÂÖ• Hybrid H5ÂâçÁ´ØÔºåÂâçÁ´ØÂØπÊé•Á¨¨‰∏âÊñπ„ÄÇÊØîÂ¶ÇÔºåÊäñÈü≥Áõ¥Êí≠Èó¥ÁÅ´Ëµ∑Êù•ÁöÑÂºπÂπïÊ∏∏ÊàèÂíåÂÖ∂‰ªñË∂£Âë≥Ê∏∏ÊàèÔºåÂú®Áõ¥Êí≠Èó¥Êé•ÂÖ•Ëøô‰∫õ‰∏âÊñπÊ∏∏ÊàèÔºåÂú®ÂÖ≥Èó≠Ê∏∏Êàè„ÄÅÊîØ‰ªòÁ≠âÊñπÈù¢ÔºåÊ∂âÂèä‰∏âÁ´ØË∑®ÂüüÈÄö‰ø°„ÄÇ ËøôÈáåÊúâ‰∏Ä‰∏™Ê°à‰æãÔºåÊ∏∏ÊàèÊòØÁ¨¨‰∏âÊñπÁöÑÔºå‰ΩÜÊ∏∏ÊàèÂÜÖÂÖÖÂÄºÂÖëÊç¢Ë¥ßÂ∏ÅÁöÑÈ°µÈù¢ÊòØÊàë‰ª¨ÁöÑ„ÄÇÊ∏∏ÊàèÊúÄÁªàÈúÄË¶ÅÂú®ÂÆ¢Êà∑Á´Ø„ÄÅWebÁ´Ø„ÄÅÊ°åÈù¢Á´ØÔºàwindow app, ‰∏ªË¶ÅÊòØÂºÄÊí≠Â∑•ÂÖ∑Ôºâ‰∏âÁ´ØÂ±ïÁ§∫„ÄÇËøôÈáåÈ°µÈù¢‰∫íÁõ∏ÂµåÂ•óÔºå‰ΩÜÊú¨Ë¥®Â∞±ÊòØÂ≠êÁà∂È°µÈù¢ÈÄö‰ø°„ÄÇ // Áà∂È°µÈù¢ÁõëÂê¨Âçï‰∏™‰∫ã‰ª∂ window.addEventListener('message', _handleMsg) const _handleMsg = (event) =&gt; { // doSomeThing } // Â≠êÈ°µÈù¢ÂèëÈÄÅ‰∫ã‰ª∂ // window.parent.postMessage('‰Ω†ÁöÑÂèÇÊï∞, '*') Á¨¨‰∫å‰∏™ÂèÇÊï∞Âç≥Ëß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢òÔºå‰πüÂèØÂ°´ÂÜôÁà∂Á™óÂè£ÁöÑÂüüÂêç window.parent.postMessage('‰Ω†ÁöÑÂèÇÊï∞, 'https://0.0.0.9200') // window.parent ËøîÂõûÁà∂Á™óÂè£ // window.top ËøîÂõûÊúÄÈ°∂Â±ÇÁ™óÂè£Ôºå‰∏ç‰∏ÄÂÆöÊòØÁà∂Á™óÂè£ const closeWebView = () =&gt; { window.parent.postMessage( { type: 'webViewEvent', source: 'xxx', event: 'close', }, '*', ); }; Ëá™ÂÆö‰πâhooks Âú®ÊâãÂÜôËæÉÂ§öÁöÑ useEffect ÁöÑÊó∂ÂÄôÔºåÂ∞±Â∫îËØ•ÊäΩ‰∏Ä‰∏™ hooks Âá∫Êù•„ÄÇ ReactÁöÑÂÆòÁΩëÂéüËØù‰πüÊúâÔºö Â¶ÇÊûú‰Ω†ÂèëÁé∞Ëá™Â∑±ÁªèÂ∏∏ÈúÄË¶ÅÊâãÂä®ÁºñÂÜô EffectÔºåÈÇ£‰πàËøôÈÄöÂ∏∏Ë°®Êòé‰Ω†ÈúÄË¶Å‰∏∫ÁªÑ‰ª∂ÊâÄ‰æùËµñÁöÑÈÄöÁî®Ë°å‰∏∫ÊèêÂèñ‰∏Ä‰∫õ Ëá™ÂÆö‰πâ Hook„ÄÇ]]></content>
      <categories>
        <category>Programming</category>
      </categories>
      <tags>
        <tag>‰πà‰πàÁõ¥Êí≠</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6]]></title>
    <url>%2F2021%2F04%2F13%2FES6%2F</url>
    <content type="text"><![CDATA[nodeÁâàÊú¨ÁÆ°ÁêÜ‰∏çÂêåÈ°πÁõÆ‰∫§ÂèâÂºÄÂèëÊó∂ÔºåÂèØËÉΩ‰ºöÂá∫Áé∞nodeÁâàÊú¨ÁöÑÂÜ≤Á™ÅÔºåÂ∏∏ËßÅÊúâ nvm Êèí‰ª∂Êù•Ëß£ÂÜ≥Ôºå‰ΩÜ nvm Âπ∂‰∏çÊòØÂÖ®Ëá™Âä®ÔºåÈúÄË¶ÅÊâãÂä®ÂàáÊç¢ÁâàÊú¨ nvm use ‚Ä¶ ÔºåËøôÈáåÈááÁî®Á§æÂå∫Êèê‰æõÁöÑ avn (avn)[https://github.com/wbyoung/avn],ÊÄùË∑Ø‰∏∫Ôºö È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÂàõÂª∫ .node-versionÊñá‰ª∂Ôºå‰ª• server Ê†ºÂºèÁ∫¶ÂÆöÂ•Ω Node ÁâàÊú¨ÔºåÂ¶ÇÔºö 9.8.0ÔºåÂú®CDÂà∞È°πÁõÆÁõÆÂΩïÊó∂Ôºåavn‰ºöËá™Âä®ÂàáÊç¢Âà∞Âà∂ÂÆöÁöÑNodeÁâàÊú¨„ÄÇ nÂëΩ‰ª§nÂëΩ‰ª§Êù•ÁÆ°ÁêÜnodeÁöÑ‰∏çÂêåÁâàÊú¨ÔºåÂü∫Êú¨‰∏∫ 123456789101112131415161718192021222324252627282930313233$ npm i -g n$ n ls-remote --all // Êü•ÁúãÊâÄÊúâÂèØÂÆâË£ÖÁöÑÁâàÊú¨$ n &lt;version&gt; // ÂÆâË£ÖnodeÔºåex: n 10.15.0$ n ls // Êú¨Âú∞Â∑≤ÂÆâË£ÖÁöÑÁâàÊú¨sudo n run &lt;version&gt; // ‰ΩøÁî®Êüê‰∏™ÁâàÊú¨n // Áõ¥Êé•n ‰πüÂèØ‰ª•ÈÄâÊã©ÁâàÊú¨sudo n rm &lt;version&gt; // Âà†Èô§Â§ö‰ΩôÁöÑÁâàÊú¨``` ÁÆÄÂçïËØ¥‰∏ã‰ºòÁº∫ÁÇπÂêß ‰ºòÁÇπÔºö Êñπ‰æøÔºåÂø´ÈÄüÔºåÁõ∏ÂØπavnÊù•ËØ¥Ôºå nÂëΩ‰ª§ÂÆâË£ÖÊñπ‰æøÔºå‰∏ÄÊù°ÂëΩ‰ª§Ëß£ÂÜ≥ÔºåavnÂàôÈúÄË¶ÅÊîπIPÂú∞ÂùÄÊàñËÄÖÁßëÂ≠¶‰∏äÁΩëÁ≠âÔºå Áº∫ÁÇπÔºö ËøôÁâàÊú¨ÊòØÂÖ®Â±Ä‰∏îÊâãÂä®ÁöÑÔºåËá™Â∑±ÁöÑÈ°πÁõÆÂèØ‰ª•Áî®Áî®ÔºåË¶ÅÊòØÂ§ßÂûãÂºÄÂèëÈ°πÁõÆÔºåÂª∫ËÆÆÁî®nvmÁºñÂÜô script ÂêØÂä®ÂëΩ‰ª§Êù•ÊéßÂà∂ÁâàÊú¨ÔºåÂê¶ÂàôÈ°πÁõÆ‰πãÈó¥ÂèØËÉΩÂá∫Áé∞nodeÁâàÊú¨ÂÜ≤Á™Å„ÄÇ PSÔºö n ÂëΩ‰ª§Â§ßÈÉ®ÂàÜÈÉΩÈúÄË¶Å‰ΩøÁî® sudo ÊâìÂºÄ ## Êï∞ÁªÑÁßªÈô§falseÁ±ªÂûã ÁÆÄÂçïËÆ∞ÂΩï‰∏Ä‰∏™Êï∞ÁªÑÁöÑÁßªÈô§ false ÊñπÊ≥ï ```javascriptconst arr = [1, &quot;str&quot;, false, NaN, undefined, null]const res = arr.filter(Boolean)// Reactconst hideSomething ?: booleanconst options: any = [ hideSomething !== true &amp;&amp; &#123; otherOption: &apos;test&apos; &#125;, &#123; normalOptions: &apos;normal&apos; &#125;,].filter(Boolean) Ëß£ÊûÑÈôÑÂÄºlog123const &#123; log, warn &#125; = consolelog('something')]]></content>
      <categories>
        <category>ÈªòËÆ§</category>
      </categories>
      <tags>
        <tag>ÈªòËÆ§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Amis]]></title>
    <url>%2F2021%2F02%2F24%2Famis%2F</url>
    <content type="text"><![CDATA[AimsÁ≥ªÂàóÁöÑÈ´òÁ∫ßÁî®Ê≥ïAmisÊòØÁôæÂ∫¶ÂºÄÊ∫êÁöÑ‰∏ÄÂ•ó‰ºÅ‰∏öÁ∫ßÁÆ°ÁêÜÁ≥ªÁªüÔºå‰∏Ä‰∏™‰Ωé‰ª£Á†ÅÂâçÁ´ØÊ°ÜÊû∂ÔºåÂÆÉ‰ΩøÁî® JSON ÈÖçÁΩÆÊù•ÁîüÊàêÈ°µÈù¢ÔºåÂèØ‰ª•ÂáèÂ∞ëÈ°µÈù¢ÂºÄÂèëÂ∑•‰ΩúÈáèÔºåÊûÅÂ§ßÊèêÂçáÊïàÁéá„ÄÇ Ovine‰∏Ä‰∏™ÊîØÊåÅ‰ΩøÁî® Json ÊûÑÂª∫ÂÆåÊï¥ÁÆ°ÁêÜÁ≥ªÁªü UI ÁöÑÊ°ÜÊû∂ÔºåÂü∫‰∫é Amis ‰∫åÊ¨°ÂºÄÂèë„ÄÇ Áõ∏ÂÖ≥ÊñáÊ°£‰æùËµñ ReactAmisstyled-componentimmerfont-awesome icon‰ΩøÁî®Âú®OvienÈ°πÁõÆ‰∏≠ÔºåiconÁöÑ‰ΩøÁî®ÂæàÁÆÄÂçï‰πüÈùûÂ∏∏‰∏∞ÂØåÔºåÂú®[font-awesome](https://fontawesome.dashgame.com/)‰∏≠ÈÄâÂèñÈÄÇÂêà‰Ω†ÁöÑiconÂêçÁß∞Âç≥ÂèØ 1icon: &apos;fa fa-$&#123;icon_name&#125;&apos;onFakeRequestÂ∫îÁî®amisÂØπÂêéÁ´ØÊàñËÄÖËØ¥‰∏≠Âè∞ËΩ¨Êç¢‰æùËµñÊØîËæÉÂº∫ÔºåËøîÂõûÁöÑAPIÊï∞ÊçÆ‰∏ÄËà¨ÊòØÂêéÁ´ØÁªÑË£ÖÂ•ΩÁöÑJSONÊï∞ÊçÆÔºåÁõ¥Êé•Ê∏≤ÊüìÔºå‰ΩÜÊòØÂØπ‰∫éÂÖ∂‰ªñÂêéÁ´Ø‰∏çÊòØÂæàÂº∫Â§ßÁöÑÈ°πÁõÆÊù•ËØ¥ÔºåonFakeRequestÂ∫îÁî®Â∞±ÂæàÊúâÂøÖË¶ÅÔºåÂÆÉÂÆûÁé∞‰∫ÜÂÅáËØ∑Ê±ÇÔºåÂú®ÂÅáËØ∑Ê±ÇÈáåÊ†πÊçÆËøîÂõûÁöÑÊï∞ÊçÆÊãºÊé•Êàë‰ª¨ÈúÄË¶ÅÁöÑschemaÔºåÊúÄÂêéËøîÂõûÂá∫ÂéªËøõË°åÊ∏≤ÊüìÔºåÂ¶Ç‰∏ãÂä®ÊÄÅÊ∏≤Êüì Âä®ÊÄÅÊ∏≤ÊüìÂä®ÊÄÅÊ∏≤ÊüìÁõÆÂâçÂè™ËÉΩÂú® Service ÂÆπÂô®‰∏≠ÂÆûÁé∞ÔºåÊ†∏ÂøÉÊÄùË∑ØÊòØÁî±ÂêéÂè∞ËøîÂõûÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåÂÜçÂä†‰ª•ÊãºÊé•ËøîÂõû‰∏Ä‰∏™SchemaËøõË°åÊ∏≤ÊüìËÄåÊàê„ÄÇÂ∏∏ËßÅÈúÄÊ±Ç‰∏∫Ôºö Êüê‰∏Ä‰∏™ÁÆ°ÁêÜÈ°µÈù¢ÁöÑË°åÁöÑÊØè‰∏ÄÈ°π‰∏çÊòØÂõ∫ÂÆöÁöÑÔºåÊòØÊ†πÊçÆÂÖ∂‰ªñÈÖçÁΩÆÈ°µÊï∞ÊçÆÊù•Ê∏≤ÊüìÁöÑÔºå‰æãÂ¶ÇÁõ¥Êí≠ÈÅìÂÖ∑ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÈÅìÂÖ∑Âπ∂‰∏çÊòØ‰∫ãÂÖàÂ∞±Á∫¶ÂÆöÂ•ΩÁöÑÔºåÊòØÂèØÈÖçÁΩÆÁöÑÔºåÊÉ≥Ë¶ÅÊ∏≤ÊüìÈÅìÂÖ∑ÁöÑ‰ΩøÁî®Êï∞ÊçÆË°®Â∞±ÂæóÂä®ÊÄÅÊ∏≤ÊüìË°®Â§¥„ÄÇË°®Â§¥ÁöÑÊï∞ÊçÆÊé•Âè£Âè™ËøîÂõû‰∫ÜÁÆÄÂçïÁöÑÊ†áËØÜÔºåÊú™ËøîÂõûschemaËäÇÁÇπÔºåÊàë‰ª¨Âú® onFakeRequest ÈáåÊãºÊé•schemaËøîÂõûÊ∏≤ÊüìÔºåÂÖ∑‰ΩìÁúã‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134schemaApi: &#123;$preset: 'apis.tabConf',url: 'fakeRequest',onFakeRequest: async (source) =&gt; &#123; // ÂÅáËØ∑Ê±ÇÔºàOvienÂÆûÁé∞Ôºâ const confData = await app.request(&#123; url: 'GET api/v1/apps/meme/hot-card', domain: 'flint', &#125;) const cardConf = confData.data.data['hot-card']['hot-cards'] || &#123;&#125; const colConf = [ &#123; name: 'nickname', label: 'Áî®Êà∑ÊòµÁß∞(ID)', type: 'tpl', tpl: '$&#123;nickname&#125;(ID:$&#123;_id&#125;)' &#125; ] const selectConf = [] Object.keys(cardConf).map((key) =&gt; &#123; const item = cardConf[key] const colOpt = &#123; label: `$&#123;item['gift-name']&#125;(Êú™‰ΩøÁî®)` || '-', name: key, type: 'tpl', // tpl: `&lt;%= (data.remain[$&#123;key&#125;] || '-') + '/' + (data.total[$&#123;key&#125;] || '-') %&gt;`, tpl: `&lt;%= (data.remain[$&#123;key&#125;] || '/') %&gt;`, &#125; const selectOpt = &#123; label: `$&#123;item['gift-name']&#125; ($&#123;item['hot-value']&#125;ÁÉ≠Â∫¶/Âº†ÔºåÁîüÊïà$&#123;item.duration&#125;ÂàÜÈíü)`, value: key &#125; selectConf.push(selectOpt) colConf.push(colOpt) return true &#125;) // ‰∫åÊ¨°ÂºπÁ™óÂÜÖÂÆπ const retrieveCard = &#123; api: &#123; url: 'GET hotcard/del.json', data: &#123; user_id: '$_id', gift_id: '$giftSelect', num: '$delNum', &#125; &#125;, type: 'form', horizontal: &#123; left: 'col-sm-3', right: 'col-sm-8', &#125;, controls: [ &#123; type: 'select', label: 'ÁÉ≠Â∫¶Âç°Á±ªÂûã', name: 'giftSelect', required: true, options: selectConf, &#125;, &#123; type: 'number', name: 'delNum', label: 'ÂõûÊî∂Êï∞Èáè', description: 'ËØ∑ËæìÂÖ•ÊØè‰∫∫ÂõûÊî∂ÁÉ≠Â∫¶Âç°ÁöÑÊï∞Èáè', required: true, // min: 1, precision: 0, &#125;, ] &#125; const retrieve: any = &#123; type: 'action', label: 'ÂõûÊî∂ÁÉ≠Â∫¶Âç°', level: 'danger', // visibleOn: '!data.status', actionType: 'dialog', dialog: &#123; title: 'ÂõûÊî∂ÁÉ≠Â∫¶Âç°', body: retrieveCard, &#125;, &#125; colConf.push(retrieve) const schemaNode = &#123; type: 'lib-crud', syncLocation: false, // api: '$preset.apis.remainList', primaryField: '_id', perPageField: 'size', pageField: 'page', perPageAvailable: [50, 100, 200], defaultParams: &#123; size: 50, &#125;, api: &#123; url: 'GET hotcard/remain.json' &#125;, // source: '$rows', headerToolbar: [ &#123; type: 'columns-toggler', align: 'left', &#125;, // &#123; // $preset: 'actions.add', // align: 'right', // &#125;, ], footerToolbar: ['statistics', 'switch-per-page', 'pagination'], columns: colConf, filter: &#123; type: 'form', title: 'ÊêúÁ¥¢', controls: [ &#123; type: 'text', name: 'user_id', value: '', placeholder: 'ËæìÂÖ•Áî®Êà∑IDÊêúÁ¥¢', &#125;, &#123; type: 'submit', className: 'm-l', label: 'ÊêúÁ¥¢', &#125;, ] &#125;, &#125; source.data = schemaNode return source&#125;&#125;,]]></content>
      <categories>
        <category>ÈªòËÆ§</category>
      </categories>
      <tags>
        <tag>ÈªòËÆ§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ReactÂºÄÂèëÊÄªÁªì]]></title>
    <url>%2F2020%2F11%2F11%2FReact%2F</url>
    <content type="text"><![CDATA[‰º†ÈÄÅÈó® React Mobx Mobx-state-tree React-Hooks Typescript VAP react-query SVGR polished immerjs Â∫èË®ÄÂ∞èÁ®ãÂ∫èÂíåVueË¶ÅÂëä‰∏ÄÊÆµËêΩ‰∫ÜÔºåÊé•‰∏ãÊù•Ë¶ÅËøõË°å React „ÄÅtypescript„ÄÅ Express ÂºÄÂèë‰∫Ü„ÄÇÈ°πÁõÆ‰∏ªË¶ÅÊòØ‰∏Ä‰∏™2013Âπ¥ÁöÑÁõ¥Êí≠È°πÁõÆÔºåÂΩìÊó∂ÈááÁî®ÁöÑÊòØ Express \ Ejs ÂÆûÁé∞ÁöÑÔºåÁé∞Âú®V2ÁâàÊú¨‰∏ÄÁõ¥ÈôÜÁª≠ÂÜçÂæÄReact„ÄÅtypescriptÊñπÈù¢ÈáçÊûÑ„ÄÇV2ÁâàÊú¨ÈááÁî®ÊúÄÊñ∞ÁöÑReactÁ≥ªÂàóÂºÄÂèë„ÄÇÁü•ËØÜÁÇπÂåÖÊã¨‰ª•‰∏ä‰º†ÈÄÅÈó®Á≠â„ÄÇ React]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏Ä‰∫õ‰∏âÊñπÂ∫ì]]></title>
    <url>%2F2020%2F10%2F07%2F%E4%B8%80%E4%BA%9B%E4%B8%89%E6%96%B9%E5%BA%93%2F</url>
    <content type="text"><![CDATA[Á≤òË¥¥Â§çÂà∂clipboard.js Áé∞‰ª£ÂåñÁöÑÊã∑Ë¥ùÊñáÂ≠óÔºå‰∏ç‰æùËµñ flash, ‰∏ç‰æùËµñÂÖ∂‰ªñÊ°ÜÊû∂Ôºågzip ÂéãÁº©ÂêéÂè™Êúâ 3kb Â§ßÂ∞è 12yarn add clipboard npm install clipboard --save 123456789101112131415161718import ClipboardJS from 'lib/clipboard.min';useEffect(() =&gt; &#123; const clipboard = new ClipboardJS('id'); clipboard.on('success', (e) =&gt; &#123; UiToast.text('Â§çÂà∂ÊàêÂäü'); e.clearSelection(); &#125;); clipboard.on('error', (e) =&gt; &#123; UiToast.fail('Â§çÂà∂Â§±Ë¥•'); # doSomeThing() &#125;); return () =&gt; &#123; clipboard.destroy(); &#125;;&#125;, [codeStr.value]); React ÊãñÊãΩ]]></content>
      <categories>
        <category>‰∏âÊñπÂ∫ì</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vue]]></title>
    <url>%2F2020%2F09%2F27%2FVue%2F</url>
    <content type="text"><![CDATA[VueÂìçÂ∫îÂºèÂéüÁêÜVueÁöÑÊï∞ÊçÆÂìçÂ∫îÂºèÂéüÁêÜ‰∏ªË¶ÅÂü∫‰∫é Object.defineProperty() ÂáΩÊï∞Êù•Âä´ÊåÅÊï∞ÊçÆÂèòÂåñÔºå‰ª•Âèä‰ΩøÁî®ÂèëÂ∏É-ËÆ¢ÈòÖËÄÖÊ®°ÂºèËææÂà∞Êõ¥Êñ∞Êï∞ÊçÆÁöÑÂÅöÊ≥ï„ÄÇÈ¶ñÂÖàË¶ÅËÆæÁΩÆ‰∏Ä‰∏™ÁõëÂê¨Âô®Observer,Áî®Êù•ÁõëÂê¨ÊâÄÊúâÁöÑÂ±ûÊÄßÔºåÂΩìÂ±ûÊÄßÂèòÂåñÊó∂ÔºåÂ∞±ÈúÄË¶ÅÈÄöÁü•ËÆ¢ÈòÖËÄÖWatcher,ÁúãÊòØÂê¶ÈúÄË¶ÅÊõ¥Êñ∞ÔºéÂõ†‰∏∫Â±ûÊÄßÂèØËÉΩÊòØÂ§ö‰∏™ÔºåÊâÄ‰ª•‰ºöÊúâÂ§ö‰∏™ËÆ¢ÈòÖËÄÖÔºåÊïÖÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Ê∂àÊÅØËÆ¢ÈòÖÂô®DepÊù•‰∏ìÈó®Êî∂ÈõÜËøô‰∫õËÆ¢ÈòÖËÄÖÔºåÂπ∂Âú®ÁõëÂê¨Âô®ObserverÂíåËÆ¢ÈòÖËÄÖWatcher‰πãÈó¥ËøõË°åÁªü‰∏ÄÁöÑÁÆ°ÁêÜÔºé‰ª•‰∏∫Âú®ËäÇÁÇπÂÖÉÁ¥†‰∏äÂèØËÉΩÂ≠òÂú®‰∏Ä‰∫õÊåá‰ª§ÔºåÊâÄ‰ª•Êàë‰ª¨ËøòÈúÄË¶ÅÊúâ‰∏Ä‰∏™Êåá‰ª§Ëß£ÊûêÂô®CompileÔºåÂØπÊØè‰∏™ËäÇÁÇπÂÖÉÁ¥†ËøõË°åÊâ´ÊèèÂíåËß£ÊûêÔºåÂ∞ÜÁõ∏ÂÖ≥Êåá‰ª§ÂàùÂßãÂåñÊàê‰∏Ä‰∏™ËÆ¢ÈòÖËÄÖWatcherÔºåÂπ∂ÊõøÊç¢Ê®°ÊùøÊï∞ÊçÆÂπ∂ÁªëÂÆöÁõ∏Â∫îÁöÑÂáΩÊï∞ÔºåËøôÊó∂ÂÄôÂΩìËÆ¢ÈòÖËÄÖWatcherÊé•ÂèóÂà∞Áõ∏Â∫îÂ±ûÊÄßÁöÑÂèòÂåñÔºåÂ∞±‰ºöÊâßË°åÁõ∏ÂØπÂ∫îÁöÑÊõ¥Êñ∞ÂáΩÊï∞Ôºå‰ªéËÄåÊõ¥Êñ∞ËßÜÂõæÔºé Êï¥ÁêÜ‰∏äÈù¢ÁöÑÊÄùË∑ØÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆûÁé∞‰∏â‰∏™Ê≠•È™§ÔºåÊù•ÂÆåÊàêÂèåÂêëÁªëÂÆöÔºö ÂÆûÁé∞‰∏Ä‰∏™ÁõëÂê¨Âô®ObserverÔºåÁî®Êù•Âä´ÊåÅÂπ∂ÁõëÂê¨ÊâÄÊúâÂ±ûÊÄßÔºåÂ¶ÇÊûúÊúâÂèòÂä®ÁöÑÔºåÂ∞±ÈÄöÁü•ËÆ¢ÈòÖËÄÖ„ÄÇ ÂÆûÁé∞‰∏Ä‰∏™ËÆ¢ÈòÖËÄÖWatcherÔºåÂèØ‰ª•Êî∂Âà∞Â±ûÊÄßÁöÑÂèòÂåñÈÄöÁü•Âπ∂ÊâßË°åÁõ∏Â∫îÁöÑÂáΩÊï∞Ôºå‰ªéËÄåÊõ¥Êñ∞ËßÜÂõæ„ÄÇ ÂÆûÁé∞‰∏Ä‰∏™Ëß£ÊûêÂô®CompileÔºåÂèØ‰ª•Êâ´ÊèèÂíåËß£ÊûêÊØè‰∏™ËäÇÁÇπÁöÑÁõ∏ÂÖ≥Êåá‰ª§ÔºåÂπ∂Ê†πÊçÆÂàùÂßãÂåñÊ®°ÊùøÊï∞ÊçÆ‰ª•ÂèäÂàùÂßãÂåñÁõ∏Â∫îÁöÑËÆ¢ÈòÖÂô®„ÄÇ let {log} = console function defineReactive(data,key,val) { observe(val); //ÈÄíÂΩíÈÅçÂéÜÊâÄÊúâÁöÑÂ±ûÊÄß Object.defineProperty(data,key,{ enumerable:true, //ÂΩì‰∏î‰ªÖÂΩìËØ•Â±ûÊÄßÁöÑ configurable ‰∏∫ true Êó∂ÔºåËØ•Â±ûÊÄßÊèèËø∞Á¨¶ÊâçËÉΩÂ§üË¢´ÊîπÂèòÔºåÂêåÊó∂ËØ•Â±ûÊÄß‰πüËÉΩ‰ªéÂØπÂ∫îÁöÑÂØπË±°‰∏äË¢´Âà†Èô§„ÄÇ configurable:true, //ÂΩì‰∏î‰ªÖÂΩìËØ•Â±ûÊÄßÁöÑenumerable‰∏∫trueÊó∂ÔºåËØ•Â±ûÊÄßÊâçËÉΩÂ§üÂá∫Áé∞Âú®ÂØπË±°ÁöÑÊûö‰∏æÂ±ûÊÄß‰∏≠ get() { return val; }, set(newVal) { val = newVal; log(`Â±ûÊÄß${key}Â∑≤Ë¢´ÁõëÂê¨ÔºåÁé∞Âú®ÂÄº‰∏∫"${newVal.toString()}"`) } }) } function observe(data) { if(!data || typeof data !== 'object') { return; } Object.keys(data).forEach(function(key){ //ÈÅçÂéÜÊØè‰∏Ä‰∏™Êï∞ÊçÆ defineReactive(data,key,data[key]); }); } let data = { user1: { name: '' }, user2: '' }; observe(data); data.user1.name = 'Á∫¶Áø∞'; // Â±ûÊÄßnameÂ∑≤ÁªèË¢´ÁõëÂê¨‰∫ÜÔºåÁé∞Âú®ÂÄº‰∏∫Ôºö‚ÄúÁ∫¶Áø∞‚Äù data.user2 = 'È≤çÂãÉ'; // Â±ûÊÄßbook2Â∑≤ÁªèË¢´ÁõëÂê¨‰∫ÜÔºåÁé∞Âú®ÂÄº‰∏∫Ôºö‚ÄúÈ≤çÂãÉ‚Äù ÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÊàë‰ª¨Ê®°Êãü‰∫ÜVueÂÆû‰æãÁöÑÊï∞ÊçÆÁõëÂê¨ÂÆûÁé∞ËøáÁ®ãÔºåËøôÈáå‰πüÂæàÂ•ΩÁöÑËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÈ°µÈù¢ÈúÄË¶ÅÁöÑÊï∞ÊçÆÂ≠óÊÆµÂøÖÈ°ªÂæóÂú®VueÂÆû‰æãÊåÇËΩΩÂâçÂ∞±Ë¶ÅÊ≥®ÂÜåÂú® data ÂØπË±°‰∏≠Ôºå‰∏çËÉΩÂä®ÊÄÅÁöÑÂú®data‰∏≠ËÆæÁΩÆÊï∞ÊçÆÂ≠óÊÆµÔºåÊàñËÄÖËØ¥Âä®ÊÄÅÁöÑÂú® data ‰∏≠ËÆæÁΩÆÂ≠óÊÆµÔºåËØ•Â≠óÊÆµÊòØ‰∏çËÉΩÂèåÂêëÁªëÂÆöÁöÑ„ÄÇÂéüÂõ†Â∞±Âú®‰∫éVueÂÆû‰æãÊåÇËΩΩÊó∂ÔºåÂ∑≤ÁªèÈÅçÂéÜ‰∫Üdata Âπ∂‰∏∫data‰∏≠ÊØè‰∏™ÂÄºÈÉΩÊâßË°å‰∫ÜObject.defineProperty(),ËÄå‰πãÂêédata‰∏≠ÁöÑÊï∞ÊçÆËá™ÁÑ∂Â∞±‰∏ç‰ºöÁõëÂê¨„ÄÇ]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊúçÂä°Âô®ÈÉ®ÁΩ≤-flask]]></title>
    <url>%2F2020%2F09%2F17%2Fflask-deploy%2F</url>
    <content type="text"><![CDATA[ÂâçË®Äcentos Á≥ªÂàóÁöÑ‰∫ëÊúçÂä°Âô®‰∏ÄËà¨Ëá™Â∏¶Python3.6Ôºå‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§Êü•ÁúãPythonÊòØÂê¶ÊèêÂâçÂÆâË£Ö whereis python ÊúçÂä°Âô®ÁöÑÂü∫Êú¨ÈÖçÁΩÆÂèØÂèÇËÄÉ‰πãÂâçÁöÑ ÊúçÂä°Âô®ÈÉ®ÁΩ≤-Node ‰∏ÄÊñá Â∑•ÂÖ∑Ôºö ‰∫ëÊúçÂä°Âô® Xshell Navicat Postman ËôöÊãüÁéØÂ¢ÉÊú¨Âú∞ÊµãËØïË∑ëÈÄöÁöÑÈ°πÁõÆÔºåÁîüÊàê requirement.txt Êàñ PipfileÊñá‰ª∂ÔºåÈÄöËøáXshellÂØºÂÖ•Âà∞ÊúçÂä°Âô®ÁõÆÂΩï‰∏ãÔºå‰ΩøÁî® pipenv install ÂàõÂª∫ËôöÊãüÁéØÂ¢ÉÔºåÂπ∂ÂÆâË£Ö‰æùËµñ„ÄÇ ÂÆâË£Ö‰æùËµñÂºÇÂ∏∏ËøôÈáåÂ∏∏ËßÅÁöÑÊä•Èîô‰∏∫ÂÆâË£ÖË∂ÖÊó∂ timeout Ôºå pip ÂèØ‰ª•ÊåáÂÆöÂÆâË£ÖÊ∫ê„ÄÇ ÈòøÈáå‰∫ë http://mirrors.aliyun.com/pypi/simple/ ‰∏≠ÂõΩÁßëÊäÄÂ§ßÂ≠¶ https://pypi.mirrors.ustc.edu.cn/simple/ Ë±ÜÁì£(douban) http://pypi.douban.com/simple/ Ê∏ÖÂçéÂ§ßÂ≠¶ https://pypi.tuna.tsinghua.edu.cn/simple/ ‰∏≠ÂõΩÁßëÂ≠¶ÊäÄÊúØÂ§ßÂ≠¶ http://pypi.mirrors.ustc.edu.cn/simple/ ‰∏¥Êó∂ÊåáÂÆöÂÆâË£ÖÊ∫ê pip install -i https://pypi.tuna.tsinghua.edu.cn/simple Ê∞∏‰πÖÊåáÂÆöÂÆâË£ÖÊ∫ê linux ‰øÆÊîπ ~/.pip/pip.conf (Ê≤°ÊúâÂ∞±ÂàõÂª∫‰∏Ä‰∏™)Ôºå ÂÜÖÂÆπÂ¶Ç‰∏ã [global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple windows Áõ¥Êé•Âú®userÁõÆÂΩï‰∏≠ÂàõÂª∫‰∏Ä‰∏™pipÁõÆÂΩïÔºåÂ¶ÇÔºöC:\Users\xx\pipÔºåÊñ∞Âª∫Êñá‰ª∂pip.ini [global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple ÊúçÂä°Âô®ËøêË°å‰æùËµñÈÉΩÂ∑≤ÁªèÂØºÂÖ•ÂêéÔºåÂ∞ùËØïËøêË°åÈ°πÁõÆÁöÑÂÖ•Âè£Êñá‰ª∂ÔºåÂ¶ÇÊûúÊä•ÈîôÔºåËØ∑ÂÖàËß£ÂÜ≥ÈîôËØØ„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÈîôËØØÔºåÊ≠§Êó∂ÁöÑÈ°πÁõÆËøêË°åÂú® localhost:5000 Á´ØÂè£ÔºåÊàë‰ª¨Âú®Â§ñÈÉ®ÊòØÊó†Ê≥ïËÆøÈóÆÁöÑÔºåÊàë‰ª¨‰øÆÊîπÈ°πÁõÆÂÖ•Âè£Êñá‰ª∂host: 12if __name__ == "__main__": app.run(host="0.0.0.0", port=5000, debug=True) Êù•ÁõëÂê¨ÊâÄÊúâÁöÑÁ´ØÂè£ËØ∑Ê±Ç„ÄÇ Á´ØÂè£ÂÆâÂÖ®ÁªÑÈ°πÁõÆÁõëÂê¨0.0.0.0ÔºåÂç¥Âú®Â§ñÈù¢ËøòÊòØÊó†Ê≥ïËÆøÈóÆÔºÅ‰ΩøÁî® nmap your ipAddress Êù•Êü•ÁúãÂºÄÊîæÁöÑÊé•Âè£ÔºåËøôÈáå5000Á´ØÂè£ÊòØ‰∏çÂ≠òÂú®ÁöÑÔºåeg: nmap 108.16.12.26 5000Á´ØÂè£Êú™Ë¢´ÂºÄÊîæÔºåÂèØ‰ª•‰ΩøÁî®Èò≤ÁÅ´Â¢ôÂëΩ‰ª§ÂºÄÂêØ5000Á´ØÂè£ÔºåÈò≤ÁÅ´Â¢ôÂëΩ‰ª§ËßÅ ÊúçÂä°Âô®ÈÉ®ÁΩ≤-Node ÂºÄÂêØ‰∫ÜÈò≤ÁÅ´Â¢ô‰πãÂêéÔºåÂ¶ÇÊûúÂèØ‰ª•ËÆøÈóÆ5000Á´ØÂè£‰∫ÜÔºåÈÇ£‰πàÊÅ≠Âñú‰Ω†„ÄÇÂ¶ÇÊûúÈò≤ÁÅ´Â¢ôÂºÄÂêØ5000Á´ØÂè£ÊàñËÄÖÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô‰æùÁÑ∂Êó†Ê≥ïËÆøÈóÆÔºåÈÇ£‰πàËøôÈáåÈúÄË¶ÅÂéª‰∫ëÊúçÂä°Âô®ÊâæÂà∞ÂÆâÂÖ®ÁªÑ -&gt; ÂàõÂª∫ÂÆâÂÖ®ÁªÑ -&gt; ÂÖÅËÆ∏ËÆøÈóÆÊâÄÊúâÁ´ØÂè£Ôºå‰πãÂêéÂú®ÂàõÂª∫Â•ΩÁöÑÂÆâÂÖ®ÁªÑÔºåÁÇπÂáªËøõÂéªÁúãÂà∞ ÂÖ≥ËÅî‰∫ëÊúçÂä°Âô® ÔºåÈÄâÊã©‰Ω†ÁöÑÊúçÂä°Âô®ÂÆû‰æãÂç≥ÂèØ„ÄÇÂ¶ÇÊ≠§ÔºåÊàë‰ª¨‰æøÂèØ‰ª•Âú®Â§ñÁΩëËÆøÈóÆÂà∞Á®ãÂ∫è gunicorn gevevntÂèØ‰ª•ËÆøÈóÆÈ°πÁõÆÂêéÔºåÂΩìÂÖ≥Èó≠ Xshell ÂêéÔºåÈ°πÁõÆ‰ªçÁÑ∂Êó†Ê≥ïË¢´ËÆøÈóÆÔºåÊâÄ‰ª•ÊâÄ‰ª•ËøôÈáå‰ΩøÁî® gunicorn Êù•ÂÅöÊåÅ‰πÖËÆøÈóÆ„ÄÇ ÂÆâË£Ögunicorn gevevntÔºå gevent ÂØπWindowsÂÖºÂÆπ‰∏çÊòØÂæàÂ•Ω„ÄÇ pip install gunicorn gevevnt ÂÆâË£ÖÂ•Ω‰πãÂêéÔºåÂú®È°πÁõÆÊ†πÁõÆÂΩïÂª∫Á´ã gunicorn.conf.py ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123workers = 5 # ÂÆö‰πâÂêåÊó∂ÂºÄÂêØÁöÑÂ§ÑÁêÜËØ∑Ê±ÇÁöÑËøõÁ®ãÊï∞ÈáèÔºåÊ†πÊçÆÁΩëÁ´ôÊµÅÈáèÈÄÇÂΩìË∞ÉÊï¥worker_class = &quot;gevent&quot; # ÈááÁî®geventÂ∫ìÔºåÊîØÊåÅÂºÇÊ≠•Â§ÑÁêÜËØ∑Ê±ÇÔºåÊèêÈ´òÂêûÂêêÈáèbind = &quot;0.0.0.0:5000&quot; ‰ΩøÁî®ÂëΩ‰ª§ÈÉ®ÁΩ≤È°πÁõÆ gunicorn run:app -c gunicorn.conf.py # run:app ËøôÈáåÁöÑ run ÊòØ‰Ω†È°πÁõÆÂÖ•Âè£Êñá‰ª∂ ÂêØÂä®ÂêéÔºåÂÖ≥Èó≠ Xshell Âêé‰æùÊóßÂèØ‰ª•ËÆøÈóÆ ÈáçÂêØÂíåÂÖ≥Èó≠ ÂÖàÊü•ÁúãËøõÁ®ã pstree -ap|grep gunicorn ÂæóÂà∞ÁöÑÁªìÊûúÂåÖÂê´Ê≠£Âú®ËøêË°åÁöÑËøõÁ®ãÂíåÊàë‰ª¨‰πãÂâçÈÖçÁΩÆÁöÑÁ∫øÁ®ãÊï∞ÔºåËøôÈáåÊìç‰ΩúÁöÑÊòØËøõÁ®ãpid„ÄÇ kill -9 pid # ÂÖ≥Èó≠ËøõÁ®ã kill -HUP pid # ÈáçÂêØËøõÁ®ã dockerÂÆπÂô®ÈÉ®ÁΩ≤ dockerÂÆâË£ÖÂá∫Áé∞‰∫ÜÊä•Èîô ‚ÄúProblem: package docker-ce-3:19.03.8-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3, but none of the providers can be installed‚ÄùËß£ÂÜ≥ÂäûÊ≥ï Âú®ËøôÈáå ÂêØÂä®docker service docker start ÂàõÂª∫ Dockerfile Êñá‰ª∂ 123456789FROM python:3.6WORKDIR /project/PythonProjectCOPY requirements.txt ./RUN pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simpleCOPY . .CMD [&quot;gunicorn&quot;, &quot;ginger:app&quot;, &quot;-c&quot;, &quot;./gunicorn.conf.py&quot;] ÊûÑÂª∫ docker ÈïúÂÉè (Êó∂Èó¥ËæÉÈïø) docker build -t ‚Äòtestflask‚Äô . ÂÆåÊàêÈïúÂÉèÂêéÔºå‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§Êü•Áúã docker images ‰ºöÂèëÁé∞Â≠òÂú®‰∏Ä‰∏™ ‚Äòtestflask‚ÄôÈïúÂÉèÂ≠òÂú® ÈÖçÁΩÆÈòøÈáå‰∫ëÈïúÂÉè‰ªìÂ∫ì Âú®ÈòøÈáå‰∫ëdockerhub ÁÇπÂáªËøôÈáå , Ê≥®ÂÜåË¥¶Âè∑Ôºå‰ªñ‰ºöÁîüÊàê‰∏Ä‰∏™ÈòøÈáå‰∫ëÈïúÂÉèÂä†ÈÄüÈìæÊé•ÔºåÔºà‰∏çÈÄÇÁî®ÂõΩÂ§ñÁöÑdockerhubÔºåÂéüÂõ†‰Ω†ÊáÇÁöÑÔºåÁΩëÁªúÈóÆÈ¢òÔºâÔºå Â∞ÜËøô‰∏™ Âä†ÈÄüÈìæÊé• ÈÖçÁΩÆÂú®Êàë‰ª¨ÁöÑÊúçÂä°Âô®‰∏ä /etc/docker/daemon.json Ê≥®ÊÑèÔºö ‰∏çÂ≠òÂú® /etc/docker/daemon.json ÂàôÂàõÂª∫ËØ•Êñá‰ª∂ÔºÅÂπ∂Â§çÂà∂ÈìæÊé•ËøõÂéª &lt;!-- /etc/docker/daemon.json --&gt; { &quot;registry-mirrors&quot;: [&quot;https:********.liyuncs.com&quot;] } ÈáçÊñ∞Âä†ËΩΩÊúçÂä°ÈÖçÁΩÆÊñá‰ª∂ systemctl daemon-reload ÈáçÂêØDocker systemctl restart docker Êü•ÁúãÊú¨Âú∞ÈïúÂÉè docker inages Êé®ÈÄÅÈïúÂÉèÂà∞ÈòøÈáå‰∫ëÈïúÂÉè‰ªìÂ∫ì docker tag 70517a163731 registry.cn-hangzhou.aliyuncs.com/ÂëΩÂêçÁ©∫Èó¥/‰ªìÂ∫ìÂêçÁß∞:[ÈïúÂÉèÁâàÊú¨Âè∑]docker push registry.cn-hangzhou.aliyuncs.com/ÂëΩÂêçÁ©∫Èó¥/‰ªìÂ∫ìÂêçÁß∞:[ÈïúÂÉèÁâàÊú¨Âè∑] ËøêË°åtestginger ‰ΩøÊàë‰ª¨ÁöÑ docker imagesÔºåÁ´ØÂè£Êò†Â∞ÑÂâçÈù¢ÊòØÂÆπÂô®ÁöÑÁ´ØÂè£„ÄÅÂêéÈù¢ÊòØÈ°πÁõÆÊö¥Èú≤Â§ÑÁöÑÁ´ØÂè£ÔºåÁõ∏ÂΩì‰∫é‰∏ÄÂ±Ç‰ª£ÁêÜ„ÄÇ docker run -d -p 8080:5000 testgingerÊ≠§Êó∂Ôºå‰ΩøÁî® nmap your id address Êü•ÁúãÊúçÂä°Âô®Á´ØÊé•Âè£Âç†Áî®Ôºå8080ÊòØÂºÄÂêØÁöÑ„ÄÇ Êó•Âøó docker logs [options]docker logs ‚Äìtail=‚Äù10‚Äù CONTAINER ID ÈáçÊñ∞build docker build -t ginger:test . Âà†Èô§ÈïúÂÉèÂàùÊ¨°ÈÉ®ÁΩ≤Êó∂ÔºåÊàë‰ª¨ÂèØËÉΩ‰ºöÂàõÈÄ†Â§ö‰∏™ÈïúÂÉèÔºåÂæÖÊàêÂäüÈÉ®ÁΩ≤ÂêéÔºåÊàë‰ª¨ÂèØ‰ª•Âà†Èô§Â§öÊúâÁöÑÊó†Áî®ÈïúÂÉèÂÆπÂô®„ÄÇ docker rmi -f image_id ÂëΩ‰ª§ Êü•ÁúãÊ≠£Âú®ËøêË°åÁöÑÈïúÂÉèÂÆπÂô® docker ps Êü•ÁúãÊâÄÊúâÂ≠òÂú®ÁöÑÈïúÂÉèÂÆπÂô® docker ps -a ÂÅúÊ≠¢ÈïúÂÉèÂÆπÂô® docker stop image_id]]></content>
      <categories>
        <category>ÈªòËÆ§</category>
      </categories>
      <tags>
        <tag>ÈªòËÆ§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊúçÂä°Âô®ÈÉ®ÁΩ≤-Node]]></title>
    <url>%2F2020%2F06%2F09%2Fserver%2F</url>
    <content type="text"><![CDATA[ÈÖçÁΩÆÊúçÂä°Âô®Ë¥≠‰π∞ÁöÑÊúçÂä°Âô®ÔºåÂ±û‰∫é‰∏Ä‰∏™Á©∫Â£≥Â≠êÔºåÂÆâË£ÖÊàë‰ª¨ÈúÄË¶ÅÁöÑGit„ÄÅnodeÁ≠âÁ®ãÂ∫èÔºå‰ΩøÁî®XshellËøõË°åÊéßÂà∂„ÄÇ GitËøûÊé•‰ªìÂ∫ì ÁîüÊàêÁßòÈí•ÔºåÂπ∂Â∞ÜÂÖ¨Èí•Ê≥®ÂÜåÂú®Git‰ªìÂ∫ìÂç≥ÂèØ cd ~/.ssh ÂÆâË£ÖMySQL ÁõÆÂΩïÂàáÊç¢Ëá≥root‰∏ãÔºå cd ~ ‰∏ãËΩΩ‰∏éÂÆâË£Ömysql, Ê≠•È™§Â¶Ç‰∏ã ÂÆâË£ÖMySQLÂÆòÊñπÁöÑyum repositoryÔºö wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm ‰∏ãËΩΩrpmÂåÖ yum -y install mysql57-community-release-el7-10.noarch.rpm ÂÆâË£ÖMySQLÊúçÂä° yum -y install mysql-community-server,ÈúÄË¶ÅÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥ÔºåÊúÄÂêéÂá∫Áé∞ completeÔºÅ ÂêØÂä®MySQLÊúçÂä° systemctl start mysqld.service Êü•ÁúãMySQLÁä∂ÊÄÅ systemctl status mysqld.service Ëé∑ÂèñÂàùÂßãÂØÜÁ†Å grep &quot;password&quot; /var/log/mysqld.log,Â§çÂà∂‰∏ãÊù•ÔºåÂæÖ‰ºö‰øÆÊîπÂØÜÁ†ÅË¶ÅÁî®Âà∞ ÁôªÂΩïMySQL mysql -u root -pÔºåÊâßË°åÂêéËæìÂÖ•ÂàöÂàöÂ§çÂà∂ÁöÑÂØÜÁ†ÅÂç≥ÂèØÁôªÂΩïÊàêÂäüÔºåÊàêÂäüÂêé‰ºöÂ±ïÁ§∫MySQLÁöÑÁâàÊú¨‰ø°ÊÅØÔºåËøôÈáåÊòØ5.7.X ÊâßË°åMySQLËØ≠Âè• set global validate_password_policy=0;set global validate_password_length=1;‰πãÂêéÊâçÂèØ‰ª•‰øÆÊîπÂØÜÁ†ÅÔºàËøôÈáåÊòØ5.7ÁâàÊú¨ÁöÑ‰øÆÊîπÂØÜÁ†ÅÊñπÊ≥ïÔºâ ‰øÆÊîπMySQLÂØÜÁ†Å set password for root@localhost = password(&#39;123456&#39;); rootÊòØÁî®Êà∑ÂêçÔºåÂèØËá™ÂÆö‰πâ„ÄÇ ÈÄÄÂá∫‰ΩøÁî®Êñ∞ÂØÜÁ†ÅÈáçÊñ∞ÁôªÂΩï ÈÖçÁΩÆmysqlÔºåÂú®etc/ÁõÆÂΩï‰∏ã,ÁºñËæëÔºà‰∏çÂ≠òÂú®ÂàôÊñ∞Âª∫Ôºâmy.cnfÊñá‰ª∂ÔºåÈáçÂêØMySQL ÈÖçÁΩÆÁî®Êà∑Ôºå‰ΩøÂæórootÁî®Êà∑Âú®Â§ñÁΩë‰πüÂèØ‰ª•ËÆøÈóÆÂà∞mysqlÔºå # mysql -h 127.0.0.1 -u root # mysql&gt;use mysql; # mysql&gt;update user set host = &apos;%&apos; where user =&apos;root&apos;; # mysql&gt;select host, user from user; # mysql&gt;flush privileges; ÈáçÂêØmysqlÊúçÂä° service mysqld restart; mysqlÂºÇÂ∏∏ÈõÜÂêà ËøêË°åÁ®ãÂ∫èmysqlÊä•Èîô (node:6280) UnhandledPromiseRejectionWarning: SequelizeDatabaseError: Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8mb4_unicode_ci,COERCIBLE) forÔºåÂéüÂõ†‰∏∫sequelizeÂàõÂª∫ÁöÑmysqlÈªòËÆ§Â≠óÁ¨¶ÈõÜÊòØ latin1 ËÄå‰∏çÊòØ utf8ÔºåÊõ¥ÊîπÂç≥ÂèØ„ÄÇ rootÁî®Êà∑‰∏¢Â§±Ë°®Áé∞: ËæìÂÖ•ÂØÜÁ†ÅÈ°µÊó†Ê≥ïËÆøÈóÆmysql.userÈáåÈù¢ÔºårootÁî®Êà∑Áî±‰∫éÊú™Áü•ÂéüÂõ†‰∏çÂú®‰∫ÜÔºåÈáçÊñ∞Âª∫Á´ãrootÁî®Êà∑ ÂøΩÁï•ÂØÜÁ†ÅÁôªÂΩï- vim etc/my.cnf skip-grant-tables ÂàõÂª∫rootÁî®Êà∑ create user ‚Äòroot‚Äô@‚Äôlocalhost‚Äô identified by ‚Äò123456‚Äô; Ê≠§Ê≠•È™§ÂèØËÉΩ‰ºöÊä•‰ª•‰∏ãÈîôËØØ: Ê≤°Êä•ÈîôÁöÑË∑≥ËøáÔºàÁõ¥Êé•Âà∞ÊùÉÈôêÈÇ£‰∏ÄÊ≠•ÔºâÔºåÁî®‰ª•‰∏ãÊñπÊ≥ïËß£ÂÜ≥Ôºö ERROR 1290 (HY000): The MySQL server is running with the ‚Äìskip-grant-tables option so it cannot execute this statement Ëß£ÂÜ≥Ôºö flush privileges; ÂÜçÊ¨°ÂàõÂª∫rootÁî®Êà∑ create user ‚Äòroot‚Äô@‚Äôlocalhost‚Äô identified by ‚Äò123456‚Äô; Áî±‰∫éÂèØËÉΩÂ≠òÂú®rootÁî®Êà∑ÔºåÂØºËá¥‰ºöÊä•ÈîôÔºåÂà†Èô§Áî®Êà∑Âú®ÂàõÂª∫ drop user ‚Äòroot‚Äô@‚Äôlocalhost‚Äô;create user ‚Äòroot‚Äô@‚Äôlocalhost‚Äô identified by ‚Äò123456‚Äô; Ëµã‰∫àrootÁî®Êà∑ÂÖ®ÈÉ®ÊùÉÈôê GRANT ALL PRIVILEGES ON . TO ‚Äòroot‚Äô@‚Äô%‚Äô IDENTIFIED BY ‚Äò123456‚Äôflush privileges; 1396 Êä•Èîô flush privileges;drop user ‚Äòdl‚Äô@‚Äô%‚Äô;create user ‚Äòdl‚Äô@‚Äô%‚Äô identified by ‚Äò123‚Äô; nmap‰ΩøÁî®ËØ•ÂëΩ‰ª§Êü•ÁúãÊúçÂä°Âô®ÂºÄÊîæÁöÑÁ´ØÂè£ÔºåÊü•Áúã3306Á´ØÂè£ÊòØÂê¶Èò≤ÁÅ´Â¢ô‰∏≠ÂÖÅËÆ∏ËÆøÈóÆ„ÄÇ yum -y install nmapnmap 192.168.1.56 telnetÊ£ÄÊü•Êàë‰ª¨ÁöÑIPÊòØÂê¶ÂèØ‰ª•pingÂêå ‰æãÂ¶Çtelnet 192.168.157.129 80 Èò≤ÁÅ´Â¢ôÁ´ØÂè£expressÁ®ãÂ∫èÈªòËÆ§ËøêË°åÂú® 3000 Á´ØÂè£Ôºå‰∫ëÊúçÂä°Âô®ÈªòËÆ§ÊòØÊ≤°ÊúâÂºÄÊîæ 3000 Á´ØÂè£ÁöÑÔºåÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®ÂºÄÂêØ 3000 Á´ØÂè£ÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö firewall-cmd --zone=public --add-port=3000/tcp --permanentÈáçÂêØÈò≤ÁÅ´Â¢ôfirewall-cmd --reload Â¶ÇÊä•ÈîôFirewallD is not running,ÂàôÂºÄÂêØÈò≤ÁÅ´Â¢ôsystemctl start firewalld ‰ΩøÁî®nmapÊü•ÁúãÁé∞Âú®ÁöÑÁ´ØÂè£ÊÉÖÂÜµÔºå3000Á´ØÂè£Â∑≤ÁªèÂºÄÂêØ„ÄÇnmap yourIpAddress pm2ËøõÁ®ãÁÆ°ÁêÜÊú¨Âú∞ÊúçÂä°Âú®Êàë‰ª¨ÂÖ≥Èó≠ÂëΩ‰ª§Á™óÂè£Âêé‰ºöÂÅúÊ≠¢ÊúçÂä°Ôºå‰ΩøÁî®pm2 ÁÆ°ÁêÜÊàë‰ª¨ÁöÑÊúçÂä°ÔºåÊú¨Âú∞Ë∞ÉËØïÂ•Ω‰πãÂêé‰º†Âà∞gitÔºåXshell‰∏≠Áõ¥Êé•ÊãâÂèñÊúÄÊñ∞‰ª£Á†ÅÔºåËøõÂÖ•È°πÁõÆÊ†πÁõÆÂΩïÔºå‰ΩøÁî®pm2ÁÆ°ÁêÜËøõÁ®ãÔºåÂç≥‰ΩøÊàë‰ª¨ÂÖ≥Èó≠xshellÔºåÊúçÂä°‰æùÁÑ∂ËøòÂú®Ë∑ë„ÄÇ1„ÄÅpm2ÈúÄË¶ÅÂÖ®Â±ÄÂÆâË£Önpm install -g pm22„ÄÅËøõÂÖ•È°πÁõÆÊ†πÁõÆÂΩï2.1 ÂêØÂä®ËøõÁ®ã/Â∫îÁî® pm2 start bin/www Êàñ pm2 start app.js 2.2 ÈáçÂëΩÂêçËøõÁ®ã/Â∫îÁî® pm2 start app.js ‚Äìname wb123 2.3 Ê∑ªÂä†ËøõÁ®ã/Â∫îÁî® watch pm2 start bin/www ‚Äìwatch 2.4 ÁªìÊùüËøõÁ®ã/Â∫îÁî® pm2 stop wwwb 2.5 ÁªìÊùüÊâÄÊúâËøõÁ®ã/Â∫îÁî® pm2 stop all 2.6 Âà†Èô§ËøõÁ®ã/Â∫îÁî® pm2 delete www 2.7 Âà†Èô§ÊâÄÊúâËøõÁ®ã/Â∫îÁî® pm2 delete all 2.8 ÂàóÂá∫ÊâÄÊúâËøõÁ®ã/Â∫îÁî® pm2 list 2.9 Êü•ÁúãÊüê‰∏™ËøõÁ®ã/Â∫îÁî®ÂÖ∑‰ΩìÊÉÖÂÜµ pm2 describe www 2.10 Êü•ÁúãËøõÁ®ã/Â∫îÁî®ÁöÑËµÑÊ∫êÊ∂àËÄóÊÉÖÂÜµ pm2 monit 2.11 Êü•Áúãpm2ÁöÑÊó•Âøó pm2 logs 2.12 Ëã•Ë¶ÅÊü•ÁúãÊüê‰∏™ËøõÁ®ã/Â∫îÁî®ÁöÑÊó•Âøó,‰ΩøÁî® pm2 logs www 2.13 ÈáçÊñ∞ÂêØÂä®ËøõÁ®ã/Â∫îÁî® pm2 restart www 2.14 ÈáçÊñ∞ÂêØÂä®ÊâÄÊúâËøõÁ®ã/Â∫îÁî® pm2 restart all 2.15 ÁõëÂê¨‰øÆÊîπÔºåËá™Âä®ÈáçÂêØ pm2 start xxx ‚Äìwatch nginx‰ª£ÁêÜÂÆâË£ÖnginxÔºåÈìæÊé•Ôºö https://www.cnblogs.com/shiyuelp/p/11945882.htmlË∑ØÂæÑÔºö /usr/local/nginx/sbinÈÖçÁΩÆÊñá‰ª∂‰øÆÊîπÔºö/usr/local/nginx/configÊ≥®ÊÑèÁÇπÔºö nginxÈªòËÆ§Âú®80Á´ØÂè£ÔºåËÄåÊúçÂä°Âô®ÈªòËÆ§‰∏çÂºÄÊîæ80Á´ØÂè£„ÄÇÈúÄË¶ÅÊâãÂä®ÊâìÂºÄ80Á´ØÂè£„ÄÇÊü•ÁúãnginxÊòØÂê¶ÂêØÂä®ÊàêÂäüÔºö ps aux|grep nginx;Ê£ÄÊü•IPÊòØÂê¶ÂèØ‰ª•pingÈÄöÔºö telnet 106.13.4.74 80ÔºõÂêØÂä®nginxÔºö /usr/local/nginx/sbin/nginxÈáçÂêØnginxÔºö /usr/local/nginx/sbin/nginx -s reopenÂÖ≥Èó≠nginxÔºö /usr/local/nginx/sbin/nginx -s stop ÈÖçÁΩÆÊñá‰ª∂ÂèØ‰ª•Ëá™Â∑±‰øÆÊîπ ÂüüÂêçÊò†Â∞ÑÂüüÂêçÊò†Â∞ÑËøôÂùóÂÖ∂ÂÆûÊ≤°ÂøÖË¶ÅÂçïÁã¨ÂÜç‰π∞‰∏Ä‰∏™ÂüüÂêçÔºåÂ¶ÇÊûúËá™Â∑±ÊúâÂüüÂêçÁöÑËØùÔºåÂèØ‰ª•Áî®‰∏Ä‰∏™‰∫åÁ∫ßÂüüÂêçÊù•‰ª£Êõø„ÄÇËøôÈáå‰ª•ÈòøÈáå‰∫ëÁöÑÂüüÂêç‰∏∫‰æã„ÄÇÂú®ÈòøÈáå‰∫ëÁöÑÂüüÂêçËß£ÊûêËÆæÁΩÆ‰∏≠ÔºåÊ∑ªÂä†‰∏Ä‰∏™ËÆ∞ÂΩïÔºå‰∏ªÊú∫ËÆ∞ÂΩïÈÇ£ÈáåÂ∞±ÊòØÂ°´ÂÜôÊàë‰ª¨‰∫åÁ∫ßÂüüÂêçÁöÑÂú∞ÊñπÔºåËÆ∞ÂΩïÂÄºÂ°´ÂÜôÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÔºåÊ∑ªÂä†ÂÆåÊàêÂêéÂç≥ÂèØ‰ΩøÁî®ÂüüÂêçËÆøÈóÆÊúçÂä°Âô®‰∫Ü„ÄÇÂèØ‰ª•Áõ¥Êé•Âú®ÊµèËßàÂô®ËæìÂÖ•ÂàöÂàöÈÖçÁΩÆ‰∫åÁ∫ßÂüüÂêçÔºåÁúãÁúãÊòØÂê¶ÊúânginxÊ¨¢ËøéÈ°µÂç≥ÂèØ„ÄÇ redis]]></content>
      <categories>
        <category>server</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python-flask]]></title>
    <url>%2F2020%2F06%2F05%2Fflask%2F</url>
    <content type="text"><![CDATA[Base pointpycharm‰∏≠ÊâìÂºÄdebugÊ®°ÂºèÔºöÂú®ÁªàÁ´Ø‰∏≠ËÆæÁΩÆÔºö set FLASK_ENV=development (windows)export FLASK_ENV=developm (mac)flask runÂºÄÂêØdebug‰ºö ÊøÄÊ¥ªË∞ÉËØïÂô®„ÄÇ ÊøÄÊ¥ªËá™Âä®ÈáçËΩΩ„ÄÇ ÊâìÂºÄ Flask Â∫îÁî®ÁöÑË∞ÉËØïÊ®°Âºè„ÄÇ ÂàõÂª∫ËôöÊãüÁéØÂ¢É python -m venv env ÊøÄÊ¥ªËôöÊãüÁéØÂ¢ÉÔºàwinÔºâ $ env\Scripts\activateÁÑ∂ÂêéÂú®ËôöÊãüÁéØÂ¢É‰∏≠ÂÆâË£ÖflaskÁ≠â ‰æùËµñ ÁîüÊàê‰æùËµñÊñá‰ª∂ pip freeze &gt; requirements.txt ÂÆâË£Ö‰æùËµñ pip install -r requirements.txt flask_scriptflaks_scriptÈÄöËøáÂëΩ‰ª§ÁöÑÊñπÂºèÊìç‰ΩúflaskÔºåË∑ëËµ∑Êù•ÂºÄÂèëÁâàÊúçÂä°Âô®„ÄÅËÆæÁΩÆÊï∞ÊçÆÂ∫ìÔºåÂÆöÊó∂‰ªªÂä°Á≠â„ÄÇ 1234567891011121314# manage.pyfrom flask_script import Managerapp = Flask(__name__)manager = Manager(app)def hello(): passmanager.add_command('hello', hello())# Ë£ÖÈ•∞Á¨¶ÂëΩ‰ª§@manager.commanddef hello(): pass ÈÄöËøáËá™ÂÆö‰πâÊñπÊ≥ïÊìç‰ΩúflaskÔºå‰ΩøÁî®ÊñπÊ≥ï‰∏∫Ôºö $ python manage.py hello BlueprintËìùÂõæÊ®°ÂùóÔºåÂ∏ÆÂä©Êàë‰ª¨ÂØπ‰∫éÊï¥‰ΩìÈ°πÁõÆÁöÑÂàÜÂâ≤ÔºåÂà©‰∫éÂêéÁª≠ÁöÑÁÆ°ÁêÜÂíåÊãìÂ±ï„ÄÇ‰∏ªË¶ÅÂàÜ‰∏∫ËÆæÁΩÆËìùÂõæÔºåÊ≥®ÂÜåËìùÂõæÔºåË∑ØÁî±‰ΩøÁî®ËìùÂõæ‰∏âÈÉ®ÂàÜ„ÄÇ 1234567891011121314151617# @/api/user/controllers.pyfrom flask import Blueprint user = Blueprint('user', __name__)"""ÂàõÂª∫Áî®Êà∑"""@user.route('/register', methods= ['get'])def user_register(): pass# @__init__.py def create_app(): app = Falsk(__name__) from om_core.api.user.controllers import user app.register_blueprint(user, url_prefix='/api/users') Ëá≥Ê≠§ÔºåURL‰ΩøÁî® localhost:5000/api/users/register Â∞±ÂèØ‰ª•ËÆøÈóÆÊ≥®ÂÜåË∑ØÁî±„ÄÇ flask-SQLAlchemy Êü•ËØ¢ÁªìÊûú‰∏ÄËà¨‰ΩøÁî®db.session.query()Êù•Êü•ËØ¢ÁªìÊûúÔºåÁªìÊûúËøîÂõû‰∏Ä‰∏™listÔºåÂ§öÊù°Êï∞ÊçÆÂ§ÑÁêÜÈúÄË¶ÅÁî®Âà∞ÈÅçÂéÜÔºåÂçïÊåëÊï∞ÊçÆÂàôÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏ãÊñπÂºèËé∑ÂæóÂÄºÂπ∂ËøîÂõû user = db.session.query(User).filter_by(name=‚Äô‚Äôliming).all() Êï∞ÊçÆÊé•Êî∂ post jsonÊ†ºÂºè data = json.loads(request.get_data(as_text = True))name = data.get(‚Äòname‚Äô) get URLÊãºÊé• param = request.args[‚Äòparam‚Äô] Êñ∞Â¢ûÊï∞ÊçÆÂπ∂Êèê‰∫§Êï∞ÊçÆÂ∫ì user = User(name=‚Äùxxx‚Äù, dender=0)db.session.add(user)db.session.commit() Êõ¥Êñ∞Êï∞ÊçÆ user = db.session.query(User).filter(name=param.get(‚Äòname‚Äô)).first()user.attr = param.get(‚Äòattr‚Äô)db.session.commit() FakerÁîüÊàêÂ§ßÈáèÁöÑÊ®°ÊãüÊï∞ÊçÆ pip install Faker 12345678910111213from faker import Fakerfaker = Faker('zh-CN') # ÈªòËÆ§ÁæéÂõΩfor item in range(100): fname = faker.name() faddress = faker.address() fint = faker.pyint() user = User(name=fname, address=faddress, xxx=fint) db.session.add(user)try: db.session.commit()except: db.session.rollback() flask_restplus pip install flask-restplus from flask_restplus import Api Flask-RESTPlusÊèê‰æõÁöÑ‰∏ªË¶ÅÂàõÂª∫ÂØπË±°Â∞±ÊòØËµÑÊ∫ê„ÄÇËµÑÊ∫êÂàõÂª∫‰∫éFlaskÂèØÊèíÂÖ•ËßÜÂõæÔºàpluggable viewÔºâ‰πã‰∏äÔºå‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂú®ËµÑÊ∫ê‰∏äÂÆö‰πâÊñπÊ≥ïÊù•ÂæàÂÆπÊòìÂú∞ËÆøÈóÆÂ§ö‰∏™HTTPÊñπÊ≥ï„ÄÇ flask_corsËß£ÂÜ≥Ë∑®Âüü from flask_cors import CORS if Config.FLASK_ENV == ‚ÄòDEVELOPMENT‚Äô: CORS(app, supports_credentials=True) namedtuplenamedtupleÊòØÁªßÊâøËá™tupleÁöÑÂ≠êÁ±ª„ÄÇnamedtupleÂàõÂª∫‰∏Ä‰∏™ÂíåtupleÁ±ª‰ººÁöÑÂØπË±°ÔºåËÄå‰∏îÂØπË±°Êã•ÊúâÂèØËÆøÈóÆÁöÑÂ±ûÊÄß„ÄÇ Áî®Êà∑ÊùÉÈôêÁªÜÁ≤íÂ∫¶ÁÆ°ÁêÜÁî®Êà∑ÊùÉÈôêÊòØ‰∏Ä‰∏™Â∏∏ËßÅÁöÑ‰∏öÂä°ÔºåËøôÈáå‰ΩøÁî®scopeÊ®°ÂùóÂú® token ËøõË°åÈ™åËØÅÊó∂Âà§Êñ≠Áî®Êà∑ÁöÑÊé•Âè£ËÆøÈóÆÊùÉÈôêÔºåÂπ∂‰∏îËá™ÂÆö‰πâÁöÑ scope ÂèØ‰ª•ËøõË°åÊùÉÈôêÁöÑÂêàÂπ∂‰∏éÁ≠õÈÄâÔºåËøõË°åÊôÆÈÄöÁî®Êà∑ÂíåÁÆ°ÁêÜÂëòÊùÉÈôêÂå∫ÂàÜ„ÄÇscope Êèê‰æõ‰∏§Â•óÊùÉÈôêÊú∫Âà∂ÔºåapiÁ∫ßÂà´ÂíåËìùÂõæÁ∫ßÂà´ÔºåÁ≤íÂ∫¶Á≤óÁªÜÂèØ‰ª•Ëá™Â∑±ÈÄâÊã©ÔºåÂçÅÂàÜÁÅµÊ¥ª„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596# scope.pyclass Scope: allow_api = [] # api Á∫ßÂà´ÁöÑÊùÉÈôêÊéßÂà∂ Á≤íÂ∫¶ÁªÜ allow_module = [] # ËìùÂõæÁ∫ßÂà´ÊùÉÈôêÊéßÂà∂ Á≤íÂ∫¶Á≤ó forbidden = [] # ÊùÉÈôêÁ≠õÈÄâ def __add__(self, other): # ÁÆ°ÁêÜÂëòÂêàÂπ∂ÊôÆÈÄöÁî®Êà∑ÊùÉÈôê # ËøêÁÆóÁ¨¶ÈáçËΩΩ self.allow_api = self.allow_api + other.allow_api # set ÂéªÈáç self.allow_api = list(set(self.allow_api)) # Á∫¢ÂõæÁ∫ßÂà´ÊùÉÈôêÁõ∏Âä† self.allow_module = self.allow_module + other.allow_module self.allow_module = list(set(self.allow_module)) # ÈÄÜÂêëÁ≠õÈÄâÊùÉÈôê self.forbidden = self.forbidden + other.forbidden self.forbidden = list(set(self.forbidden)) return selfclass UserScope(Scope): allow_api = ['v1.user+get_user'] allow_module = [] forbidden = ['v1.user+super_get_user', 'v1.user+super_delete_user'] def __init__(self): self + AdminScope()class AdminScope(Scope): # allow_api = ['v1.user+super_get_user', # 'v1.user+super_delete_user'] allow_module = ['v1.user'] def __init__(self): # ÊéíÈô§ Á≠õÈÄâËßÜÂõæÂáΩÊï∞ # self + UserScope() pass def is_in_scope(scope, endpoint): # scope() # globals # ÂèçÂ∞Ñ # token ÂÜÖÈÉ®Êê∫Â∏¶ÊùÉÈôêÂèÇÊï∞ÔºåÁõ¥Êé•Âà§Êñ≠ÊùÉÈôê # v1.red_name + view_func scope = globals()[scope]() splits = endpoint.split('+') red_name = splits[0] if endpoint in scope.forbidden: return False if endpoint in scope.allow_api: return True if red_name in scope.allow_module: return True else: return False# token_auth.py from app.libs.scope import is_in_scopeauth = HTTPBasicAuth()User = namedtuple('User', ['uid', 'ac_type', 'scope'])@auth.verify_passworddef verify_password(token, password): user_info = verify_auth_token(token) if not user_info: return False else: g.user = user_info return Truedef verify_auth_token(token): s = Serializer(current_app.config['SECRET_KEY']) try: data = s.loads(token) except BadSignature: raise AuthFailed(msg='token is invalid', error_code=1002) except SignatureExpired: raise AuthFailed(msg='token is expired', error_code=1003) uid = data['uid'] ac_type = data['type'] scope = data['scope'] # ËßÜÂõæÂáΩÊï∞ allow = is_in_scope(scope, request.endpoint) print('È™åËØÅtokenÂèÇÊï∞--', uid, ac_type, scope, request.endpoint) if not allow: # Âú®ËøôÈáåÊã¶Êà™‰∏çÂêåÊùÉÈôêÁî®Êà∑ raise Forbidden() return User(uid, ac_type, scope)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Express]]></title>
    <url>%2F2020%2F05%2F22%2Fexpress%2F</url>
    <content type="text"><![CDATA[expressÊñáÊ°£ Ôºö https://www.expressjs.com.cn/guide/using-middleware.htmlsequelizeÊñáÊ°£: https://github.com/demopark/sequelize-docs-Zh-CN/blob/master/Readme.md ORM(sequelize)ORMÔºàObject Relational MappingÔºâÂØπË±°ÂÖ≥Á≥ªÊò†Â∞ÑÔºåÂáèÂ∞èÊìç‰ΩúÂ±ÇÁöÑ‰ª£Á†ÅÈáèÔºåÁõ¥Êé•Êñπ‰æøÁöÑÊìç‰ΩúÊï∞ÊçÆÂ∫ì„ÄÇ‰ΩøÁî®ÂâçÔºåÁ°Æ‰øùsequelizeÂ∑≤ÁªèÂÆâË£Ö 12npm install --save sequelizenpm install --save mysql2 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127/** path: @src/models/message.js*/var Sequelize = require('sequelize')var sequelize = new Sequelize( 'nodesql', //database name 'root', //database user '123456', //database password &#123; 'dialect': 'mysql', 'host': 'localhost', 'port': 3306 &#125;)//Ë°®Ê®°Âûãvar Message = sequelize.define('message', &#123; id: &#123; type: Sequelize.INTEGER, primaryKey: true, autoIncrement: true, &#125;, userName: &#123; type: Sequelize.STRING(32), &#125;, content: &#123; type: Sequelize.TEXT &#125;&#125;)const User = sequelize.define('user', &#123; id: &#123; type: Sequelize.INTEGER, primaryKey: true, autoIncrement: true, &#125;, userName: &#123; type: Sequelize.STRING(32), &#125;, age: &#123; type: Sequelize.INTEGER &#125;, gender: &#123; type: Sequelize.INTEGER &#125;, address: &#123; type: Sequelize.STRING(32) &#125;&#125;)Message.sync(); //ÂàõÂª∫Ë°®User.sunc()module.exports = &#123;Message, User&#125;;/** path: @src/route/index.js* desc: Âú®Ë∑ØÁî±‰∏≠ÂÆåÊàêÂ¢ûÂà†ÊîπÊü•*/var express = require('express');var router = express.Router();var Message = require('../models/message.js')const setToken = require('../utils/middwares/jwt.js')const &#123;log&#125; = console//REST API//Áî®Êà∑ÁôªÂΩïrouter.post('/login', async (req, res, next) =&gt; &#123; const user = &#123;&#125; let &#123;userName&#125; = req.body let data = await User.findOne(&#123; where: &#123; userName: userName &#125; &#125;) // log('Êü•ËØ¢ÁªìÊûúËøîÂõûÔºö', JSON.stringify(data, null, 2)) if(!data) &#123; //‰∏çÂ≠òÂú®Áî®Êà∑ÂàôÂàõÂª∫Áî®Êà∑ user.userName = userName data = await User.create(user) &#125; setToken.setToken(data.id).then(token =&gt; &#123; //ËøîÂõûÁî®Êà∑‰ø°ÊÅØÂèätoken return res.json(&#123;data: &#123;data, token&#125;&#125;) &#125;)&#125;)//Êü•ÊâæÊüêÂÜÖÂÆπrouter.get('/getOne', (req, res, next) =&gt; &#123; if(!req.data) &#123; return res.json(&#123; msg:'token invalid' &#125;) &#125; Message.findAll().then(data =&gt; &#123; log('Êü•ÊâæÊï∞ÊçÆres', JSON.stringify(data, null, 2)) res.json(&#123; errcode: 0, data &#125;) &#125;)&#125;)//Âà†Èô§‰∏Ä‰∏™Áî®Êà∑router.get('/del_user', async (req, res, next) =&gt; &#123; let &#123;userName&#125; = req.query let result = await User.findOne(&#123; where: &#123;userName,&#125; &#125;) if(!result) &#123; return res.json(&#123;msg: '‰∏çÂ≠òÂú®ËØ•Áî®Êà∑', errcode: 601&#125;) &#125; let data = await result.destroy() return res.json(&#123;msg: 'Âà†Èô§ÊàêÂäü', errcode: 0&#125;)&#125;)//Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØrouter.post('/rich_user_info', async (req, res, next) =&gt; &#123; let data = req.body let result = await User.findOne(&#123; where: &#123;userName: data.userName&#125; &#125;) //Áî®Êï∞ÊçÆË°®ÁöÑresultÂ≠óÊÆµÊù•ÂåπÈÖçÂâçÁ´Ø‰∏ä‰º†ÁöÑÂ≠óÊÆµÔºÅÂâçÁ´ØÈöè‰æø‰º†ÂèÇÔºåÊàëÂè™ËøáÊª§ÊúâÁî®ÁöÑ Object.keys(result.toJSON()).map(item =&gt; &#123; data[item] ? result[item] = data[item] : '' &#125;) await result.save() res.json(&#123;msg: 'succ', data: result&#125;)&#125;) Ëá≥Ê≠§ÔºåÂü∫Êú¨ÁöÑsequlizeÂ∞±ÂèØ‰ª•Ë∑ëËµ∑Êù•‰∫Ü„ÄÇ ÂéüÁîüSQLÊñπÊ≥ïsequelizeÁöÑÁ°ÆÊñπ‰æøÔºå‰ΩÜ‰ªñÁöÑÊü•ËØ¢ËØ≠Âè•ËæÉ‰∏∫ÁπÅÁêêÔºåËøôÈáåÊàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî®ÂéüÁîümysqlËØ≠Âè•„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/*** path: utils/dbConfig.js* Êï∞ÊçÆÂ∫ìÈÖçÁΩÆ*/mysql = &#123; host: 'localhost', user: 'root', password: '123456', database: 'nodesql'&#125;module.exports = mysql;/*** path: @/db.js* ÊâãÂä®ËøûÊé•Êï∞ÊçÆÂ∫ì*/let mysql = require('mysql')let dbConfig = require('./utils/dbConfig')const &#123;log&#125; = consolemodule.exports = &#123; query: function(sql, params, callback) &#123; let conn = mysql.createConnection(dbConfig) conn.connect(function(err) &#123; if(err) &#123; log('Êï∞ÊçÆÂ∫ìËøûÊé•Â§±Ë¥•') throw err &#125; conn.query(sql, params, function(err, res, fields) &#123; if(err) &#123; log('Êï∞ÊçÆÂ∫ìÊìç‰ΩúÂ§±Ë¥•') throw err &#125; callback &amp;&amp; callback(res); conn.end(err =&gt; &#123; if(err) &#123; log('Êï∞ÊçÆÂ∫ìÂÖ≥Èó≠Â§±Ë¥•') throw err &#125; &#125;) &#125;) &#125;) &#125;&#125;/*** path: @/route/index.js* Ë∑ØÁî±‰ΩøÁî®*/router.get('/user', (req, res, next) =&gt; &#123; let &#123;id&#125; = req.query const sql = `select * from user where id = $&#123;id&#125;` //Â§çÊùÇSQLËØ≠Âè• db.query(sql, [], function(result, fields) &#123; let data = JSON.parse(JSON.stringify(result)) data1 = req.requestTime res.json(&#123; status: 0, data, data1 &#125;) &#125;)&#125;) ORMÂíåÂéüÁîüSQLËØ≠Âè•‰πãÈó¥Âπ∂‰∏çÂÜ≤Á™ÅÔºåÂêàÁêÜÈÄâÊã©‰ΩøÁî®Âç≥ÂèØ„ÄÇ‰∏§‰∏™‰∏ÄËµ∑Áî®‰πüÂèØ‰ª• JWTÔºàtokenÈ™åËØÅÔºâjwt(jsonwebtoken)È™åËØÅÔºåÂâçÂêéÁ´ØÈ™åËØÅÁöÑ‰∏ÄÁßçÊñπÊ≥ï„ÄÇexpressÂÆûÁé∞jwtÈ™åËØÅ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119// ÂÆâË£Ö express-jwt$ npm i express-jwt --save /** path: @/util/jwt.js* Â∞ÅË£ÖÂàÜÂèëtokenÂíåÈ™åËØÅtokenÂáΩÊï∞*/var jwt = require('jsonwebtoken');var signkey = 'secret123456'; //ÈöèÊú∫‰∏≤const setToken = function(userid)&#123; return new Promise ((resolve, reject) =&gt; &#123; const token = jwt.sign(&#123; _id: userid &#125;, signkey,&#123; expiresIn:'36h' &#125;); resolve(token); &#125;)&#125;const verToken = function (token) &#123; return new Promise((resolve, reject) =&gt; &#123; var info = jwt.verify(token.split(' ')[1], signkey); if(info) &#123; resolve(info); &#125; else &#123; reject(info) &#125; &#125;)&#125;module.exports = &#123; verToken, setToken,&#125;/*** path: @/routes/index.js* È¶ñÂÖàÂú®loginÊé•Âè£ÂàÜÂèëtoken*/var express = require('express');var router = express.Router();var &#123;Message, User&#125; = require('../models/test.js')const jwt = require('jsonwebtoken')const setToken = require('../utils/middwares/jwt.js')// ÁôªÂΩïapirouter.post('/login', async (req, res, next) =&gt; &#123; const user = &#123;&#125; let &#123;account, password&#125; = req.body //Â∞èÁ®ãÂ∫èËøôÈáåÂ∫îÊé•ÂèócodeÔºåÂéªÊç¢ÂèñopenIDÂ≠òÂÇ® let data = await User.findOne(&#123; where: &#123; account: account, &#125; &#125;) // console.log('Êü•ËØ¢ÁªìÊûúËøîÂõûÔºö', JSON.stringify(data, null, 2)) if(!data) &#123; //‰∏çÂ≠òÂú®ËØ•Áî®Êà∑ÔºåÂàôÂàõÂª∫Áî®Êà∑ user.account = account data = await User.create(user) &#125; setToken.setToken(data.id).then(token =&gt; &#123; return res.json(&#123;data: &#123;data, token&#125;&#125;) &#125;)&#125;)//ËØ∑Ê±ÇÂÜÖÂÆπrouter.get('/getOne', (req, res, next) =&gt; &#123; if(!req.data) &#123; //È™åËØÅtokenÁöÑ‰∏≠Èó¥‰ª∂ÊàêÂäüÂêéÔºåÊääÈ™åËØÅÁªìÊûúÊîæÁΩÆÂú®req.data‰∏≠ return res.json(&#123; msg:'token invalid', errcode: 600, &#125;) &#125; Message.findAll().then(result =&gt; &#123; res.json(&#123; errcode: 0, result, &#125;) &#125;)&#125;)/*** path: @/app.js* ÈÖçÁΩÆtokenÈ™åËØÅ‰∏≠Èó¥‰ª∂*/var jwt = require('jsonwebtoken');var verToken = require('./utils/middwares/jwt.js')app.use(function(req, res, next) &#123; var token = req.headers['authorization'] if(!token) &#123; return next(); &#125; else &#123; verToken.verToken(token).then((data) =&gt; &#123; req.data = data; return next(); &#125;).catch((error)=&gt;&#123; return next(); &#125;) //‰∏ä‰∏∫Â∞ÅË£ÖÊñπÊ≥ï,‰∏ã‰∏∫Áõ¥Êé•Ë∞ÉÁî®,ÈÉΩÂèØ‰ª•‰ΩøÁî® // let info = jwt.verify(token.split(' ')[1], 'secret123456'); // req.data = info; // next() &#125;&#125;)//ËøáÊª§‰∏çÈúÄË¶ÅtokenÁöÑË∑ØÁî±app.use(expressJwt(&#123; secret: 'secret123456' // Á≠æÂêçÁöÑÂØÜÈí• Êàñ PublicKey&#125;).unless(&#123; path: ['/login',] // ÊåáÂÆöË∑ØÂæÑ‰∏çÁªèËøá Token Ëß£Êûê&#125;))//ÂΩìtokenÂ§±ÊïàËøîÂõûÊèêÁ§∫‰ø°ÊÅØapp.use(function(err, req, res, next) &#123; if (err.status == 401) &#123; return res.status(401).send(&#123;msg: 'token invalid'&#125;); &#125;&#125;); Ëá≥Ê≠§ÔºåtokenÈ™åËØÅÂ∞±ÂèØ‰ª•Ë∑ëËµ∑Êù•‰∫Ü„ÄÇÂú®ÂèëÈÄÅhttpÊó∂Ôºåheaders‰∏≠ÈÖçÁΩÆ Authorization: &#39;Bearer ${token}&#39;Âç≥ÂèØÔºåÂΩìÁÑ∂ËøòÂèØ‰ª•ÁªßÁª≠ÂÜçÊ¨°Â∞ÅË£Ö„ÄÇ middare(‰∏≠Èó¥‰ª∂)‰∏≠Èó¥‰ª∂Áî®Êù•Â§ÑÁêÜÂêéÁ´ØÊúçÂä°ÔºåÂØπÂâçÁ´ØÁöÑË∑ØÁî±ËØ∑Ê±ÇËøõË°åËøáÊª§Â§ÑÁêÜ„ÄÇexpressÊú¨Êù•Â∞±ÊòØÊúçÂä°Âä†‰∏≠Èó¥‰ª∂ÁöÑÈõÜÂêàÔºå‰∏çÂêåÁöÑ‰∏≠Èó¥‰ª∂ÊûÑÊàê‰∫ÜÂÆåÊï¥ÁöÑapiÈÄªËæëÂ§ÑÁêÜ„ÄÇÂ∫îÁî®Á∫ß‰∏≠Èó¥‰ª∂ÁªëÂÆöÂú®APPÂÜÖÔºåË∑ØÁî±‰∏≠Èó¥‰ª∂ÁªëÂÆöÂú®Ë∑ØÁî±ÔºåÈô§Ê≠§‰πãÂ§ñÔºåËøòÊúâÂÜÖÁΩÆ‰∏≠Èó¥‰ª∂ÔºåÈîôËØØÂ§ÑÁêÜ‰∏≠Èó¥‰ª∂Á≠â„ÄÇ‰∏çÂ∏¶ÊúâË∑ØÁî±ÈôêÂà∂ÁöÑ‰∏≠Èó¥‰ª∂ÊòØ‰ºöË¢´ÊâÄÊúâË∑ØÁî±ÊâßË°åÁöÑ„ÄÇ 12app.use(middareFun) //ÊâÄÊúâËØ∑Ê±ÇÈÉΩ‰ºöËß¶Âèëapp.use('/user/:id', middareFun) ///userË∑ØÂæÑËØ∑Ê±ÇËß¶Âèë ËøôÈáåÊàë‰ª¨‰ºòÂåñ‰∫Ü‰∏äÈù¢ÁöÑ token È™åËØÅ‰∏≠Èó¥‰ª∂„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/*** path: @/utils/middares/paramsVerify.js*/var verToken = require('./jwt.js')//ËØ∑Ê±ÇÊó∂Èó¥const requestTime = function(req, res, next) &#123; req.requestTime = Date.now() next()&#125;//Ëß£Êûêtokenconst tokenVerify = function(req, res, next) &#123; var token = req.headers['authorization']; if(!token)&#123; return next(); &#125; else &#123; verToken.verToken(token).then((data)=&gt; &#123; req.data = data; return next(); &#125;).catch((error)=&gt;&#123; return next(); &#125;) &#125;&#125;;//ËøôÈáåÂèØ‰ª•‰∏Ä‰∏™‰∏Ä‰∏™ÂØºÂá∫Ôºå‰πüÂèØ‰ª•Áõ¥Êé•ÂÜôÂú®Êï∞ÁªÑÂÜÖÔºåÂØºÂá∫Êï∞ÁªÑÂç≥ÂèØÔºà‰∫åÈÄâ‰∏ÄÔºâ„ÄÇconst middArr = [ requestTime = function() &#123;&#125;, tokenVerify = function() &#123;&#125;,]module.exports = &#123; requestTime, tokenVerify, middArr,&#125;/*** path: @/app.js* ‰∏§ÁßçÊ≥®ÂÜåÊñπÂºè‰∫åÈÄâ‰∏ÄÂç≥ÂèØ*/let paramsVerify = require('./utils/middwares/paramsVerify.js')//1.Ê≥®ÂÜåparamsVerifyÊñá‰ª∂‰∏≠ÊâÄÊúâÁöÑ‰∏≠Èó¥‰ª∂ÔºàÂçï‰∏™ÂØºÂá∫ÂºèÔºâlet middwareArr = []for(let i=0; i&lt;Object.keys(paramsVerify).length; i++) &#123; let item = paramsVerify[Object.keys(paramsVerify)[i]] middwareArr.push(item) //Âπ≤Âòõ‰∏çÁõ¥Êé•ÂØºÂá∫Êï∞ÁªÑ‰∫ÜÔºüÔºÅen //app.use(item) &#125;app.use(middwareArr)//2.ÂØºÂá∫Êï∞ÁªÑÂºèapp.use(paramsVerify.middArr) //ÂÆå‰∫ãÔºå Ëá≥Ê≠§Ôºå‰∏≠Èó¥ÁöÑÂâ•Á¶ª‰ºòÂåñÂÆåÊï¥„ÄÇ Â∞ÅË£ÖlogÂú®Ë∞ÉËØï‰∏≠ÔºåÂèØ‰ª•Â∞ÅË£Ö‰∏Ä‰∏™logÁî®Êù•Êõø‰ª£ console.log 123456789101112131415161718192021222324252627282930/*** path: @/utils/log.js**/Date.prototype.Format = function (fmt) &#123;var o = &#123; "M+": this.getMonth() + 1, "d+": this.getDate(), "h+": this.getHours(), "m+": this.getMinutes(), "s+": this.getSeconds(), "q+": Math.floor((this.getMonth() + 3) / 3), "S": this.getMilliseconds()&#125;;if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));for (var k in o) if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));return fmt;&#125;function log() &#123; const show = true //‰πüÂèØ‰ª•ÂíåÂºÄÂèëÁéØÂ¢ÉÊåÇÈí©ÊéßÂà∂Êó•ÂøóËæìÂá∫ if (show) &#123; console.log(`[$&#123;new Date().Format("yyyy-MM-dd hh:mm:ss")&#125;] `, ...arguments) &#125;&#125;module.exports = log Ë∑®ÂüüÂú®Êê≠Âª∫ÂÆåÂêéÁ´ØapiÂêéÔºåÈúÄË¶ÅÂú®ÂâçÁ´ØË∞ÉËØï„ÄÇÊó†ËÆ∫ÊòØÂ∞èÁ®ãÂ∫èËøòÊòØvueÁöÑwebapp,ËÆøÈóÆÊú¨Âú∞ËøûÊé•‰ºöÂá∫Áé∞Ë∑®ÂüüÈóÆÈ¢òÔºàÂ∞èÁ®ãÂ∫èÂæóÂú®ÂºÄÂèëÂ∑•ÂÖ∑‰∏äÂÖ≥Èó≠ÂüüÂêçÊ£ÄÊµãÔºåÂ∞èÁ®ãÂ∫èÈªòËÆ§httpsÔºâÔºåÂ¶ÇÂõæÔºöÊ≠§Êó∂ÈúÄË¶ÅÂú®app.jsÂÜÖÂä†ÂÖ•ÂÖÅËÆ∏Ë∑®ÂüüËÆøÈóÆ 123456789101112131415161718192021222324252627282930313233/** desc: ‰ª•‰∏ãË∑®Âüü‰ª£Á†ÅÊú™Â§ÑÁêÜ OPTION ÂΩ¢ÂºèÔºåÂú®request‰∏çÊê∫Â∏¶Ëá™ÂÆö‰πâÂèÇÊï∞Â¶Ç token Á≠âheadersÂÜÖÁöÑÈÖçÁΩÆÊó∂ÔºåÊòØÂèØ‰ª•Ë∑ëËµ∑Êù•ÁöÑÔºå‰∏ÄÊó¶Âú®requestÂÜÖËÆæÁΩÆheadersÂÜÖÂÆπÔºåËØ∑Ê±Ç‰ºöË¢´ OPTION ÊåÇËµ∑ÔºåË∑®ÂüüÂ§±Ë¥•ÔºÅ*///ËÆæÁΩÆÂÖÅËÆ∏Ë∑®ÂüüËÆøÈóÆËØ•ÊúçÂä°.ÔºàÊ≠§‰ª£Á†Å‰∏∫ÂùëÔºâapp.all('*', function (req, res, next) &#123; res.header('Access-Control-Allow-Origin', '*'); //Access-Control-Allow-Headers ,ÂèØÊ†πÊçÆÊµèËßàÂô®ÁöÑF12Êü•Áúã,ÊääÂØπÂ∫îÁöÑÁ≤òË¥¥Âú®ËøôÈáåÂ∞±Ë°å res.header('Access-Control-Allow-Headers', 'Content-Type'); res.header('Access-Control-Allow-Methods', '*'); res.header('Content-Type', 'application/json;charset=utf-8'); next();&#125;)/** desc: Ë∑®Âüü* desc: Â§ßËÉÜcopy* path: @/app.js*/app.use((req, res, next) =&gt; &#123; // ËÆæÁΩÆÊòØÂê¶ËøêË°åÂÆ¢Êà∑Á´ØËÆæÁΩÆ withCredentials // Âç≥Âú®‰∏çÂêåÂüüÂêç‰∏ãÂèëÂá∫ÁöÑËØ∑Ê±Ç‰πüÂèØ‰ª•Êê∫Â∏¶ cookie res.header("Access-Control-Allow-Credentials",true) // Á¨¨‰∫å‰∏™ÂèÇÊï∞Ë°®Á§∫ÂÖÅËÆ∏Ë∑®ÂüüÁöÑÂüüÂêçÔºå* ‰ª£Ë°®ÊâÄÊúâÂüüÂêç res.header('Access-Control-Allow-Origin', '*') res.header('Access-Control-Allow-Methods', 'GET, PUT, POST, OPTIONS') // ÂÖÅËÆ∏ÁöÑ http ËØ∑Ê±ÇÁöÑÊñπÊ≥ï // ÂÖÅËÆ∏ÂâçÂè∞Ëé∑ÂæóÁöÑÈô§ Cache-Control„ÄÅContent-Language„ÄÅContent-Type„ÄÅExpires„ÄÅLast-Modified„ÄÅPragma ËøôÂá†Âº†Âü∫Êú¨ÂìçÂ∫îÂ§¥‰πãÂ§ñÁöÑÂìçÂ∫îÂ§¥ res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With') if (req.method == 'OPTIONS') &#123; res.sendStatus(200) &#125; else &#123; next() &#125;&#125;) Ê≠§Êó∂ÔºåÊàë‰ª¨ÁöÑvueÂâçÁ´Ø‰ΩøÁî®axiosÊê∫Â∏¶tokenÂ∞±ÂèØ‰ª•ËØ∑Ê±ÇÂà∞ÊúçÂä°Á´ØÊé•Âè£‰∫Ü morganÊó•ÂøóÊó•ÂøóÔºåËÆ∞ÂΩïÊúçÂä°Âô®ÁöÑÊìç‰ΩúË°å‰∏∫ÔºåËøôÈáå‰ΩøÁî® morgan ÊääÊó•ÂøóËÆ∞ÂΩïÂú®Êú¨Âú∞Êñá‰ª∂‰øùÂ≠ò„ÄÇ /** * path: @/utils/morgan.js * desc: Â∞ÅË£Ö‰∏Ä‰∏™morgan */ var path = require('path'); var fs = require('fs') var morgan = require('morgan'); var FileStreamRotator = require('file-stream-rotator') var logDirectory = path.join(__dirname, 'log') fs.existsSync(logDirectory) || fs.mkdirSync(logDirectory) morgan.token('timeStamp', function(req, res){ let date = new Date() let logHour = date.getHours() &lt; 10 ? `0${date.getHours()}` : date.getHours() let logMinute = date.getMinutes() &lt; 10 ? `0${date.getMinutes()}` : date.getMinutes() let logSecond = date.getSeconds() &lt; 10 ? `0${date.getSeconds()}` : date.getSeconds() let logDate = `${logHour}:${logMinute}:${logSecond}` return logDate }); // Ëá™ÂÆö‰πâformatÔºåÂÖ∂‰∏≠ÂåÖÂê´Ëá™ÂÆö‰πâÁöÑtoken morgan.format('joke', '[joke :timeStamp] :remote-addr :remote-user :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'); // create a rotating write stream var accessLogStream = FileStreamRotator.getStream({ date_format: 'YYYYMMDD', filename: path.join(logDirectory, 'access-%DATE%.log'), frequency: 'daily', verbose: false }) module.exports = {morgan, accessLogStream} /* * path: @/app * ÂºïÁî®Ëøô‰∏™Êó•ÂøóÁ≥ªÁªü */ app.use(morgan('joke')); //ÊúçÂä°Âô®ËæìÂÖ•ÂÆûÊó∂Êó•Âøó app.use(morgan('short', {stream: accessLogStream})); //ËÆ∞ÂΩïÊó•ÂøóÂú®Êñá‰ª∂‰∏≠ Ëá≥Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•Âú® /utils Ë∑ØÂæÑ‰∏ãÁúãÂà∞ÂàõÂª∫ÁöÑ log Êñá‰ª∂Â§πÔºåÊó•ÂøóÂ∑≤ÁªèÊ†πÊçÆ file-stream-rotator Êèí‰ª∂ÂÅö‰∫ÜÂàÜÂâ≤ÔºåÊØè‰∏ÄÂ§©ÁöÑÊó•ÂøóÈõÜÁ∫¶Âú®‰∏Ä‰∏™Êñá‰ª∂„ÄÇ‰ª•Èò≤Êó•ÂøóËøáÂ§öÂØºËá¥Ê∑∑‰π±„ÄÇ Êú¨È°πÁõÆgitÂú∞ÂùÄÂú®ËøôÈáå, Ê¨¢Ëøéstar Êú¨È°πÁõÆÈÉ®ÁΩ≤ÊúçÂä°Âô®ÊñáÊ°£Âú®ËøôÈáå]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue-wx-h5]]></title>
    <url>%2F2019%2F12%2F30%2Fvue-wx-h5%2F</url>
    <content type="text"><![CDATA[ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÊÄªÁªìÁî±‰∫éÂæÆ‰ø°ÁöÑÁ∫¶ÂÆöÔºåÂú®iosÁ´ØÊó†Ê≥ïË¥≠‰π∞ËôöÊãü‰∫ßÂìÅÔºåÂÆâÂçìÂàôÊ≤°ÊúâÈôêÂà∂„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥iosÁî®Êà∑‰πüÂèØ‰ª•‰∫´ÂèóË¥≠‰π∞ËôöÊãüÊúçÂä°ÁöÑÈóÆÈ¢òÔºåÂèØÈÄÇÁî®ÂÖ¨‰ºóÂè∑H5ÊîØ‰ªòÊù•Ëß£ÂÜ≥iosÁ´ØÊîØ‰ªòÈóÆÈ¢ò ÂáÜÂ§áÁî±‰∫é‰ªÖ‰ªÖÊòØ‰∏∫iosÁî®Êà∑Ëß£ÂÜ≥ÊîØ‰ªòÈóÆÈ¢òÔºåÊïÖÊ≠§H5È°µÈù¢ÂÜÖÂÆπÂæàÁÆÄÂçïÔºåÁôªÂΩï„ÄÅÊãâÂèñÊîØ‰ªòÂàóË°®„ÄÅÊîØ‰ªòÂç≥ÂèØ„ÄÇH5ÈááÁî®vue+jqÂÆûÁé∞ÔºåÊú™ÈÄÇÁî®vue-cli„ÄÇÔºàÂ∞±‰ø©È°µÈù¢ÔºåÊ≤°ÂøÖË¶ÅÔºâ„ÄÇÈ°µÈù¢ÁªìÊûÑÂ¶Ç‰∏ãÔºö Èâ¥ÊùÉÈúÄÊ±ÇÈâ¥ÊùÉÔºåÊòØÂæÆ‰ø°Êèê‰æõÁöÑH5ÊéàÊùÉÊñπÂºèÔºå‰∏ÄËà¨ÈááÁî®Á¨¨‰∏âÊñπÊéàÊùÉÔºåÊéàÊùÉÊàêÂäüËé∑ÂèñcodeÔºåÁî®codeËé∑Âèñacces_token„ÄÅunionIDÁ≠âÔºåÁî±‰∫éH5ÊòØÂ∞èÁ®ãÂ∫èiosÊîØ‰ªòÁöÑÂª∂‰º∏ÔºåÊïÖÊ≠§ÈúÄË¶ÅunionIDÊù•Âà§Êñ≠Áî®Êà∑ÂîØ‰∏ÄÊÄßÔºÅÈâ¥ÊùÉÂøÖ‰∏çÂèØÂ∞ë„ÄÇindex.htmlÊñá‰ª∂‰∏≠È¶ñÂÖàÂØºÂÖ•jsapi Èâ¥ÊùÉÁΩëÈ°µÊéàÊùÉ‰∏éÂ∞èÁ®ãÂ∫è‰∏çÂêåÔºåÁΩëÈ°µÊòØÁ¨¨‰∏âÊñπÁΩëÈ°µÊéàÊùÉÔºåÁÑ∂ÂêéÊéàÊùÉ‰ø°ÊÅØÂú®ÈáçÂÆöÂêëÈìæÊé•‰∏≠Ôºàredirect_uriÔºâËøîÂõûÔºåÈáçÂÆöÂêëÈìæÊé•ÊàëËÆæÁΩÆ‰∏∫index.htmlÈ°µÈù¢„ÄÇÂú® createdÔºàÔºâ Èí©Â≠ê‰∏≠ÔºåÂéªÈâ¥ÊùÉËé∑Âèñcode 123456789101112131415161718192021222324252627282930313233created: function() &#123; const token = window.sessionStorage.getItem('token') //Ëß£ÂÜ≥Âà∑Êñ∞ÈóÆÈ¢ò if(token) &#123; this.getCircleList() return &#125; let c = this.getQueryCode('code') this.code = c if(this.code) &#123; this.postData(c) &#125; else &#123; this.getUserCode() &#125; &#125;,//Èâ¥ÊùÉgetUserCode() &#123; let redirect_uri = 'http://test.********.cn/projectName/' redirect_uri = encodeURI(redirect_uri) let url = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=$&#123;this.appId&#125;&amp;redirect_uri=$&#123;redirect_uri&#125;&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirec` window.location.href = url&#125;,//Ëé∑ÂèñÈâ¥ÊùÉÊàêÂäüÂêécodegetQueryCode(variable) &#123; let query = window.location.search.substring(1) let v = query.split("&amp;") for(let i = 0; i &lt; v.length; i++) &#123; let pair = v[i].split('=') if(pair[0] == variable) &#123; return pair[1] &#125; &#125; return null&#125;, ÈáçÁÇπÂú®‰∫é getUserCode Èâ¥ÊùÉÂáΩÊï∞,Êúâ‰∫∫‰ºöÂú®Èâ¥ÊùÉÈìæÊé•ÂêéÈù¢ÂÜçÂä†‰∏Ä‰∏™ÂèÇÊï∞Ôºö&amp;connect_redirect=1 ÊàëÁ¨¨‰∏ÄÊ¨°‰ΩøÁî®ÁöÑÈìæÊé•Â∞±ÊòØÂä†‰∫ÜËØ•ÂèÇÊï∞ÁöÑÔºåÊàëÂè™ÊõøÊç¢‰∫ÜAPPIDÂíåÈáçÂÆöÂêëÂú∞ÂùÄÔºåÁªìÊûú‰∏ÄÁõ¥Êä•ÈîôÔºåÂùëË¥ß„ÄÇÁ¨¨‰∫åÔºåÈáçÂÆöÂêëÈìæÊé•‰∏çËÉΩÊòØÊú¨Âú∞ËøûÊé•ÔºåÂæóÊòØÂ§ñÁΩëÂèØ‰ª•ËÆøÈóÆÁöÑÈìæÊé•„ÄÇ ÊîØ‰ªòÈ°µÈù¢‰∏≠ÁÇπÂáªÂçï‰∏™ÂïÜÂìÅÔºåËøõË°åÊîØ‰ªòË¥≠‰π∞„ÄÇÂÖ∑‰ΩìÁöÑÊîØ‰ªòËøáÁ®ãÂíåÂ∞èÁ®ãÂ∫èÊîØ‰ªò‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáËøôÈáåÂ§ö‰∫Üwx.config ÁöÑÂ∫îÁî®„ÄÇ 1234567891011121314151617181920212223242526272829303132333435wx.config(&#123; debug: false, appId: that.appId, timestamp: timeStamp1, nonceStr, signature, jsApiList: ['chooseWXPay'] &#125;)wx.ready(function() &#123; wx.chooseWXPay(&#123; timestamp: timeStamp1, nonceStr, package: package1, signType, paySign, success: function (res) &#123; that.showSuccTip = true that.clickStatus = true that.getCircleList() setTimeout(() =&gt; &#123; that.showSuccTip = false &#125;, 1000*3) &#125;, cancel() &#123; that.clickStatus = true &#125;, fail(res) &#123; alert('ÊîØ‰ªòÂ§±Ë¥•,Á®çÂÄôÂÜçËØï') that.clickStatus = true &#125;, &#125;); &#125;)wx.error(function(res) &#123; console.log('config error : ', res)&#125;) È°µÈù¢ÈÄö‰ø° - ajaxÊ≤°Êúâ‰ΩøÁî®axios,‰ΩøÁî®ajaxÈÄö‰ø°ÔºåÂ∞ÅË£ÖajaxÈÄö‰ø° 123456789101112131415161718192021222324httpAjax (obj) &#123; $.ajax(&#123; url: obj.url, data: obj.data &amp;&amp; obj.type === "POST" ? JSON.stringify(obj.data) : obj.data, type: obj.type ? obj.type : 'GET', contentType: 'application/json', beforeSend: function(xhr) &#123; if (obj.token) &#123; xhr.setRequestHeader('Authorization', '******** ' + obj.token); &#125; &#125;, dataType: 'json', success: function (res) &#123; if (typeof obj.success === 'function') &#123; obj.success(res) &#125; &#125;, error: function (res) &#123; if (typeof obj.error === 'function') &#123; obj.error(res) &#125; &#125; &#125;)&#125;, È°µÈù¢ÊïàÊûúËøô‰∏™ÊïàÊûúÔºåÊÉ≥Âà∞‰∫Ü‰ΩøÁî®jqËß£ÂÜ≥ÔºåvueÂèØËÉΩÊúâÊõ¥ÁÆÄÂçïÁöÑÊñπÊ≥ïÔºå‰ΩÜÊ≤°ËØïËøáÔºÅ 123456789101112131415161718data: &#123; clickId: 0, &#125;//ÂàóË°®ÊåâÈíÆÊê∫Â∏¶Ëá™Ë∫´idshowDetail(id) &#123; if(id == this.clickId) return $('#'+this.clickId).addClass('contentBox') $('#'+id).removeClass('contentBox') $('#'+id).find("[name='bigCircle']").removeClass('greyLine') $('#'+this.clickId).find("[name='bigCircle']").addClass('greyLine') $('#'+id).find("[name='smallCircle']").addClass('hited') $('#'+this.clickId).find("[name='smallCircle']").removeClass('hited') this.clickId = id&#125;, ÈááÂùëÊùÇË∞àÂùëÁúüÁöÑÊúâÁÇπÂ§öÔºåÂ∞§ÂÖ∂ÊòØÁ¨¨‰∏ÄÊ¨°ÊêûÂæóËØù„ÄÇÂêÑÁßçÈÖçÁΩÆÊñá‰ª∂„ÄÅÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÈáåÈù¢ÁöÑÁôΩÂêçÂçïÔºåÂÆâÂÖ®ÂüüÂêçÈÖçÁΩÆÁ≠âÁ≠âÔºåtokenÁöÑ‰º†ÈÄíÂùë‰∫ÜÂ•Ω‰πÖÔºåË∑®ÂüüÔºåÊ≤°Áî®vue-cli ÔºåÊâìÂºÄÈ°µÈù¢‰∏çËÉΩÂè≥ÂáªÊâìÂºÄÊµèËßàÂô®È¢ÑËßàÔºå‰ΩøÁî® anywhere Êèí‰ª∂Êù•ÊääË∑ØÂæÑËΩ¨Âåñ‰∏∫ http/HTTPSÈìæÊé•ÔºåÂêéÊúüÊµãËØïÁõ¥Êé•ÊääÊñá‰ª∂ÊãâÂÄíxshellÊúçÂä°Âô®ÈáåÈù¢ÂéªÊµãÔºåË¶Å‰∏çGitÂàÜÊîØË¢´Ê±°ÊüìÁöÑ‰∏çÂøçÁõ¥ËßÜ„ÄÇ iosÂÖºÂÆπiosÁ´ØÁî®Êà∑ÊîØ‰ªòÊàêÂäüÂõûË∞ÉÂáΩÊï∞ÈáåÈù¢ alert Âπ∂‰∏ç‰ºöË¢´ÊâßË°åÔºåAndroidÂàôÊó†ÂΩ±Âìç„ÄÇÊâÄ‰ª•ÊîØ‰ªòÊàêÂäüÁöÑÊèêÁ§∫Ëá™Â∑±ÂÜô‰∏Ä‰∏™ alert Â∞±ÂèØ‰ª•„ÄÇ Âà∑Êñ∞ÈÉΩÂø´‰∏äÁ∫ø‰∫ÜÔºå‰∫ßÂìÅËøõÂÖ•ÁÇπ‰∫Ü‰∏Ä‰∏™Âà∑Êñ∞ÔºåÈ°µÈù¢Âç°Ê≠ªÊä•ÈîôÔºÅÂéüÂõ†ÊòØÈâ¥ÊùÉËøîÂõûÁöÑ code ‰∏ÄÊ¨°ÊÄßÊúâÊïàÔºÅÔºåÂà∑Êñ∞Êó∂ÔºåÈìæÊé•ÂÖ∂ÂÆûÊ≤°ÂèòÔºå‰ΩÜÊòØcodeÂ∑≤ÁªèËøáÊúü‰∫Ü„ÄÇËß£ÂÜ≥Ôºö È°µÈù¢Âà∑Êñ∞‰∏çÂΩ±ÂìçÈÄªËæëÔºåÊ≠§Êó∂Êàë‰ª¨Âè™ÈúÄË¶ÅtokenÂç≥ÂèØÔºåÊïÖÊ≠§ÊäätokenÂ≠òÂÇ®Âú®sessionStorage ÈáåÈù¢Âç≥ÂèØÈÅøÂÖçÈ°µÈù¢Âà∑Êñ∞ÈóÆÈ¢ò„ÄÇ]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[wepy-Â∞ÅË£Ö]]></title>
    <url>%2F2019%2F12%2F16%2Fwepy-wxminiPro%2F</url>
    <content type="text"><![CDATA[requestÂ∞ÅË£ÖÁõÆÂΩïÁªìÊûÑÔºö ÁõÆÂΩïÔºö /utils/base.js 123456789101112131415161718192021222324252627282930313233343536373839404142import wepy from 'wepy'import qiniuyun = from '@/utils/qiniuUploader'const dev = falseconst baseUrl = dev ? 'https://xxxx' : 'https://test/xxx'//‰∏ä‰º†ÂõæÁâáÔºö const uploadImg = (imageURL, uptokenURL) &#123; return new Promise((resolve, reject) =&gt; &#123; qiniuyun.upload(imageURL, res =&gt; &#123; resolve(res) &#125;, error =&gt; &#123; reject(error) &#125;, &#123; region: 'ECN', domain: 'https://xxxx', uptoken: uptokenURL &#125;) &#125;) &#125;//ËØ∑Ê±ÇÂ∞ÅË£Öconst wxRequest = async (params = &#123;&#125;, url, method,) =&gt; &#123; let token = params.token || '' if(params.getToken) &#123; token = wepy,getStorageSync('token') &#125; let res = await wepy.request(&#123; url, method: methos || 'GET', data: params.data || &#123;&#125;, header: Object.assign(&#123; 'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': `str**Token $&#123;token&#125;` &#125;, params.header || &#123;&#125;) &#125;) return res&#125;module.exports = &#123; wxRequest, baseUrl, uploadImg,&#125;; Âú® base.js ‰∏≠Â∞ÅË£ÖËØ∑Ê±ÇÔºåÂú®apiÊñá‰ª∂‰∏≠ÂàôÂèØ‰ª•Áõ¥Êé•ÊãøÊù•‰ΩøÁî®ÁõÆÂΩïÔºö utils/api.js 12345678910import base from '@/utils/base'//ÁôªÂΩï„ÄÅËé∑ÂèñÂü∫Êú¨‰ø°ÊÅØconst login = (params) =&gt; base.wxRequest(params, `$&#123;base.baseUrl&#125;/login/`, 'POST')const getUserInfo = (params) =&gt; base.wxRequest(params, `$&#123;base.baseUrl&#125;/user/`,)module.exports = &#123; login, getBaseInfo,&#125; Áªü‰∏ÄÁÆ°ÁêÜÁª¥Êä§ÊâÄÊúâÁöÑÊé•Âè£apiÔºå Âú®È°µÈù¢‰∏≠ÔºåÁõ¥Êé•‰ΩøÁî®ÂÖ∑‰ΩìÁöÑapi 1234567891011121314151617181920212223242526272829/** src/pages/index.wpy*/import api from '@/utils/api'//Ëé∑ÂèñÁî®Êà∑Âü∫Êú¨‰ø°ÊÅØonShow() &#123; this.getUserInfo(params)&#125;//Â∏¶ÂèÇÊï∞ÔºåÂêåÊ≠•ÂÜôÊ≥ïgetUserInfo(params) &#123; api.getUserInfo(&#123; data: &#123; data: data1 &#125;, getToken: true &#125;).then(res =&gt; &#123; const data = res.data ... this.$apply() &#125;)&#125;//‰∏çÂ∏¶ÂèÇÊï∞ÔºåÂºÇÊ≠•ÂÜôÊ≥ïasync getUserInfo() &#123; let res = await api.getUserInfo(&#123;getToken: true&#125;) if(res.statusCode === 200) &#123; //doSth &#125;&#125; MixinsÊèêÂá∫ÂÖ¨ÂÖ±ÊñπÊ≥ïÔºåÊñπ‰æøÂÖ®Â±ÄË∞ÉÁî® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121/**path: scr/mixins/common*name: common*/import wepy from 'wepy'export default class commonMixins extends wepy.mixins &#123; //Êú¨Âú∞Â≠òÂÇ® saveData (k, v) &#123; wepy.setStorage(&#123; key: k, value: v &#125;) &#125; saveDataS(k, v)&#123; wepy.setStorageSync(k, v || '') &#125; getDataS(k)&#123; let res = wepy.getStorageSync(k); return res &#125; // ÂõæÁâáÈ¢ÑËßà preImg(c, u)&#123; wepy.previewImage(&#123; current: c, urls: u &#125;) &#125; // ÊèêÁ§∫Ê°Ü toast(title,icon,dura)&#123; wepy.showToast(&#123; title: title, icon: icon, duration: dura || 1500 &#125;) &#125; //È°µÈù¢ÊªöÂä® pageScro(num)&#123; wepy.pageScrollTo(&#123; scrollTop: num, duration: 0 &#125;); &#125; // È°µÈù¢Ë∑≥ËΩ¨ nav(url)&#123; this.$navigate(&#123; url: url &#125;) &#125; swi(url)&#123; wepy.switchTab(&#123; url: url &#125;) &#125; log() &#123; const show = true if (show) &#123; console.log(`[$&#123;new Date().Format("yyyy-MM-dd hh:mm:ss")&#125;] `, ...arguments) &#125; &#125; // ÂèëÈÄÅformid(Â∑≤Â∫üÂºÉ) postFormId(id)&#123; let arr = wepy.getStorageSync('form_ids') || []; arr.push(id); wepy.setStorageSync('form_ids', arr) &#125; // showModal modal(data) &#123; wx.showModal(&#123; content: data.content, showCancel: data.cancel || false, confirmText: data.confirm || 'Áü•ÈÅì‰∫Ü', &#125;) &#125; //Á≤òË¥¥Êùø setClipboardData(data, succFun) &#123; wx.setClipboardData(&#123; data: 'data', success(res) &#123; wx.getClipboardData(&#123; success (res) &#123; succFun &#125; &#125;) &#125; &#125;) &#125; // È°µÈù¢È°∂ÈÉ®title setNavTitle(title) &#123; wx.setNavigationBarTitle(&#123; title: title &#125;) &#125; //Ë∑≥ËΩ¨Â∞èÁ®ãÂ∫è navToMini(appId) &#123; wx.navigateToMiniProgram(&#123; appId, &#125;) &#125; //Âä†ËΩΩÊ°Ü loading(title) &#123; wx.showLoading(&#123; title: title || "Âä†ËΩΩ‰∏≠..." &#125;) &#125; //ÈöêËóèÂä†ËΩΩÊ°Ü hideLoading() &#123; wx.hideLoading(&#123;&#125;) &#125; //bannerË∑≥ËΩ¨ bannerJump(url) &#123; if(url.slogan == 1) &#123; this.swi(url.autoResponse1) return &#125; this.nav(url.autoResponse1) &#125; //ËøîÂõû‰∏ä‰∏Ä‰∏™È°µÈù¢ navBack() &#123; wx.navigateBack(&#123;&#125;) &#125;&#125; ‰ΩøÁî®mixins ÔºåÂú®È°µÈù¢‰∏≠ÂºïÂÖ•Ôºåconfig‰∏≠Â£∞ÊòéÔºåÂç≥ÂèØÂú®È°µÈù¢‰ΩøÁî® this Ë∞ÉÁî® 12345import commonMixin from '@/mixins/common'import req from '@/mixins/req' //È°µÈù¢ÈÖçÁΩÆ‰∏≠Ôºö mixins = [commonMixin, req] Â∏∏ÈáèÈÖçÁΩÆÊï∞ÊçÆÂâçÁ´ØÈÖçÁΩÆÊï∞ÊçÆÊäΩÁ¶ªÂá∫Êù•ÂçïÁã¨ÊîæÔºå‰æø‰∫éÁª¥Êä§„ÄÇ 12345678910111213141516171819202122232425262728/***path: src/utils/configData.js*/const education = [ 'È´ò‰∏≠Âèä‰ª•‰∏ã', '‰∏ìÁßë', 'Êú¨Áßë', 'Á°ïÂ£´', 'ÂçöÂ£´',]//ÂæÆ‰ø°Âè∑Á†ÅÊ≠£Âàôconst wxreg=/^[a-zA-Z]&#123;1&#125;[-_a-zA-Z0-9]&#123;5,19&#125;$/;// bannerËΩÆÊí≠ÈÖçÁΩÆconst swiperConfig = &#123; autoplay: true, interval: 3500, duration: 500, circular: true, indicatorDdots: true, indicatorColor: 'rgba(255,255,255,1)', indicatorActiveColor: '#FF8356',&#125;module.export = &#123; education, wxreg, swiperConfig,&#125; ÂàÜÂåÖÂ∞èÁ®ãÂ∫èÊú™Ë∂ÖËøá2MÂ§ßÂ∞èÔºåÊó†ÈúÄÂàÜÂåÖ„ÄÇË∂ÖËøá2MÔºåÂàôÈááÁî®ÂàÜÂåÖÔºåÂçïÂåÖ‰∏çË∂ÖËøá2MÔºåÊÄªËÆ°‰∏çË∂ÖËøá16M„ÄÇ ÂàÜ‰∫´ÊôÆÈÄöÂàÜ‰∫´Áï•Ëøá„ÄÇÂ∏¶shareTicketÁöÑÂàÜ‰∫´Ôºå‰∏îÈúÄË¶ÅËÆ∞ÂΩïÂàÜ‰∫´Áæ§ÁöÑ‰ø°ÊÅØÊó∂Ôºö 12345678910111213141516171819/**path: src/app.wpy**/async onShow(ops) &#123; const that = this; // Âà§Êñ≠ÊòØÂê¶ÊòØÁæ§ÁÇπÂáªËøõÂÖ• console.log('APP show : ', ops) that.scene = ops.scene; if (ops.scene === 1044 &amp;&amp; ops.shareTicket !== undefined)&#123; that.shareTicket = ops.shareTicket; &#125;&#125;//È°µÈù¢async onShow() &#123; if(that.$parent.scene === 1044)&#123; await that.touchGroup(); &#125;&#125; Áî±ÂàÜ‰∫´ËøõÂÖ•Â∞èÁ®ãÂ∫èÊüê‰∏™È°µÈù¢ÔºåÈúÄÂÖàÂà§Êñ≠ÁºìÂ≠ò‰∏≠ÊòØÂê¶Â≠òÂú® token Ôºå Ëã•‰∏çÂ≠òÂú® token Ôºå ÂàôÂÖàËØ∑Ê±ÇÁôªÂΩïÊé•Âè£ÔºåÂà∞ÂêéÁ´ØÊç¢Âèñ token Ôºå ÂÜçËØ∑Ê±ÇÂÖ∂‰ªñapi „ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//ÊüêÂàÜ‰∫´ÈìæÊé•ËøõÂÖ•ÁöÑÈ°µÈù¢async onShow() &#123; const that = this if( !wepy.getStorageSync('token')) &#123; await that.getLogin() &#125; that.getUserInfo()&#125;//mixins - reqasync getLogin()&#123; await wepy.login().then(async (res) =&gt; &#123; let result = await this.timeOut(circleApi.login(&#123; data: &#123; app_id: this.$parent.globalData.appId, code: res.code &#125; &#125;)); if(res.statusCode === 200)&#123; wepy.setStorage(&#123; key: "token", data: res.data.token &#125;) wepy.setStorage(&#123; key: 'user_id', data: res.data.user_id &#125;) &#125; &#125;)&#125;//Ë∂ÖÊó∂Â§ÑÁêÜasync timeOut(fn)&#123; let that = this; let res = await Promise.race([this.test(), fn]).then((data) =&gt; &#123; return data &#125;); if(res === 'timeOut')&#123; that.toast('ËØ∑Ê£ÄÊü•ÁΩëÁªúÊàñËÄÖÈáçÊñ∞ËØï‰∏Ä‰∏ã', 'none' ,1500); let status = &#123; statusCode: 300 &#125;; return status &#125;else &#123; return res &#125;&#125;// ËØ∑Ê±ÇË∂ÖÊó∂Â§ÑÁêÜtest() &#123; let promise = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve('timeOut') &#125;,20000) &#125;); return promise;&#125; formid (Â∑≤Â∫üÂºÉ)Â∞èÁ®ãÂ∫èÁªôÁî®Êà∑ÂèëÈÄÅÊ®°ÊùøÊ∂àÊÅØÈúÄË¶ÅÊ∂àËÄó fromIDÔºå Êñ∞ÁâàÁöÑÂàôÊòØÊéàÊùÉ„ÄÇËøôÈáåËÆ∞ÂΩï‰∏Ä‰∏ãfromIDÁöÑÂ§ÑÁêÜ„ÄÇÂèëÈÄÅ‰∏ÄÊù°Ê®°ÊùøÊ∂àÊÅØÈúÄËÄóË¥π‰∏Ä‰∏™ fromIDfromIDÁöÑÂ≠òÂÇ®Â∫îËØ•ÊòØÁî®Êà∑Êú¨Ê¨°‰ΩøÁî®ÂÆåÂ∞èÁ®ãÂ∫èÔºåÁÑ∂ÂêéÊääÊî∂ÈõÜÂà∞ÁöÑfromID‰∏ÄÊ¨°ÊÄßÂèëÈÄÅÂà∞ÂêéÁ´Ø 123456789101112131415161718192021222324252627282930313233/**path: src/app.wpy**/onHide()&#123; let form_ids = wepy.getStorageSync('form_ids'); configApi.postFormId(&#123; data: &#123; form_ids: form_ids &#125;, getToken: true &#125;); wepy.setStorageSync('form_ids', [])&#125;// mixins - common// Â≠òÂÇ®formid postFormId(id)&#123; let arr = wepy.getStorageSync('form_ids') || []; arr.push(id); wepy.setStorageSync('form_ids', arr) &#125;// È°µÈù¢Ë°®Âçï‰∫ßÁîü fromID &lt;form @submit="submit" report-submit="true"&gt; &lt;button class="publicBox" hover-class="none" form-type="submit"&gt; &lt;image class="publicImg" src="../images/common/bigButton.png" &gt;&lt;/image&gt; &lt;view class="publicText"&gt;ÂèëÂ∏É&lt;/view&gt; &lt;/button&gt;&lt;/form&gt;submit(e)&#123; this.postFormId( e.detail.formId )&#125;, ÂΩìÁî®Êà∑ÁöÑË°®ÂçïÊèê‰∫§Ë°å‰∏∫‰∫ßÁîü‰∫Ü fromID Êó∂Ôºå Áªü‰∏ÄËøõË°åÊú¨Âú∞Â≠òÂÇ®ÔºåÂú®Áî®Êà∑Ê≤ôÈõïËØ•Â∞èÁ®ãÂ∫èÊó∂ÂÜçÁªü‰∏ÄÊèê‰∫§ÂÖ®ÈÉ®fromid Â∞èÁ®ãÂ∫èÁôªÂΩïÂπøÊí≠ÁôªÂΩïÂπøÊí≠ÂèØ‰ª•Ëß£ÂÜ≥ÂæàÂ§öÂêåÊ≠•ÈóÆÈ¢òÔºåÂú®appÂÜÖÔºåÊâßË°åÁôªÂΩïËé∑ÂèñtokenÔºåÂú®tokenËøòÊú™ÊãøÂà∞Êó∂ÔºåÈ¶ñÈ°µÁöÑÊé•Âè£‰∏çËÉΩÂéªÊâßË°åÔºåÈúÄË¶ÅÁ≠âÂæÖÂêéÁ´ØËøîÂõûtokenÂêéÊâçÂèØÊâßË°åÔºåËøôÈáåÊúâ‰∏§ÁßçÊñπÂºèÂÆûÁé∞Ôºömethod1Ôºö async/awaitappÂÜÖ‰ºöÊâßË°åÁôªÂΩïÔºåÈ¶ñÈ°µ‰πüonloadÂÜÖÂà§Êñ≠tokenÊòØÂê¶Â≠òÂú®Ôºå‰∏çÂ≠òÂú®ÂàôÈáçÊñ∞ÁôªÂΩïÔºàÂêåÊ≠•ÔºâÔºåÂú®ÁôªÂΩïÊàêÂäüÂêéÂú®ÊâßË°å‰∏öÂä°„ÄÇ 123456789101112// APPonLaunch() &#123; this.getLogin() &#125;//index.wpyasync onLoad() &#123; if(!wepy.getStorageSync('token)) &#123; await this.getLogin() &#125; // ÊâßË°å‰∏öÂä°&#125; ‰ª•‰∏äÊñπÊ≥ïÂú®ÊúâÂ§ßÈáèÊñ∞Áî®Êà∑ÂàÜ‰∫´ËøõÂÖ•Â∞èÁ®ãÂ∫èÁöÑÂú∫ÊôØ‰∏ãÂæàÂÆûÁî®Ôºå‰ΩÜÊòØ‰∏çÂ≠òÂú®tokenÁöÑÁî®Êà∑ÔºàÊñ∞Áî®Êà∑ÔºâÈÄöÂ∏∏‰ºöËØ∑Ê±Ç‰∏§Ê¨°ÁôªÂΩï„ÄÇ‰ºòÂåñÂ¶Ç‰∏ãÔºöÂà©Áî®ÂπøÊí≠ÔºåÂπøÊí≠È°µÈù¢ÂëäÁü•APPÂÜÖÁôªÂΩïÊòØÂê¶ÊàêÂäüÔºåÊàêÂäüÂêéÂêÑÈ°µÈù¢ÂÜçÂéªÊâßË°å‰∏öÂä°„ÄÇcode address: https://github.com/fanghongliang/Tools/blob/master/broadcast.js Â∞èÁ®ãÂ∫èË∑≥ËΩ¨Ë∑ØÂæÑÊê∫Â∏¶ÂØπË±°ÂèÇÊï∞ObjectÂ∞èÁ®ãÂ∫èÂú®Ë∑≥ËΩ¨È°µÈù¢Ë∑ØÂæÑÊó∂‰ºöÊääqueryÂèÇÊï∞StringÂåñÔºå‰πü‰∏çËÉΩÊê∫Â∏¶ÂØπË±°ÂèÇÊï∞ÔºåÂΩìÁÑ∂Êàë‰ª¨ÂèØ‰ª•ÈÄöËøálocalStorage„ÄÅglobalDataÊù•Ëß£ÂÜ≥ÂèÇÊï∞Êê∫Â∏¶ÈóÆÈ¢ò„ÄÇ‰ΩÜÂΩì‰∏çÁ°ÆÂÆöÁöÑÂØπË±°ÂèÇÊï∞ÈúÄË¶Å‰º†ÈÄíÂà∞‰∏ã‰∏Ä‰∏™È°µÈù¢Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®ÂØπË±°ÂèÇÊï∞‰º†ÈÄíÔºå‰ΩøÁî®encodeURIComponentÂ∞ÅË£ÖURLÂç≥ÂèØËß£ÂÜ≥code address: https://github.com/fanghongliang/Tools/blob/master/urlHelper.js Â∞èÁ®ãÂ∫è‰ΩøÁî®Á¨¨‰∏âÊñπUIÂ∫ìÂΩìÈúÄË¶Å‰ΩøÁî®Á¨¨‰∏âÊñπUIÂ∫ìÊó∂Ôºå‰ºòÂÖàËÄÉËôëÁ¨¨‰∏âÊñπÂ∫ìÁöÑÈÄÇÈÖçÊÄß„ÄÇËøôÈáåwepy ÁâàÊú¨‰∏∫ 1.7.3 Ôºå‰ΩøÁî®kai-ui ÈááÂùëÁªèÂéÜÂ¶Ç‰∏ãÔºökai-ui: https://www.npmjs.com/package/kai-ui/v/1.2.2npmÂºïÂÖ•‰πãÂêéË¶ÅÁ°Æ‰øùÈ°πÁõÆ /dist/npm ÁõÆÂΩï‰∏ãÔºåÂ≠òÂú® kai-ui Êñá‰ª∂Â§πÔºåÂ¶ÇÊ≤°ÊúâÔºåÂà†Èô§distÁõÆÂΩïÔºåÈáçÊñ∞ÁºñËØë„ÄÇÊ≠•È™§‰∏ÄÔºöÂú®rootÁõÆÂΩïappÊñá‰ª∂ÂÜÖÔºåstyle‰∏≠ÂºïÂÖ• @import &#39;../node_modules/kai-ui/src/less/index&#39;;Ê≠•È™§‰∫åÔºöÂú®È°µÈù¢‰∏≠Áõ¥Êé•ÂºïÂÖ•‰Ω†ÈúÄË¶ÅÁöÑÁªÑ‰ª∂, import loading from 'kai-ui/Loading' components = { loading, } ‰πãÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî® ÁªÑ‰ª∂‰∫ÜÔºåÊ≠§Êó∂ÔºÅÂèØËÉΩ‰ºöÂá∫Áé∞ [Error] TypeError: Cannot read property &#39;dir&#39; of null Êä•ÈîôÔºÅ Ëß£ÂÜ≥ÊñπÊ≥ïÔºö Áõ¥Êé•ÂºïÁî®Ôºå‰∏çË¶ÅÂú® components ÂÜÖÊ≥®ÂÜåÔºå‰∫≤ÊµãÊúâÊïàÔºàÂùëÔºâ]]></content>
      <categories>
        <category>wepyÊ°ÜÊû∂Â∞ÅË£Ö</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Emmet]]></title>
    <url>%2F2019%2F10%2F11%2FEmmet%2F</url>
    <content type="text"><![CDATA[EmmetÂäüËÉΩÂø´ÈÄüÁºñËæëÂâçÁ´ØHTMLÊ†áÁ≠æÔºå‰ª•ÂèäÁºñËæëÂô®Ê†áÁ≠æËá™Âä®Èó≠ÂêàÂäüËÉΩÁºñËæëÂô®ÂÆâË£ÖÊèí‰ª∂ÔºöAuto Close TagVscodeÁºñËæëÂô®‰∏≠Ôºå„ÄêËÆæÁΩÆ„Äë‰∏≠ÊâìÂºÄ EmmetÁõ∏ÂÖ≥ÈÖçÁΩÆ EmmetÂàùÂßãÂåñ12! =&gt; tabhtml:5 Ê†áÁ≠æid/class/Â±ûÊÄß12div.test#testidp.test-class&#123;ËøôÈáåÊòØpÊñáÊú¨&#125; ÂµåÂ•ó&lt; : Â≠êËäÇÁÇπ+ : ÂÖÑÂºüËäÇÁÇπ^ : Áà∂ËäÇÁÇπ 1div.aim-class&gt;div.son-class^div.brother1-class+div.brother2-class ÂàÜÁªÑ() : ÂàÜÁªÑÂàÜÁªÑÂÜÖÁöÑÊ†áÁ≠æÂú®Â±ÇÁ∫ß‰∏äËßÜ‰∏∫Êï¥‰Ωì 1div&gt;(div&gt;div&gt;a)+div&gt;p&#123;test text&#125; ÈöêÂºèÊ†áÁ≠æÁõ¥Êé•ÈÄöËøá Á±ª Êàñ ID ÁîüÊàêÊ†áÁ≠æÂèØ‰ª•ÁúÅÁï•ÊéâdivÔºåÂç≥ËæìÂÖ•.itemÂç≥ÂèØÁîüÊàê&lt;div class=&quot;item&quot;&gt;&lt;/div&gt;ÈöêÂºèÊ†áÁ≠æÈõÜÂêàÔºö 1234liÔºöÁî®‰∫éulÂíåol‰∏≠trÔºöÁî®‰∫étable„ÄÅtbody„ÄÅtheadÂíåtfoot‰∏≠tdÔºöÁî®‰∫étr‰∏≠optionÔºöÁî®‰∫éselectÂíåoptgroup‰∏≠ ‰πòÊ≥ï* : ÈáçÂ§çÊåá‰ª§$ : Ëá™Â¢ûÁ¨¶Âè∑ 12div*5ul&gt;li$*3 CSSÁº©ÂÜô12w100 =&gt; width: 100pxh10p =&gt; height: 10% Âçï‰ΩçÂà´ÂêçÂàóË°®:p Ë°®Á§∫%e Ë°®Á§∫ emx Ë°®Á§∫ ex Êõ¥Â§öÂèÇËÄÉÔºö https://blog.csdn.net/comphoner/article/details/79670148]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[designMode]]></title>
    <url>%2F2019%2F09%2F23%2FdesignMode%2F</url>
    <content type="text"><![CDATA[ËÆæËÆ°Ê®°Âºè‰∫îÂ§ßËÆæËÆ°ÂéüÂàô]]></content>
      <categories>
        <category>designMode</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HexoÂª∫Á´ô]]></title>
    <url>%2F2019%2F09%2F19%2Fhexo%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄNEXT‰∏ªÈ¢òÔºö http://theme-next.iissnan.com/getting-started.htmlÂèÇËÄÉÊñáÁ´†Ôºö https://blog.csdn.net/sinat_37781304/article/details/82729029nextÂèÇËÄÉ: https://www.jianshu.com/p/5e56839ef917Ê≠•È™§Ôºö 12345678ÂÆâË£ÖGitÂÆâË£ÖNode.jsÂÆâË£ÖHexoGitHubÂàõÂª∫‰∏™‰∫∫‰ªìÂ∫ìÁîüÊàêSSHÊ∑ªÂä†Âà∞GitHubÂ∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubËÆæÁΩÆ‰∏™‰∫∫ÂüüÂêçÂèëÂ∏ÉÊñáÁ´† ÂÆâË£Ö$ npm install hexo-cli -gÂÆâË£ÖÂêéÊ£ÄÊü•ÊòØÂê¶ÂÆâË£ÖÊàêÂäüÔºö$ hexo -vÊàêÂäüÂêéËøõË°åÂàùÂßãÂåñÔºö$ hexo init myBlogÂÆâË£ÖÁªÑ‰ª∂: 1234$ cd myBlog$ npm install``` Ëá≥Ê≠§ÔºåÊñ∞Âª∫ÂÆåÊàêÔºÅÁõÆÂΩï‰ºöÂ≠òÂú®‰ª•‰∏ãÁªìÊûÑÔºö node_modules: ‰æùËµñÂåÖpublicÔºöÂ≠òÊîæÁîüÊàêÁöÑÈ°µÈù¢scaffoldsÔºöÁîüÊàêÊñáÁ´†ÁöÑ‰∏Ä‰∫õÊ®°ÊùøsourceÔºöÁî®Êù•Â≠òÊîæ‰Ω†ÁöÑÊñáÁ´†themesÔºö‰∏ªÈ¢ò** _config.yml: ÂçöÂÆ¢ÁöÑÈÖçÁΩÆÊñá‰ª∂** 1Êü•ÁúãÂàöÂàöÂàõÂª∫ÁöÑhexoÂçöÂÆ¢Ôºö $ hexo g$ hexo s 123456789ÊâìÂºÄlocalhost:4000Â∞±ÂèØ‰ª•ÁúãÂà∞Âï¶#### ÂàõÂª∫GitHub‰ªìÂ∫ìÂàõÂª∫‰∏Ä‰∏™Âíå‰Ω†Áî®Êà∑ÂêçÁõ∏ÂêåÁöÑ‰ªìÂ∫ìÔºåÂêéÈù¢Âä†.github.ioÔºåÂè™ÊúâËøôÊ†∑ÔºåÂ∞ÜÊù•Ë¶ÅÈÉ®ÁΩ≤Âà∞GitHub pageÁöÑÊó∂ÂÄôÔºåÊâç‰ºöË¢´ËØÜÂà´Ôºå‰πüÂ∞±ÊòØxxxx.github.ioÔºåÂÖ∂‰∏≠xxxÂ∞±ÊòØ‰Ω†Ê≥®ÂÜåGitHubÁöÑÁî®Êà∑Âêç#### hexoÈÉ®ÁΩ≤Âà∞GitHubÂ∞ÜhexoÂíåGitHubÂÖ≥ËÅîËµ∑Êù•Ôºå‰πüÂ∞±ÊòØÂ∞ÜhexoÁîüÊàêÁöÑÊñáÁ´†ÈÉ®ÁΩ≤Âà∞GitHub‰∏äÔºåÊâìÂºÄÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂ _config.ymlÔºåÁøªÂà∞ÊúÄÂêéÔºå‰øÆÊîπ‰∏∫ deploy: type: git repo: https://github.com/YourgithubName/YourgithubName.github.io.git branch: master 1Ê≠§Êó∂ÈúÄË¶ÅÂÆâË£Ödeploy-git Ôºå‰πüÂ∞±ÊòØÈÉ®ÁΩ≤ÁöÑÂëΩ‰ª§,ËøôÊ†∑‰Ω†ÊâçËÉΩÁî®ÂëΩ‰ª§ÈÉ®ÁΩ≤Âà∞GitHub $ npm install hexo-deployer-git ‚Äìsave 1ÁÑ∂ÂêéÔºö $ hexo clean$ hexo generate$ hexo deploy $ hexo clean$ hexo d -g 1234567891011121314151617181920212223242526272829303132333435ÂÖ∂‰∏≠ deploy Êó∂‰ºöË¶ÅÊ±ÇËæìÂÖ• username Âíå password ÔºàgitË¥¶Êà∑ÂØÜÁ†ÅÔºâ ‰πãÂêéÔºåÊâìÂºÄ http://yourname.github.io Ëøô‰∏™ÁΩëÁ´ôÂ∞±ÂèØ‰ª•ÁúãÂà∞‰Ω†ÁöÑÂçöÂÆ¢‰∫ÜÔºÅÔºÅ#### ÂèëÂ∏ÉÂçöÂÆ¢ÂíåÁ∫ø‰∏äGitHubÂÖ≥ËÅîÂêéÔºåÊñ∞Â¢û‰∏ÄÁØáÂçöÂÆ¢Ôºö `$ hexo new post &lt;your blogName&gt;` ÁºñËæëÂ•ΩÊñáÁ´†ÂèëÂ∏ÉÈÉ®ÁΩ≤Ôºö `$ hexo d -g `Ê∏ÖÈô§ÁºìÂ≠òÔºö `$ hexo clean`#### Êú¨Âú∞ÂêØHexoÂä®ÊúçÂä°`$ hexo s || hexo serve` ÈªòËÆ§Á´ØÂè£Ôºö4000Ôºå‰øÆÊîπÁ´ØÂè£Âè∑Ôºö `$ hexo serve -p 5000`#### ËçâÁ®ø#### È°µÈù¢‰∏∞ÂØå##### ÂÖ¨Áõä404Ôºö`$ hexo new page 404` ËøõÂÖ•ÂàöÊâçÁîüÊàêÁöÑ \source\404\index.md Ê∑ªÂä†Ôºö ```html&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;404&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; tags/Ê†áÁ≠æÈ°µ$ hexo new page tagsÈÖçÁΩÆtagsÈ°µÈù¢ÔºåËøõÂÖ•Âà∞ÂàöÊâçÁîüÊàêÁöÑ \source\tags\index.mdÊñá‰ª∂ÔºåÊ∑ªÂä†typeÂ≠óÊÆµÔºö 123title: Ê†áÁ≠ædate: 2019-09-19 19:49:32type: &quot;tags&quot; Âú®ÊñáÁ´†‰∏≠ËÆæÁΩÆÂØπÂ∫îÁöÑÊ†áÁ≠æÂç≥ÂèØÔºö 1tags: [xxx,xxx,xxx] ÂàÜÁ±ªÈ°µÈù¢/categories$ hexo new page categoriesÈÖçÁΩÆcategoriesÈ°µÈù¢ÔºåËøõÂÖ•Âà∞ÂàöÊâçÁîüÊàêÁöÑ \source\categories\index.mdÊñá‰ª∂ÔºåÊ∑ªÂä†typeÂ≠óÊÆµÔºö 1234title: ÂàÜÁ±ªdate: 2019-08-19 15:11:42type: &quot;categories&quot;comments: false ËÆæÁΩÆÊØèÁØáÂçöÂÆ¢ÁöÑ categoriesÔºöcategories: xxx ÂäüËÉΩÁÇπÂ≠óÊï∞ÁªüËÆ°„ÄÅÊó∂Èïø‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ _config.yml ‰∏≠ÊâìÂºÄ wordcount ÁªüËÆ°ÂäüËÉΩÂç≥ÂèØ 123456post_wordcount: item_text: true wordcount: true #Â≠óÊï∞ÁªüËÆ° min2read: true #ÈòÖËØªÊó∂Èïø totalcount: true separated_meta: true ÈÖçÁΩÆ‰πãÂêéËøòÊòØÊ≤°Âá∫Áé∞Â≠óÊï∞ÁªüËÆ°ÂíåÈòÖËØªÊó∂ÈïøÔºåÂèØËÉΩÊòØÂõ†‰∏∫Êú™ÂÆâË£Ö hexo-wordcount Êèí‰ª∂ÔºåÂÆâË£ÖÂç≥ÂèØÔºö$ npm insatll --save hexo-wordcountÈáçÂêØÊúçÂä°ÔºåOK Á´ôÂÜÖÊêúÁ¥¢ÂÆâËΩ¨Êèí‰ª∂npm install hexo-generator-searchdb --savehexoÁ´ôÁÇπÈÖçÁΩÆÊñá‰ª∂_config.yml,‰ªªÊÑè‰ΩçÁΩÆÊâãÂä®Ê∑ªÂä†Ôºö 12345search: path: search.xml field: post format: html limit: 10000 ‰øÆÊîπ‰∏ªÈ¢ò(next)ÈÖçÁΩÆÊñá‰ª∂_config.yml,ÂêØÁî®local_search 1234local_search: enable: true trigger: auto top_n_per_article: 1 ok GitHub page 404Â∑≤ÁªèÈÉ®ÁΩ≤Â•ΩÁöÑhexo,Âú®Êàë‰ª¨‰øÆÊîπ‰∫Ügit‰ªìÂ∫ìÁöÑÂ±ûÊÄß‰πãÂêéÔºàÊàëÊòØÂàáÊç¢‰∫Ü‰ªìÂ∫ìÁöÑÂÖ¨ÂºÄÂíåÁßÅÊúâÂ±ûÊÄßÔºâÔºåÂÜçÊ¨°ËÆøÈóÆÂüüÂêçÂ∞±‰ºö page 404ÔºåÊ£ÄÊü•‰∫Ü‰ªìÂ∫ìÊñá‰ª∂ÂíåÊú¨Âú∞hexoÈÖçÁΩÆÊñá‰ª∂ÔºåÂùáÊú™ÊîπÂä®„ÄÇ Ëß£ÂÜ≥Ôºö Âú®Á∫ø‰∏ägit‰ªìÂ∫ìÁöÑsetting‰∏≠ÔºåÈÄâÊã©theme-&gt; Custom domain,Âú®ËøôÈáåÈáçÊñ∞ËæìÂÖ•‰Ω†ÁöÑÂüüÂêçÔºå‰øùÂ≠òÂç≥ÂèØÔºåÈáçÊñ∞ÊâìÂºÄÂüüÂêçÔºåÈ°µÈù¢Â∑≤ÁªèÂõûÊù•‰∫Ü„ÄÇhexoÁöÑÂüüÂêçÁªëÂÆöÊòØÂèåÂêëÁöÑÔºÅ hugoÂçöÂÆ¢Ê°ÜÊû∂Ôºö goËØ≠Ë®ÄÁºñÂÜô„ÄÇÂ§öÁ∫øÁ®ãÁºñËØë„ÄÇÈÄüÂ∫¶Âø´]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Charts]]></title>
    <url>%2F2019%2F09%2F17%2Fcharts%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄantvËöÇËöÅÂÆòÁΩëÔºö https://antv.alipay.com/zh-cn/index.html G2G2ÂºïÂÖ• CDNÔºö&lt;script src=&quot;https://gw.alipayobjects.com/os/lib/antv/g2/3.4.10/dist/g2.min.js&quot;&gt;&lt;/script&gt; NPM:$ npm install @antv/g2 --saveimport G2 from &#39;@antv/g2&#39; Êú¨Âú∞ËÑöÊú¨Ôºö&lt;script src=&quot;./g2.js&quot;&gt;&lt;/script&gt; G2Â∞ÅË£ÖÂÆûÊàò‰∏Ä‰∏™G2ÂÆû‰æãÂè™ËÉΩÂàõÂª∫‰∏Ä‰∏™ÂõæË°®,Ëã•ÈúÄË¶ÅÂ§ö‰∏™ÂõæË°®ÔºåÂèØ‰ª•Â∞ÅË£ÖG2 ÂÆû‰æã: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687/** * G2 * charthsÂáΩÊï∞ * warn:Êï∞ÊçÆÊ†ºÂºèÁõ∏ÂêåÂèØÂ§çÁî®‰∏Ä‰∏™ÂáΩÊï∞,Âê¶ÂàôËØ∑ÈáçÊñ∞Âè¶ÂàõÂõæË°®ÂáΩÊï∞ */// utils/charts.jsexport function chartInstance( point, chartData, config=&#123;&#125; ) &#123; const [axisX, axisValue, axisY] = Object.keys(chartData[0]) const chart = new G2.Chart(&#123; container: point, //pointÊåÇËΩΩÁÇπID forceFit: config.width ? false : true, //Ë°®ÂÆΩËá™ÈÄÇÂ∫îÈÖçÁΩÆ height: config.height || 600, width: config.width || null, //Ëã•ÈÖçÁΩÆforceFitÔºåÂàôwidth‰∏çÁîüÊïà &#125;); chart.source(chartData, &#123; axisX: &#123; range: [0, 1], min: 0, max: 100 &#125; &#125;); chart.tooltip(&#123; crosshairs: &#123; type: 'line' &#125; &#125;); chart.axis(axisY, &#123; label: &#123; formatter: function formatter(val) &#123; return val + 'Ôø•'; &#125; &#125;, title: &#123; textStyle: &#123; fontSize: 12, // ÊñáÊú¨Â§ßÂ∞è textAlign: 'center', // ÊñáÊú¨ÂØπÈΩêÊñπÂºè fill: '#999', // ÊñáÊú¨È¢úËâ≤ &#125; &#125;, line: &#123; lineDash: [3, 3] &#125; &#125;); chart.line().position(`$&#123;axisX&#125;*$&#123;axisY&#125;`).color(`$&#123;axisValue&#125;`).shape('smooth'); //Âπ≥ÊªëÊõ≤Á∫øÂõæ chart.point().position(`$&#123;axisX&#125;*$&#123;axisY&#125;`).color(`$&#123;axisValue&#125;`).size(4).shape('circle').style(&#123; stroke: '#fff', lineWidth: 1 &#125;); chart.render(); return chart&#125;//showData.vueimport &#123; chartInstance&#125; from '@/utils/charts'data() &#123; return&#123; chartIncome:'', chartData2: [&#123;&#125;], &#125;&#125;,mounted() &#123; this.chartIncome = chartInstance('c1', this.chartData2) //ËøîÂõûÂÄºÂæàÈáçË¶ÅÔºåÂÖ≥‰πéÊï∞ÊçÆÂèòÂä® this.chartRegister = chartInstance('c2', this.chartData2) this.chartActive = chartInstance('c3', this.chartData2) &#125;,methods: &#123; //ÂàáÊç¢Êï∞ÊçÆ onChangeIncome(e) &#123; const dateChange = e.target.value switch(dateChange) &#123; case 'a': this.chartIncome.changeData(this.chartData2) break case 'b': this.chartIncome.changeData(this.chartData3) break case 'c': this.chartIncome.changeData(this.chartData) break &#125; &#125;,&#125;]]></content>
      <categories>
        <category>Antv-G2</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javascript]]></title>
    <url>%2F2019%2F09%2F12%2Fjs%2F</url>
    <content type="text"><![CDATA[ArrayÂ±ûÊÄßÔºöArray.length ÊñπÊ≥ïÔºöArray.from()‰ªéÁ±ªÊï∞ÁªÑÂØπË±°ÊàñËÄÖÂèØËø≠‰ª£ÂØπË±°‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑÂÆû‰æã 123&lt;!-- Êï∞ÁªÑÂéªÈáç --&gt;const arr = [1,3,5,56,3,2,1]const res = Array.from(new Set(arr)) Array.isArray()Áî®Êù•Âà§Êñ≠Êüê‰∏™ÂèòÈáèÊòØÂê¶ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂØπË±°„ÄÇ 12const obj = &#123;'key': 'value'&#125;Array.isArray(obj) // false Array.of()Ê†πÊçÆ‰∏ÄÁªÑÂèÇÊï∞Êù•ÂàõÂª∫Êñ∞ÁöÑÊï∞ÁªÑÂÆû‰æãÔºåÊîØÊåÅ‰ªªÊÑèÁöÑÂèÇÊï∞Êï∞ÈáèÂíåÁ±ªÂûã Array instanceÂ±ûÊÄßÔºöArray.prototype.constructorËøîÂõûÂÄº Array Array.prototype.lengthËøîÂõûÂÄºÈïøÂ∫¶ ÊñπÊ≥ïÔºö‰øÆÊîπÂô®ÊñπÊ≥ïÔºö‰∏ãÈù¢ÁöÑËøô‰∫õÊñπÊ≥ï‰ºöÊîπÂèòË∞ÉÁî®ÂÆÉ‰ª¨ÁöÑ ÂØπË±°Ëá™Ë∫´ ÁöÑÂÄº 123456789Array.prototype.copyWithin()Array.prototype.fill()Array.prototype.pop()Array.prototype.push()Array.prototype.reverse()Array.prototype.shift()Array.prototype.sort()Array.prototype.splice()Array.prototype.unshift() ËÆøÈóÆÊñπÊ≥ïÔºö‰ª•‰∏ãÊñπÊ≥ï‰∏ç‰ºöÊîπÂèòË∞ÉÁî®ÂÆÉ‰ª¨ÁöÑÂØπË±°ÁöÑÂÄºÔºåÂè™‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑÊàñËÄÖËøîÂõû‰∏Ä‰∏™ÂÖ∂ÂÆÉÁöÑÊúüÊúõÂÄº„ÄÇ 12345678Array.prototype.concat()Array.prototype.includes()Array.prototype.join()Array.prototype.slice()Array.prototype.toString()Array.prototype.toLocaleString()Array.prototype.indexOf()Array.prototype.lastIndexOf() Ëø≠‰ª£ÊñπÊ≥ïÔºö 1234567Array.prototype.forEach()Array.prototype.every()Array.prototype.some()Array.prototype.filter()Array.prototype.map()Array.prototype.reduce()Array.prototype.reduceRight() StringÂ±ûÊÄßÔºöString.prototype ÊñπÊ≥ïÔºöString.fromCharCode()ÈÄöËøá‰∏Ä‰∏≤ Unicode ÂàõÂª∫Â≠óÁ¨¶‰∏≤ String instanceÂ±ûÊÄß:String.prototype.constructorËøîÂõûÂÄº String String.prototype.lengthÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ ÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930String.prototype.charAt()String.prototype.charCodeAt()String.prototype.codePointAt()String.prototype.concat()String.prototype.includes()String.prototype.endsWith()String.prototype.indexOf()String.prototype.lastIndexOf()String.prototype.localeCompare()String.prototype.match()String.prototype.normalize()String.prototype.padEnd()String.prototype.padStart()String.prototype.repeat()String.prototype.replace()String.prototype.search()String.prototype.slice()String.prototype.split()String.prototype.startsWith()String.prototype.substr()String.prototype.substring()String.prototype.toLocaleLowerCase()String.prototype.toLocaleUpperCase()String.prototype.toLowerCase()String.prototype.toUpperCase()String.prototype.toString()String.prototype.trim()String.prototype.trimLeft()String.prototype.trimRight()String.prototype.valueOf() ObjectObjectÊûÑÈÄ†ÂáΩÊï∞ÊñπÊ≥ï1234567891011121314151617181920Object.assign()Object.create()Object.defineProperty()Object.defineProperties()Object.entries()Object.freeze()Object.getOwnPropertyDescriptor()Object.getOwnPropertyNames()Object.getOwnPropertySymbols()Object.getPrototypeOf()Object.is()Object.isExtensible()Object.isFrozen()Object.isSealed()Object.keys()Object.values()Object.preventExtensions()Object.seal()Object.setPrototypeOf()delete obj.property]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git]]></title>
    <url>%2F2019%2F09%2F11%2FGit%2F</url>
    <content type="text"><![CDATA[GitÂÆûÁî®ÂëΩ‰ª§ÊÄªÁªìÊÄªÁªì‰∫ÜÈÉ®ÂàÜÂºÄÂèë‰∏≠Â∏∏Áî®ÁöÑgitÊìç‰ΩúÂëΩ‰ª§ÔºåÊ†πÊçÆÂÆûÈôÖ‰∏öÂä°ÈÅáÂà∞ÁöÑÊÉÖÂÜµÊ¢≥ÁêÜ„ÄÇÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÂàÜÊîØÊñ∞Âª∫„ÄÅÂàÜÊîØÂêàÂπ∂„ÄÅÂàÜÊîØÂêàÂπ∂ÂÜ≤Á™Å„ÄÅdistÊñá‰ª∂ÂÜ≤Á™Å„ÄÅÁâàÊú¨ÂõûÈÄÄÁ≠â„ÄÇ ÂëΩÂêçËßÑËåÉ Ê†áËÆ∞ Ëß£Èáä feat Êñ∞ÂäüËÉΩ fix ‰øÆË°•bug doc ÊñáÊ°£ style Ê†ºÂºèÔºå‰∏çÂΩ±Âìç‰ª£Á†Å refactor ÈáçÊûÑÔºå‰∏çÊ∑ªÂä†Êñ∞ÂäüËÉΩÔºå‰πüÈùû‰øÆË°•bug test Â¢ûÂä†ÊµãËØï chore ÊûÑÂª∫ËøáÁ®ãÊàñËæÖÂä©Â∑•Á®ãÂèòÂä® scope Áî®‰∫éËØ¥ÊòécommitÂΩ±ÂìçÁöÑËåÉÂõ¥ ÈóÆÈ¢òËß£ÂÜ≥‰øÆÊîπÊñá‰ª∂Â§ßÂ∞èÂÜôWindowsÂØπÂ§ßÂ∞èÂÜô‰∏çÊïèÊÑüÔºågitÂØπÂ§ßÂ∞èÂÜô‰∏çÊïèÊÑüÔºåÈúÄË¶Å‰øÆÊîπÊñá‰ª∂ÂêçÁöÑÂ§ßÂ∞èÂÜôÔºåÂÆûÈôÖ‰øÆÊîπ‰∫ÜgitÂç¥‰∏ç‰ºöÁîüÊïàÁöÑÔºåËß£ÂÜ≥: 1. Â§çÂà∂Ê≠§Êñá‰ª∂Âà∞ÂÖ∂‰ªñÂú∞ÊñπÂ§á‰ªΩ 2. Âà†Èô§È°πÁõÆ‰∏≠ÁöÑËØ•Êñá‰ª∂ 3. Êèê‰∫§‰ª£Á†Å 4. ÈáçÊñ∞Ê∑ªÂä†Ê≠§Êñá‰ª∂Âà∞È°πÁõÆ 5. Êèê‰∫§‰ª£Á†ÅÔºåover gitÂÆûÁî®ÂëΩ‰ª§git stashÊÉ≥Ë¶ÅÂàáÊç¢ÂàÜÊîØÔºåÊú¨Âú∞Âç¥Â∑≤ÁªèÂÅö‰∫ÜÊîπÂèò„ÄÇÂàáÊç¢‰ºöÊä•ÈîôÔºåÊ≠§Êó∂ÂèØ‰ª•‰ΩøÁî® git stash‰øùÂ≠òÂΩìÂâçÁöÑ‰øÆÊîπÔºåÁ≠âÂ§ÑÁêÜÂÆåÂÖ∂‰ªñÂàÜÊîØ‰∫ãÂä°Âú®ÂõûÊù•‚ÄòÂèñÂá∫‰øùÂ≠ò‚ÄôÁöÑ‰øÆÊîπÂç≥ÂèØ„ÄÇ ÂëΩ‰ª§ ‰ΩúÁî®ËØ¥Êòé git stash ‰øùÂ≠òÂΩìÂâçÂ∑•‰ΩúÂå∫ÂíåÊöÇÂ≠òÂå∫ÁöÑ‰øÆÊîπ git stash save ‚ÄòÊ≥®Èáä‰ø°ÊÅØ‚Äô ‰ΩúÁî®Âêå‰∏äÔºåÂä†‰∏ä‰∫ÜÊ≥®Èáä‰ø°ÊÅØÊñπ‰æøÂå∫ÂàÜ git stash list Êü•Áúã‰øùÂ≠òÂàóË°® git stash pop ÊÅ¢Â§çÊúÄËøë‰∏ÄÊ¨°‰øùÂ≠òÂπ∂Âà†Êéâ‰øùÂ≠òÂàóË°®ÁöÑËÆ∞ÂΩïÔºåÂè™ÊÅ¢Â§çÂ∑•‰ΩúÂå∫ git stash pop ‚Äìindex ‰∏é‰∏äÈù¢ÂëΩ‰ª§ÁöÑÊïàÊûú‰∏ÄÊ†∑‰ΩÜÊòØËøò‰ºöÊÅ¢Â§çÊöÇÂ≠òÂå∫ÔºÅ git stash pop stash@{Â∫èÂè∑} ÊÅ¢Â§ç‰øùÂ≠òÂàóË°®ÈáåÊåáÂÆöÁöÑ‰øùÂ≠òËÆ∞ÂΩïÔºåÂπ∂ÊääÊÅ¢Â§çÁöÑËÆ∞ÂΩï‰ªé‰øùÂ≠òÂàóË°®‰∏≠Âà†Èô§ git stash apply ÊÅ¢Â§çÊúÄËøëÁöÑ‰øùÂ≠òËÆ∞ÂΩï‰ΩÜ‰∏ç‰ºöÂà†Èô§‰øùÂ≠òÂàóË°®ÈáåÈù¢ÂØπÂ∫îÁöÑËÆ∞ÂΩï git stash drop Âà†Èô§‰øùÂ≠òÂàóË°®ÈáåÈù¢ÊúÄËøë‰∏ÄÊù°‰øùÂ≠òËÆ∞ÂΩï„ÄÇÂêéÈù¢Âä† stash@{Â∫èÂè∑}ÂèØ‰ª•Âà†Èô§ÊåáÂÆöÁöÑ‰øùÂ≠òËÆ∞ÂΩï git stash clear Âà†Èô§‰øùÂ≠òÂàóË°®ÈáåÈù¢ÊâÄ‰ª•‰øùÂ≠òËÆ∞ÂΩïÔºàÊ∏ÖÁ©∫‰øùÂ≠òÂàóË°®Ôºâ git stash ÂàÜÊîØÂêç stash@{Â∫èÂè∑} ‰øÆÊîπ‰∫ÜÊñá‰ª∂ÔºåÊ≠§Ê¨°‰øÆËØ•‰ΩøÁî®‰∫Ü git stash ‰øùÂ≠òÔºåÁÑ∂ÂêéÁªßÁª≠‰øÆÊîπ‰∫ÜËØ•Êñá‰ª∂ÔºåÊ≠§Êó∂ÂÜçÁî® git stash pop Êàñ git stash apply ÊÅ¢Â§ç‰πãÂâçÁöÑ‰øùÂ≠òÔºåÂèØËÉΩ‰ºöÂá∫Áé∞ÂÜ≤Á™Å„ÄÇÊ≠§Êó∂‰ΩøÁî®ËØ•ÂëΩ‰ª§ git stash ÂàÜÊîØÂêç stash@{Â∫èÂè∑} ‰ºöÂàõÂª∫‰∏Ä‰∏™ÂàÜÊîØÁÑ∂ÂêéÂú®ÂàõÂª∫ÁöÑÂàÜÊîØ‰∏äÊää‰øùÂ≠òÁöÑËÆ∞ÂΩïÊÅ¢Â§çÂá∫Êù•ÔºåÈÅøÂÖçÂÜ≤Á™Å„ÄÇ PS Ôºö git stash ‰øùÂ≠òÁöÑ‰øÆÊîπÂèØ‰ª•Ë∑®ÂàÜÊîØÂ∫îÁî®„ÄÇ‰æãÂ¶ÇÔºöÂú® developÂàÜÊîØ‰∏äÂÅö‰∫Ü‰øÆÊîπÔºå *git stash‰øùÂ≠òÔºåÂàáÊç¢Âà∞ *master ÂàÜÊîØÔºå‰ΩøÁî® pop Êàñ apply ÊãâÂá∫Êù•‰øùÂ≠òÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Êää develop ÂàÜÊîØ‰∏ä‰øÆÊîπÁöÑÂÜÖÂÆπËøÅÁßªÂà∞ master ‰∏äÔºåËß£ÂÜ≥ÂÜ≤Á™ÅÂèØËÉΩ‰ºöÈÅáÂà∞„ÄÇ gitÊí§ÂõûÊñá‰ª∂ ÂëΩ‰ª§ ‰ΩúÁî®ËØ¥Êòé git reset HEAD ÊîæÂºÉÊöÇÂ≠òÂå∫ÁöÑ‰øÆÊîπÔºàÂ∑≤Áªèadd,Êú™commitÔºâ git checkout ‚Äì * ÊîæÂºÉÊú¨Âú∞‰øÆÊîπÔºàÊú™commitÔºâ git reset ‚Äìsoft HEAD^ Êí§ÈîÄcommit Êí§ÈîÄÁ∫ø‰∏ä‰ªìÂ∫ìÁöÑcommitÈÄÇÁî®‰∫éÈîôËØØÁöÑpushÂêéÊ≤°Êúâ‰ªñ‰∫∫ÂÜçÊ¨°push 12$ git reset --soft &lt;commitHash&gt;$ git push --force git revertÊí§ÈîÄÂá†Ê¨°‰πãÂâçÁöÑcommitÔºåÂèàÈúÄË¶Å‰øùÁïôËØ•commit‰πãÂêéÁöÑÊèê‰∫§Êó∂ÔºåÈúÄË¶ÅÁî®Âà∞ revert 123$ git log $ git revert commit_hash$ git push git reset Êú¨Ë¥®Âç≥ÊääÊåáÈíà HEAD ÊåáÂêëÊüê‰∏Ä‰∏™ commitgit revert Êú¨Ë¥®‰∏çÁÆóÊòØÂõûÊªöÔºåÊòØÂèçÂÅöÔºåÂèçÂêëÊìç‰Ωúcommit„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏ÄÊ¨°Êìç‰ΩúÊñá‰ª∂Âêé‰ºöËÆ© Git Êó∂Èó¥Á∫øÂæÄÂâçËµ∞‰∏ÄÊ≠•ÔºårevertÂèçÂêëÊìç‰ΩúÊüê‰∏Ä‰∏™commit ËÆ∞ÂΩïÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ commit Êù•ÂèçÂÅö ÈÖçÁΩÆÂà´ÂêçÈïøÂëΩ‰ª§ÁöÑÂà´ÂêçÈÖçÁΩÆ 1$ git config --global alias.st status ‰∏Ä‰∏™ÊØîËæÉÂÆûÁî®ÁöÑÂà´ÂêçÈÖçÁΩÆ‚Üì 1git config --global alias.lg &quot;log --color --graph --pretty=format:&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&apos; --abbrev-commit&quot; ÊØè‰∏™‰ªìÂ∫ìÁöÑGitÈÖçÁΩÆÊñá‰ª∂ÈÉΩÊîæÂú®.git/configÊñá‰ª∂‰∏≠ 1$ cat .git/config 12345[branch &quot;master&quot;] remote = originq merge = refs/heads/master[alias] last = log -1 //ÂëΩ‰ª§‰ΩúÁî®Âå∫Âüü ÈÖçÁΩÆÂà´Âêç‰πüÂèØ‰ª•Áõ¥Êé•‰øÆÊîπËøô‰∏™Êñá‰ª∂‚Üë Êñ∞Âª∫ÂàÜÊîØ‰Ωú‰∏ö‰øÆÊîπbug„ÄÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÁ≠âÔºåÂú®‰∏ªÂàÜÊîØ‰∏äÂºÄ‰∏Ä‰∏™Êñ∞ÂàÜÊîØËøõË°å‰Ωú‰∏öÔºåÂæÖ‰Ωú‰∏öÂÆåÊàêÂêéÔºåÂÜçÂêàÂπ∂Âõû‰∏ªÂàÜÊîØÔºåÂπ∂Âà†ÊéâÊñ∞ÂºÄÁöÑÂàÜÊîØ„ÄÇ ÊñπÊ≥ï‰∏ÄÔºö1234masterÂàÜÊîØ$ git checkout master $ git checkout -b xqcircle origin/xqcircle //ÂàõÂª∫Êñ∞ÂàÜÊîØÂπ∂ÂÖ≥ËÅîÂú®ËøúÁ®ãÂêåÂêçÂàÜÊîØ‰∏ä$ git push origin HEAD //ÊääËØ•ÂàÜÊîØÊé®ÈÄÅÂà∞ËøúÁ®ãÔºåÂç≥ÂèØ‰ª•Âú®git‰ªìÂ∫ìÁúãÂà∞ ÊñπÊ≥ï‰∫åÔºö1234$ git branch dev $ git branch -a$ git branch -b branch_name //Êú¨Âú∞ÂÖàÂàõÂª∫ËØ•ÂàÜÊîØ$ git push --set-upstream origin branch_name //Êú¨Âú∞ÂàÜÊîØÊé®ÈÄÅÂà∞ËøúÁ®ãÂêåÂêçÂàÜÊîØÔºå‰∏îÊú¨Âú∞ÂàÜÊîØ‰ºöËá™Âä®trackËØ•ÂàÜÊîØ ÊãâÂèñÂàÜÊîØËøúÁ®ãÂ≠òÂú®ÂàÜÊîØÔºåÊú¨Âú∞Ê≤°ÊúâËØ•ÂàÜÊîØÔºåÁî®‰ª•‰∏ãÂëΩ‰ª§Êãâ‰∏ãÊù• 1$ git checkout --track origin/branch_name ÂêàÂπ∂Âõû‰∏ªÂàÜÊîØ12$ git checkout master$ git merge branch_name Âà†Èô§ËøúÁ®ãÂàÜÊîØ12$ git branch -r -d origin/branch_name $ git push origin :branch_name Âà†Èô§Êú¨Âú∞ÂàÜÊîØ12$ git branch -d branch_name$ git branch -D branch_name Ê†áÁ≠ætag‰∏Ä‰∏™ÁâàÊú¨‰∏äÁ∫øÂÆö‰πâ‰∏Ä‰∏™ÁâàÊú¨Ê†áÁ≠æÔºåÊñπ‰æøÂø´ÈÄüÂõûÈÄÄËØ•ÁâàÊú¨„ÄÇ 123git tag //ÂàóÂá∫ÊâÄÊúâtaggit tag -r //Êü•ÁúãËøúÁ´ØÊâÄÊúâÂàÜÊîØgit tag -l &apos;v2.0.1&apos; //ËøáÊª§tag Êñ∞Âª∫tag1git tag xqCircle-v2.0.0 Êü•ÁúãtagÔºåcommitÂè∑1git show tagName ÁªôÊüê‰∏™commitÊâì‰∏ätag1git tag -a v1.0.0 commitId -m &apos;my tag&apos; Êé®ÈÄÅtagÂà∞ÊúçÂä°Âô®12git push origin tagName //Êé®ÈÄÅÊüê‰∏™ÂÖ∑‰Ωìtaggit push origin --tags //Êé®ÈÄÅÊú¨Âú∞ÊâÄÊúâtags ÂàáÊç¢Âà∞Êüê‰∏™tagË∑üÂàÜÊîØ‰∏ÄÊ†∑ÔºåÂèØ‰ª•Áõ¥Êé•ÂàáÊç¢Âà∞Êüê‰∏™tagÂéª„ÄÇËøô‰∏™Êó∂ÂÄô‰∏ç‰Ωç‰∫é‰ªª‰ΩïÂàÜÊîØÔºåÂ§Ñ‰∫éÊ∏∏Á¶ªÁä∂ÊÄÅ 1git checkout xqCircle-v2.0.1 ÂàáÊç¢Âà∞ÊüêtagÂπ∂Êñ∞Âª∫ÂàÜÊîØ1git checkout -b branchName tagName Âà†Èô§tag12git tag -d xqCircle-v2.0.1 //Êú¨Âú∞Âà†Èô§git push origin :refs/tags/xqCircle2.0.1 //ËøúÁ´ØÂà†Èô§ port 22 fail‚Äúconnect to host github.com port 22: Connection timed out fatal: Could not read from remote repository.‚ÄùËøô‰∏™Êä•ÈîôÔºå‰ºòÂÖàËß£ÂÜ≥Êú¨Âú∞ÊòØÂê¶Ê≠£Á°ÆÁöÑÈìæÊé•‰∏äÁ∫ø‰∏ä‰ªìÂ∫ì git remote set-url origin git@yourGitUrlHeregit@yourGitUrlHere ‰∏∫Á∫ø‰∏ägithubÁöÑ‰ªìÂ∫ìËÆøÈóÆÂú∞‰∏ª]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python‰∏éJavaScriptÂØπÁÖßÂ≠¶‰π†ÊÄªÁªìÁÇπ]]></title>
    <url>%2F2019%2F08%2F28%2FlearnPython%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄPythonÔºö ÂªñÈõ™Â≥∞-Python‰º†ÈÄÅÈó®Ôºö https://www.liaoxuefeng.com/wiki/1016959663602400ÂëΩ‰ª§Ë°åÊâìÂºÄ .py Êñá‰ª∂ÔºõPython‰∫§‰∫íÁéØÂ¢ÉÔºåÊâßË°åPython‰ª£Á†Å Áº©ËøõÊñπÂºèËøõË°å‰ª£Á†ÅÊ†ºÂºèÔºÅÔºÅ4Ê†ºÁ©∫Ê†ºÁº©ËøõÂ§ßÂ∞èÂÜôÊïèÊÑü Êï∞ÊçÆÁ±ªÂûãÔºö Êï¥Êï∞ ÊµÆÁÇπÊï∞ Â≠óÁ¨¶‰∏≤ Â∏ÉÂ∞îÂÄº =„Äã and, or, not Á©∫ÂÄº None ÂàóË°® Â≠óÂÖ∏ ÂèòÈáè: Â∏∏ÈáèÔºåÂç≥‰∏çËÉΩÂèòÁöÑÂèòÈáèÔºåÊåáÈíàÊåáÂêë‰∏çÂèò Á±ªconstÔºåÂ∏∏Èáè‰∏ÄËà¨‰∏∫ÂèòÈáèÂêçÂÖ®ÈÉ®Â§ßÂÜô ÂÖ®Â±ÄÂèòÈáèÔºöÂÖ®Â±ÄÂèòÈáèglobalDataÁöÑÂÆö‰πâÔºåÂú®ËØªÂÆå‰∫ÜÊïôÁ®ã‰πãÂêé‰πüÊ≤°ÂèëÁé∞ÂÖ≥‰∫éÂÖ®Â±ÄÂèòÈáèÁöÑÂÆö‰πâÔºåÂü∫‰∫éjsÁöÑÊÄùÊÉ≥ÔºåÂú®js‰∏≠ÔºåÂÖ®Â±ÄÂèòÈáèÂèñÂÜ≥‰∫éËØ•ÂèòÈáèÂÆö‰πâÁöÑ‰ΩçÁΩÆÔºå‰º†ÁªüwebÁºñÁ®ã‰∏≠ÔºåÊú™Ê∑ªÂä†ÂÆö‰πâÁ¨¶Âè∑Ôºàvar, let, constÔºâÁöÑÂèòÈáèÈÉΩÂèØË¢´Áß∞‰∏∫‚ÄùÂÖ®Â±ÄÂèòÈáè‚Äù,Âç≥‰ΩøÊòØ var ‰πüÂ≠òÂú®‰∏Ä‰∏™ÂèòÈáèÊèêÂçáÁöÑÈóÆÈ¢ò„ÄÇPython‰∏≠ÂÖ®Â±ÄÂèòÈáè‰∏ÄËà¨Êúâ‰∏§ÁßçÊñπÂºèÔºö Â£∞ÊòéÂºèÂÖ≥ÈîÆÂ≠ó global ÂÆö‰πâÂèòÈáèÊ≥ï„ÄÇÂèØ‰ª•Áõ¥Êé•ËøõË°åÂÖ®Â±ÄÂèòÈáèÂ£∞Êòé„ÄÇglobal OLD_URL Ê®°ÂùóÊ≥ïÊ®°ÂùóÊ≥ïÂíåjsÂ§ßÂêåÂ∞èÂºÇÔºåjs‰∏≠Ê≤°ÊúâÂÖ≥ÈîÆÂ≠ó global Ôºå‰ΩÜÊòØÊ®°ÂùóÂºïÁî®‰πüÊòØÈùûÂ∏∏Â•ΩÁî®ÁöÑÔºåÂú®‰∏≠Â§ßÂûãÈ°πÁõÆ‰∏≠ÔºåÊàë‰ª¨ÊääÈ°πÁõÆ‰∏≠Áî®Âà∞ÁöÑÂ∏∏ÈáèÂçïÁã¨ÊèêÂèñÂá∫Êù•ÊîæÁΩÆÂú®jsÊñá‰ª∂‰∏≠„ÄÇÂú®ÈÄöËøá import Êù•ÂØºÂÖ•‰ΩøÁî®„ÄÇPython‰∏≠‰πüÊòØÂ¶ÇÊ≠§„ÄÇ Èô§Ê≥ïÔºö / ÊµÆÁÇπÊï∞Èô§Ê≥ïÔºåÂç≥‰æøÊòØ‰∏§‰∏™Êï¥Êï∞Áõ∏Èô§ÔºåÁªìÊûú‰πüÊòØÊµÆÁÇπÊï∞ // Âú∞ÊùøÈô§Ôºå‰∏§‰∏™Êï¥Êï∞ÁöÑÈô§Ê≥ï‰ªçÁÑ∂ÊòØÊï¥Êï∞ÔºåÁªìÊûúÂè™ÂèñÊï¥Êï∞ 10 // 3 =„Äã 3 % Ê±ÇÊ®°Âèñ‰Ωô Â≠óÁ¨¶‰∏≤ÁºñÁ†ÅÔºö ord() Êï∞Ëé∑ÂèñÂ≠óÁ¨¶ÁöÑÊï¥Êï∞Ë°®Á§∫ chr() ÂáΩÊï∞ÊääÁºñÁ†ÅËΩ¨Êç¢‰∏∫ÂØπÂ∫îÁöÑÂ≠óÁ¨¶PythonÁöÑÂ≠óÁ¨¶‰∏≤Á±ªÂûãÊòØstrÔºåÂú®ÂÜÖÂ≠ò‰∏≠‰ª•UnicodeË°®Á§∫PythonÂØπbytesÁ±ªÂûãÁöÑÊï∞ÊçÆÁî®Â∏¶bÂâçÁºÄÁöÑÂçïÂºïÂè∑ÊàñÂèåÂºïÂè∑Ë°®Á§∫ x = b‚Äôabc‚Äô encode() ÊñπÊ≥ïÂèØ‰ª•ÁºñÁ†Å‰∏∫ÊåáÂÆöÁöÑbytes decode() ÊñπÊ≥ï ÊääbytesÂèò‰∏∫strÂ¶ÇÊûúbytes‰∏≠Âè™Êúâ‰∏ÄÂ∞èÈÉ®ÂàÜÊó†ÊïàÁöÑÂ≠óËäÇÔºåÂèØ‰ª•‰º†ÂÖ•errors=‚Äôignore‚ÄôÂøΩÁï•ÈîôËØØÁöÑÂ≠óËäÇÔºö b‚Äô\xe4\xb8\xad\xff‚Äô.decode(‚Äòutf-8‚Äô, errors=‚Äôignore‚Äô) len() ÊñπÊ≥ïËÆ°ÁÆóstrÁöÑÂ≠óÁ¨¶Êï∞1‰∏™‰∏≠ÊñáÂ≠óÁ¨¶ÁªèËøáUTF-8ÁºñÁ†ÅÂç†Áî®3‰∏™Â≠óËäÇÔºåËÄå1‰∏™Ëã±ÊñáÂ≠óÁ¨¶Âè™Âç†Áî®1‰∏™Â≠óËäÇ„ÄÇ ÂùöÊåÅ utf-8 ÁºñÁ†Å Êñá‰ª∂ÂºÄÂ§¥ÂÜô‰∏äÔºö 12#!/usr/bin/env python3# -*- coding: utf-8 -*- Ê†ºÂºèÂåñÔºö Python‰∏éC‰∏ÄËá¥ÔºåÈÉΩÈááÁî® % ÂÆûÁé∞%ËøêÁÆóÁ¨¶Â∞±ÊòØÁî®Êù•Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÁöÑ„ÄÇÂú®Â≠óÁ¨¶‰∏≤ÂÜÖÈÉ®Ôºå%sË°®Á§∫Áî®Â≠óÁ¨¶‰∏≤ÊõøÊç¢Ôºå%dË°®Á§∫Áî®Êï¥Êï∞ÊõøÊç¢&#39;age: %s. nmae: %s&#39; %(25, fhl) format() Ê†ºÂºèÂåñÔºåÊØîËæÉÈ∫ªÁÉ¶ list Âíå tuple : list : ÂàóË°®„ÄÇÁ±ªÊï∞ÁªÑ Arrayclassmates = [&#39;xaioming&#39;, &#39;xiaohua&#39;, &#39;xiaoliu&#39;]Ëé∑ÂèñÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† classmates[len(classmates) - 1] ÊàñËÄÖ classmates[-1] list ÊñπÊ≥ïÔºöappend(content) Êú´Â∞æÊèíÂÖ•insert(index, content) ÊèíÂÖ•ÊåáÂÆö‰ΩçÁΩÆpop() Âà†Èô§Êú´Â∞æÂÖÉÁ¥†pop(index) Âà†Èô§ÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥† tuple ÂÖÉÁªÑÔºåÊúâÂ∫èÂàóË°®‰∏ÄÊó¶ÂàùÂßãÂåñÔºå‰∏çËÉΩÊõ¥Êîπ„ÄÇÊ≤°Êúâappend„ÄÅinsertÊñπÊ≥ïÔºåÂÖ∂‰ªñÂíålist‰∏ÄËá¥Âõ†‰∏∫‰∏çËÉΩÊõ¥ÊîπÔºåÊïÖÊõ¥‰∏∫ÂÆâÂÖ®ÔºåËÉΩÁî®tuple‰ª£ÊõølistÂ∞±Â∞ΩÈáèÁî®tupleÔºÅt = (1,)t = (&#39;str&#39;, 23, [&#39;a&#39;]) Êù°‰ª∂Âà§Êñ≠: 123456if age &gt;= 18: print('ÊàêÂπ¥‰∫∫')elif age &gt;= 1: print('ÂπºÂÑøÊúü')else: print('Â©¥ÂÑøÊúü') int() ËΩ¨Âåñ‰∏∫Êï¥Êï∞ÂáΩÊï∞ Âæ™ÁéØ for‚Ä¶inÂæ™ÁéØ while Âæ™ÁéØ range() ÁîüÊàê‰∏Ä‰∏™Êï¥Êï∞Â∫èÂàó,ÂÜçÈÄöËøálist()ÂáΩÊï∞ÂèØ‰ª•ËΩ¨Êç¢‰∏∫list break ÈÄÄÂá∫Âæ™ÁéØ ÈÖçÂêàif‰ΩøÁî® continue Ë∑≥ËøáÂæ™ÁéØ ÈÖçÂêàif‰ΩøÁî® ‰ΩøÁî®dictÂíåsetÔºödictionaryÂ≠óÂÖ∏ÔºåÂÖ∂‰ªñËØ≠Ë®ÄÂè´mapÔºå‰ΩøÁî®key-valueÂ≠òÂÇ®Ôºå‰πüÂ∞±ÊòØjsÁöÑÂØπË±°„ÄÇjsonÁöÑËØùÔºåÊú¨Ë¥®ÊòØÂ≠óÁ¨¶‰∏≤Ôºå‰πüÂèØ‰ª•Á±ªÊØîÂêß„ÄÇd = {&#39;name&#39;: &#39;fhl&#39;, &#39;age&#39;: 22, }PS: Âå∫Âà´ÁÇπÔºö jsÁöÑÂØπË±°ÂèØ‰ª•‰ΩøÁî® . ÊñπÊ≥ïË∞ÉÁî®ÔºåPythonÁõÆÂâçÂè™ËÉΩ d[‚Äòage‚Äô]ÊàñËÄÖ d.get(‚Äòage‚Äô,-1)Ëé∑ÂèñÂ≠òÂÇ®ÁöÑÂÄºÂà†Èô§‰∏Ä‰∏™keyÔºåÂèØ‰ª•Áî® pop(key)dictionaryÊòØÁ©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÊñπÊ≥ïÔºålistÊó∂Èó¥Êç¢Á©∫Èó¥ setÂêåjs‰∏≠ÁöÑkeyÂêåÊ†πÂêåÊ∫êÔºåÂ≠òÂÇ®keyÁöÑÈõÜÂêà,‰∏çÂ≠òÂÇ®valueÔºå‰∏îkey‰∏çÈáçÂ§çÔºÅÔºÅÔºÅÂàõÂª∫setÔºåÈúÄË¶Å‰∏Ä‰∏™list‰Ωú‰∏∫ËæìÂÖ•ÈõÜÂêà add(key) Ê∑ªÂä†ÂÖÉÁ¥†Âà∞set‰∏≠ÔºåÈáçÂ§çÊ∑ªÂä†‰∏ç‰ºöÊúâÊïàÊûú remove(key) Âà†Èô§ÂÖÉÁ¥† setÂèØÁúãÂÅöÊàêÊó†Â∫è„ÄÅÊó†ÈáçÂ§çÂÖÉÁ¥†ÁöÑÈõÜÂêàÔºåÂõ†Ê≠§Ôºå‰∏§‰∏™setÂèØ‰ª•ÂÅöÊï∞Â≠¶ÊÑè‰πâ‰∏äÁöÑ‰∫§ÈõÜ„ÄÅÂπ∂ÈõÜÁ≠â1234s1 = set([1, 3, 54])s2 = set([2, 3, 4])s1 &amp; s2 # Âπ∂ ÔºåÂçï‰∏™&amp; s1 | s2 # | ÊàñÔºåÂçï‰∏™| ÂáΩÊï∞Ëá™Â∏¶ÂáΩÊï∞ÔºàÂÜÖÁΩÆÂáΩÊï∞ÔºâÔºö abs() „ÄÅmax()Êï∞ÊçÆÁ±ªÂûãËΩ¨Êç¢ÂáΩÊï∞Ôºö int() float() str() bool() ÂèÇËÄÉjsÁöÑÊï∞ÊçÆËΩ¨Êç¢ÂáΩÊï∞ String() Number() Boolean() ÂÆö‰πâÂáΩÊï∞ÔºöÂÖ≥ÈîÆÂ≠óÔºö def, ‰æùÊ¨°ÂÜôÂá∫ÂáΩÊï∞Âêç„ÄÅÊã¨Âè∑„ÄÅÊã¨Âè∑‰∏≠ÁöÑÂèÇÊï∞ÂíåÂÜíÂè∑:,ÁÑ∂ÂêéÔºåÂú®Áº©ËøõÂùó‰∏≠ÁºñÂÜôÂáΩÊï∞‰ΩìÔºåÂáΩÊï∞ÁöÑËøîÂõûÂÄºÁî®returnËØ≠Âè•ËøîÂõûÁ±ªÊØîjs: ÂÖ≥ÈîÆÂ≠ófunction ÔºåÂêéÈù¢ÈÉΩ‰∏ÄËá¥ÔºåÁÑ∂ÂêéÊää ÂÜíÂè∑ Êç¢Êàê js‰∏≠ÁöÑ Â§ßÊã¨Âè∑ Âç≥ÂèØ 12345def my_abs(num): if x &gt;= 10: return x else: return -x ÊâßË°åÂáΩÊï∞Ôºö Áõ∏ÊØî‰∫éPythonÔºåjsÁöÑÂáΩÊï∞ÊâßË°åÊØîËæÉÁÆÄÂçïÔºåÂÆö‰πâÂÆåÂáΩÊï∞ÂêéÔºåÁõ¥Êé•Áî®ÂáΩÊï∞ÂêçÂ≠óÂä†‰∏ÄÂØπÂ∞èÊã¨Âè∑Â∞±ÂèØ‰ª•Ë∞ÉÁî®ÂΩìÂâçÂáΩÊï∞Ôºå‰ΩÜPythonË≤å‰ººÂæóÂÖàÂØºÂÖ•ËØ•ÂáΩÊï∞ÔºåÊâçÂèØ‰ª•Ë∞ÉÁî® 12from test import my_absmy_abs(-1) passÂÖ≥ÈîÆÂ≠ópassËØ≠Âè•Âï•ÈÉΩ‰∏çÂÅöÔºåÂ∞±Âíå0‰∏ÄÊ†∑ÔºåÁî®Êù•Âç†‰ΩçÁöÑ„ÄÇËÆ©Á®ãÂ∫èÂèØ‰ª•Ë∑ëËµ∑Êù•„ÄÇÂèØ‰ª•ÁêÜËß£‰∏∫ÊñóÂú∞‰∏ªÊó∂Ôºå‰Ω†ÁöÑÁâåÂ§ß‰∏çËøá‰∏äÂÆ∂ÁöÑÔºå‰Ω†Â∞±ÂèØ‰ª•Â§ßÂêº‰∏ÄÂ£∞Ôºö pass/ËøáÔºåËÆ©ÂçïÁ∫øÁ®ãÁöÑÊñóÂú∞‰∏ªÂèØ‰ª•Ëµ∞‰∏ãÂéªÔºåËÄå‰∏çËá≥‰∫éÂç°Âú®ËøôÈáåÔºåËÆ©ÈòüÂèãÂñ∑‰Ω† PythonÂáΩÊï∞ËøîÂõûÂÄºjsÂáΩÊï∞Ê≤°ÊúâreturnËØ≠Âè•Êó∂ÔºåËøîÂõûÁöÑÊòØ undefined„ÄÇPythonËøîÂõûÁöÑÊòØ NoneÔºåÂú®Â≠òÂú®ËøîÂõûÂ§ö‰∏™ÂÄºÁöÑÊÉÖÂÜµ‰∏ã„ÄÇPythonËøîÂõûÁöÑÊòØtupleÔºå‰∏Ä‰∏™tupleÂèØ‰ª•Ë¢´Â•ΩÂ§ö‰∏™ÂèòÈáèÊé•Êî∂ÔºåÂÖ∑‰ΩìÂú∫ÊôØÂèÇËÄÉES6ÁöÑËß£ÊûÑËµãÂÄºÔºå‰∏ÄÊØõ‰∏ÄÊ†∑„ÄÇ ÈªòËÆ§ÂèÇÊï∞Ê≤°Âï•Â•ΩËÆ≤ÁöÑÔºåÂíåES6ÂáΩÊï∞ÈªòËÆ§ÂèÇÊï∞‰∏ÄÊØõ‰∏ÄÊ†∑ÔºåÈªòËÆ§ÂèÇÊï∞Âú®ÂêéÔºåÂøÖÂ°´ÂèÇÊï∞Âú®Ââç ÂèØÂèòÂèÇÊï∞ÂèÇÊï∞ÂâçÈù¢Ê∑ªÂä† * ÔºåÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÂèÇÊï∞numbersÊé•Êî∂Âà∞ÁöÑÊòØ‰∏Ä‰∏™tupleÔºåÂõ†Ê≠§ÔºåÂáΩÊï∞‰ª£Á†ÅÂÆåÂÖ®‰∏çÂèò„ÄÇ‰ΩÜÊòØÔºåË∞ÉÁî®ËØ•ÂáΩÊï∞Êó∂ÔºåÂèØ‰ª•‰º†ÂÖ•‰ªªÊÑè‰∏™ÂèÇÊï∞ÔºåÂåÖÊã¨0‰∏™ÂèÇÊï∞ÔºåÊúâÁÇπÊÑèÊÄùÂ••,Âç≥‰æøÊàë‰ª¨ÁöÑ‰º†ÂèÇÊòØlistÊàñËÄÖtupleÔºå‰πüÂèØ‰ª•Âú®ÂèÇÊï∞ÂâçÂä† * Ôºå‰ΩøÂæólistÊàñËÄÖ tuple Âèò‰∏∫ÂèØÂèòÂèÇÊï∞‰º†ËøõÂéª ÂÖ≥ÈîÆÂ≠óÂèÇÊï∞**kyÂèØÂèòÂèÇÊï∞ÂÖÅËÆ∏‰Ω†‰º†ÂÖ•0‰∏™Êàñ‰ªªÊÑè‰∏™ÂèÇÊï∞ÔºåËøô‰∫õÂèØÂèòÂèÇÊï∞Âú®ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ëá™Âä®ÁªÑË£Ö‰∏∫‰∏Ä‰∏™tuple„ÄÇËÄåÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ÂÖÅËÆ∏‰Ω†‰º†ÂÖ•0‰∏™Êàñ‰ªªÊÑè‰∏™Âê´ÂèÇÊï∞ÂêçÁöÑÂèÇÊï∞ÔºåËøô‰∫õÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Âú®ÂáΩÊï∞ÂÜÖÈÉ®Ëá™Âä®ÁªÑË£Ö‰∏∫‰∏Ä‰∏™dict„ÄÇÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Êúâ‰ªÄ‰πàÁî®ÔºüÂÆÉÂèØ‰ª•Êâ©Â±ïÂáΩÊï∞ÁöÑÂäüËÉΩ„ÄÇÊØîÂ¶ÇÔºåÂú®personÂáΩÊï∞ÈáåÔºåÊàë‰ª¨‰øùËØÅËÉΩÊé•Êî∂Âà∞nameÂíåageËøô‰∏§‰∏™ÂèÇÊï∞Ôºå‰ΩÜÊòØÔºåÂ¶ÇÊûúË∞ÉÁî®ËÄÖÊÑøÊÑèÊèê‰æõÊõ¥Â§öÁöÑÂèÇÊï∞ÔºåÊàë‰ª¨‰πüËÉΩÊî∂Âà∞„ÄÇËØïÊÉ≥‰Ω†Ê≠£Âú®ÂÅö‰∏Ä‰∏™Áî®Êà∑Ê≥®ÂÜåÁöÑÂäüËÉΩÔºåÈô§‰∫ÜÁî®Êà∑ÂêçÂíåÂπ¥ÈæÑÊòØÂøÖÂ°´È°πÂ§ñÔºåÂÖ∂‰ªñÈÉΩÊòØÂèØÈÄâÈ°πÔºåÂà©Áî®ÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Êù•ÂÆö‰πâËøô‰∏™ÂáΩÊï∞Â∞±ËÉΩÊª°Ë∂≥Ê≥®ÂÜåÁöÑÈúÄÊ±Ç 12345678def person(name, age, **kw): if 'city' in kw: # ÊúâcityÂèÇÊï∞ pass if 'job' in kw: # ÊúâjobÂèÇÊï∞ pass print('name:', name, 'age:', age, 'other:', kw) ÂèÇÊï∞ÂÆö‰πâÁöÑÈ°∫Â∫èÂøÖÈ°ªÊòØÔºöÂøÖÈÄâÂèÇÊï∞„ÄÅÈªòËÆ§ÂèÇÊï∞„ÄÅÂèØÂèòÂèÇÊï∞„ÄÅÂëΩÂêçÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ÂíåÂÖ≥ÈîÆÂ≠óÂèÇÊï∞„ÄÇ ÊÄªÁªìÔºö *argsÊòØÂèØÂèòÂèÇÊï∞ÔºåargsÊé•Êî∂ÁöÑÊòØ‰∏Ä‰∏™tupleÔºõ **kwÊòØÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ÔºåkwÊé•Êî∂ÁöÑÊòØ‰∏Ä‰∏™dict„ÄÇ ÈÄíÂΩíÂáΩÊï∞ÔºöÂ∞æÈÄíÂΩí‰ºòÂåñ1234def fact(n): if n==1: return 1 return n * fact(n - 1) ‰ª•‰∏ä‰ª£Á†ÅÊòØPythonÁöÑÈÄíÂΩí‰ª£Á†ÅÔºåÈ¢ùÔºåÂèØËÉΩËÄ¶ÂêàÊÄßËæÉÈ´òÔºåÂáΩÊï∞ÂÜÖÈÉ®‰ΩøÁî®‰∫ÜÂΩìÂâçÂáΩÊï∞ÁöÑÂêçÂ≠óÔºåËøôÈ´òÂ∫¶ËÄ¶ÂêàÔºåÂú®jsÈáåÈù¢Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá arguments.calleeËß£ÂÜ≥Ë∞ÉÁî®Ëá™Ë∫´ÁöÑÈóÆÈ¢òÔºåÂáèÂ∞èËÄ¶Âêà„ÄÇ‰ª•‰∏ãÊòØjs‰ª£Á†ÅÔºö 123456function fact(n) &#123; if( n == 1 ) &#123; return 1 &#125; return n * arguments.callee(n-1)&#125; È´òÁ∫ßÁâπÊÄßÔºöÂàáÁâá sliceÊìç‰ΩúÁ¨¶sliceÂàáÁâáÊìç‰ΩúÁ¨¶ÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÁªôjsÁöÑslice()ÂáΩÊï∞ÂÅö‰∫Ü‰∏Ä‰∏™ËØ≠Ê≥ïÁ≥ñÔºåÂÖ∂‰ªñÈÉΩ‰∏ÄËá¥ 12L[0:5] #[start:end]‰ΩÜ‰∏çÂåÖÊã¨endÔºåL‰∏∫listÊàñtupleL[-2:-1] #ÂÄíÊï∞Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Á¥¢Âºï‰∏∫-1 ÊâÄÊúâÊï∞ÔºåÊØè5‰∏™Âèñ‰∏Ä‰∏™ 123456L = list(range(100))L[:10] # ÂâçÂçÅ‰∏™Êï∞L[:-10] # ÂêéÂçÅ‰∏™Êï∞ L[:10:2] # Ââç10‰∏™Êï∞ÔºåÊØè‰∏§‰∏™Âèñ‰∏Ä‰∏™L[::5] # ÊâÄÊúâÊï∞ÔºåÊØè5‰∏™Âèñ‰∏Ä‰∏™L[:] # ËµãÂÄºlist ÂàáÁâá‰πüÂèØ‰ª•ÂØπÂ≠óÁ¨¶‰∏≤‰ΩøÁî®Ôºå‰∏çÈúÄË¶ÅÂçïÁã¨ÁöÑÁ±ª‰ººsubstring()ÊñπÊ≥ï Ëø≠‰ª£ÂÆö‰πâÔºö Âæ™ÁéØÈÅçÂéÜlistÊàñËÄÖtupleÔºåÂè´ÂÅöËø≠‰ª£„ÄÇËø≠‰ª£ÈÄöËøá for‚Ä¶in‚Ä¶Êù•ÂÆåÊàêPythonÂèØ‰ª•Ëø≠‰ª£‰∏ÄÂàáÂèØËø≠‰ª£ÁöÑ‰∏úË•øÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶ÊòØÂèØËø≠‰ª£ÂØπË±°Âë¢Ôºü 12from collections import Iterableisinstance('abc', Iterable) # Âà§Êñ≠strÊòØÂê¶ÊòØÂèØËø≠‰ª£ÁöÑÂØπË±°ÔºåËøîÂõûBoolean ÂàóË°®ÁîüÊàêÂºèÂ∞±ÊòØÁÆÄÂåñ‰∫ÜÂ§çÊùÇÂàóË°®ÁîüÊàêÁöÑÁπÅÁêêÊ≠•È™§ 1234567L = [] # ÂÆûÁé∞‰∏Ä‰∏™ 1*1, 2*2,....10*10ÁöÑÂàóË°®for x in range(1, 11): # ‰º†ÁªüÊñπÊ≥ï L.append( x * x )[x*x for x in range(1, 10)] # ÂàóË°®ÁîüÊàêÂô®[x*x for x in range(1, 10) if x % 2 == 0 ] # ËøòÂèØ‰ª•Âä†‰∏ä if Âà§Êñ≠[m+n for m in 'abc' for n in 'xyz'] # ÂèåÂ±ÇÂæ™ÁéØ Êé•‰∏ãÊù•ÔºåËøôË°å‰ª£Á†ÅÂèØËÉΩ‰ºöËÆ©jserÁ®çÂæÆÁæ°ÊÖï‰∏Ä‰∏ãÔºåÈÇ£Â∞±ÊòØÊìç‰ΩúÊñá‰ª∂ 12import os # ÊãøÂà∞‰∫ÜÂΩìÂâçÁõÆÂΩïÁöÑÊâÄÊúâÊñá‰ª∂Â§π[d for d in os.listdir('.')] js‰∏çËÉΩÊìç‰ΩúÊñá‰ª∂ÁöÑÔºåÂΩìÁÑ∂Ë°®‰∫≤ node.jsÊòØÂèØ‰ª•ÁöÑdictÁöÑitems() ÊñπÊ≥ïÂèØ‰ª•ÂêåÊó∂Ëø≠‰ª£keyÂíåvalueÔºåÈÇ£‰πàÔºö 12d = &#123;'x': 'A', 'y': 'B', 'z': 'C'&#125;[k + '=' + v for k, v in d.items() ] 12d = &#123;'Hello', 'WorLD'&#125; # Êäälist‰∏≠ÊâÄÊúâÁöÑÂ≠óÁ¨¶‰∏≤Â∞èÂÜô[s.lower() for s in d] ÁîüÊàêÂô®ÂàóË°®ÂÖÉÁ¥†ÂèØ‰ª•ÊåâÁÖßÊüêÁßçÁÆóÊ≥ïÊé®ÁÆóÂá∫Êù•ÔºåÈÇ£Êàë‰ª¨ÊòØÂê¶ÂèØ‰ª•Âú®Âæ™ÁéØÁöÑËøáÁ®ã‰∏≠‰∏çÊñ≠Êé®ÁÆóÂá∫ÂêéÁª≠ÁöÑÂÖÉÁ¥†Âë¢ÔºüËøôÊ†∑Â∞±‰∏çÂøÖÂàõÂª∫ÂÆåÊï¥ÁöÑlistÔºå‰ªéËÄåËäÇÁúÅÂ§ßÈáèÁöÑÁ©∫Èó¥„ÄÇÂú®Python‰∏≠ÔºåËøôÁßç‰∏ÄËæπÂæ™ÁéØ‰∏ÄËæπËÆ°ÁÆóÁöÑÊú∫Âà∂ÔºåÁß∞‰∏∫Áîügenerator ÂàóË°®ÁîüÊàêÂºèÁöÑ [] ÊîπÊàê () Âç≥ÂèØÂàõÂª∫ÁîüÊàêÂô®12L = [x * x for x in range(10) ] #ÂàóË°®ÁîüÊàêÂºèg = (x * x for x in range(10) ) # gÊòØ‰∏Ä‰∏™generator„ÄÅnextÔºàÔºâÊñπÊ≥ïÊâìÂç∞ÂÄº generator‰øùÂ≠òÁöÑÊòØÁÆóÊ≥ïÔºåÊØèÊ¨°Ë∞ÉÁî®next(g)ÔºåÂ∞±ËÆ°ÁÆóÂá∫gÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂÄºÔºåÁõ¥Âà∞ËÆ°ÁÆóÂà∞ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÊ≤°ÊúâÊõ¥Â§öÁöÑÂÖÉÁ¥†Êó∂ÔºåÊäõÂá∫StopIterationÁöÑÈîôËØØ‰∏ÄËà¨ÔºågeneratorÁî®forÊù•Âæ™ÁéØÔºå‰∏çÁî®next() 12for n in g: print(n) Â¶ÇÊûú‰∏Ä‰∏™ÂáΩÊï∞ÂÆö‰πâ‰∏≠ÂåÖÂê´yieldÂÖ≥ÈîÆÂ≠óÔºåÈÇ£‰πàËøô‰∏™ÂáΩÊï∞Â∞±‰∏çÂÜçÊòØ‰∏Ä‰∏™ÊôÆÈÄöÂáΩÊï∞ÔºåËÄåÊòØ‰∏Ä‰∏™generatorÔºö1234567def fib(max): n, a, b = 0, 0, 1 while n &lt; max: yield b a, b = b, a + b n = n + 1 return 'done' PS::: eneratorÂíåÂáΩÊï∞ÁöÑÊâßË°åÊµÅÁ®ã‰∏ç‰∏ÄÊ†∑„ÄÇÂáΩÊï∞ÊòØÈ°∫Â∫èÊâßË°åÔºåÈÅáÂà∞returnËØ≠Âè•ÊàñËÄÖÊúÄÂêé‰∏ÄË°åÂáΩÊï∞ËØ≠Âè•Â∞±ËøîÂõû„ÄÇËÄåÂèòÊàêgeneratorÁöÑÂáΩÊï∞ÔºåÂú®ÊØèÊ¨°Ë∞ÉÁî®next()ÁöÑÊó∂ÂÄôÊâßË°åÔºåÈÅáÂà∞yieldËØ≠Âè•ËøîÂõûÔºåÂÜçÊ¨°ÊâßË°åÊó∂‰ªé‰∏äÊ¨°ËøîÂõûÁöÑyieldËØ≠Âè•Â§ÑÁªßÁª≠ÊâßË°åÁî®forÂæ™ÁéØË∞ÉÁî®generatorÊó∂ÔºåÂèëÁé∞Êãø‰∏çÂà∞generatorÁöÑreturnËØ≠Âè•ÁöÑËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÊãøÂà∞ËøîÂõûÂÄºÔºåÂøÖÈ°ªÊçïËé∑StopIterationÈîôËØØÔºåËøîÂõûÂÄºÂåÖÂê´Âú®StopIterationÁöÑvalue‰∏≠Ôºö 1234567g = fib()while True: try: x = next(g) except StopIteration as e: print('Generator return value:', e.value) break Ëø≠‰ª£Âô®ÂèØ‰ª•Áõ¥Êé•‰ΩúÁî®‰∫éforÂæ™ÁéØÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâ‰ª•‰∏ãÂá†ÁßçÔºö ‰∏ÄÁ±ªÊòØÈõÜÂêàÊï∞ÊçÆÁ±ªÂûãÔºåÂ¶Çlist„ÄÅtuple„ÄÅdict„ÄÅset„ÄÅstrÁ≠âÔºõ ‰∏ÄÁ±ªÊòØgeneratorÔºåÂåÖÊã¨ÁîüÊàêÂô®ÂíåÂ∏¶yieldÁöÑgenerator function„ÄÇ Ëøô‰∫õÂèØ‰ª•Áõ¥Êé•‰ΩúÁî®‰∫éforÂæ™ÁéØÁöÑÂØπË±°ÁªüÁß∞‰∏∫ÂèØËø≠‰ª£ÂØπË±°ÔºöIterable„ÄÇ ÂèØ‰ª•‰ΩøÁî®isinstance()*Âà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶ÊòØ *Iterable ÂØπË±° ËÄåÁîüÊàêÂô®‰∏ç‰ΩÜÂèØ‰ª•‰ΩúÁî®‰∫éforÂæ™ÁéØÔºåËøòÂèØ‰ª•Ë¢´next()ÂáΩÊï∞‰∏çÊñ≠Ë∞ÉÁî®Âπ∂ËøîÂõû‰∏ã‰∏Ä‰∏™ÂÄºÔºåÁõ¥Âà∞ÊúÄÂêéÊäõÂá∫StopIterationÈîôËØØË°®Á§∫Êó†Ê≥ïÁªßÁª≠ËøîÂõû‰∏ã‰∏Ä‰∏™ÂÄº‰∫Ü„ÄÇ ÂèØ‰ª•Ë¢´next()ÂáΩÊï∞Ë∞ÉÁî®Âπ∂‰∏çÊñ≠ËøîÂõû‰∏ã‰∏Ä‰∏™ÂÄºÁöÑÂØπË±°Áß∞‰∏∫Ëø≠‰ª£Âô®ÔºöIterator„ÄÇ ÂèØ‰ª•‰ΩøÁî® isinstance() Âà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶ÊòØ Iterator ÂØπË±°Ôºö 1isinstance([], Iterator) ÁîüÊàêÂô®ÈÉΩÊòØIteratorÂØπË±°Ôºå‰ΩÜlist„ÄÅdict„ÄÅstrËôΩÁÑ∂ÊòØIterableÔºåÂç¥‰∏çÊòØIterator„ÄÇ Êäälist„ÄÅdict„ÄÅstrÁ≠âIterableÂèòÊàê Iterator ÂèØ‰ª•‰ΩøÁî® iter() ÂáΩÊï∞Ôºö 1isinstance(iter([]), Iterator) # True PS: PythonÁöÑforÂæ™ÁéØÊú¨Ë¥®‰∏äÂ∞±ÊòØÈÄöËøá‰∏çÊñ≠Ë∞ÉÁî®next()ÂáΩÊï∞ÂÆûÁé∞ÁöÑ ÂáΩÊï∞ÂºèÁºñÁ®ãÈ´òÈò∂ÂáΩÊï∞ÂáΩÊï∞ÂêçÊòØÊåáÂêëÂáΩÊï∞ÁöÑÂèòÈáèÔºàÂêåjs ÔºâÔºåÂç≥ÂáΩÊï∞Êú¨Ë∫´ÂèØ‰ª•Ë¢´ÂèòÈáèÊåáÁùÄÔºåÂú®ÂèòÈáèÂºïÁî®‰πüÊòØÂèØ‰ª•ÁöÑ‰∏Ä‰∏™ÂáΩÊï∞Êé•ÂèóÂè¶‰∏Ä‰∏™ÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞ÔºåËøôÁßçÂáΩÊï∞Áß∞‰∏∫È´òÈò∂ÂáΩÊï∞ÔºàÂêåjsÔºâ map/reducemap Âíå js ÁöÑÂäüËÉΩ‰∏ÄËá¥ÔºåÂç≥ÈÉΩÊòØ‰∏∫ Iterable ÁöÑÂÖ®ÈÉ®ÂÖÉÁ¥†Â∫îÁî®‰∏ÄÁßçËßÑÂàô„ÄÇËøô‰∏™ËßÑÂàô‰∏ÄËà¨ÊòØ‰∏Ä‰∏™ÂáΩÊï∞„ÄÇ‰∏çËøáËØ≠Ê≥ï‰∏äÁ®çÊúâ‰∏çÂêå,jsÁöÑmapÊòØArrayÁöÑ‰∏Ä‰∏™ÊñπÊ≥ï„ÄÇ python: map()ÂáΩÊï∞Êé•Êî∂‰∏§‰∏™ÂèÇÊï∞Ôºå‰∏Ä‰∏™ÊòØÂáΩÊï∞Ôºå‰∏Ä‰∏™ÊòØIterableÔºåmapÂ∞Ü‰º†ÂÖ•ÁöÑÂáΩÊï∞‰æùÊ¨°‰ΩúÁî®Âà∞Â∫èÂàóÁöÑÊØè‰∏™ÂÖÉÁ¥†ÔºåÂπ∂ÊääÁªìÊûú‰Ωú‰∏∫Êñ∞ÁöÑIteratorËøîÂõû„ÄÇ 12345def f(x): return x*xr = map(f, [1, 2, 3, 4]) # ËøîÂõûÁöÑÊòØlistÊØèÈ°πÁöÑÂπ≥Êñπlist(map(str, [1, 2, 32, 56]) # ÊääÊØè‰∏ÄÈ°πÂèò‰∏∫Â≠óÁ¨¶‰∏≤ 123456789//jsÂÆûÁé∞const arr = [1, 2, 3, 4]const r = arr.map(function(item) &#123; return item*item&#125;)// ES6const r = arr.map(item =&gt; &#123; return iten*item&#125;) ‰∏∫‰ªÄ‰πàjsÁöÑmapÂ∞±Âè™ÊòØArrayÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÂë¢ÔºüÊàë‰∏™‰∫∫ËßâÂæó„ÄÇjsÁöÑÊï∞ÊçÆÁªìÊûÑÂπ∂Ê≤°ÊúâPythonÈÇ£‰πàÁÅµÊ¥ªÔºåÂõ†‰∏∫jsÁöÑforÂæ™ÁéØÂè™ËÉΩÂæ™ÁéØArrayÂíåObjectÔºåËÄåÂèçËßÇPythonÂ∞±ÊØîËæÉÂ§ö‰∫ÜÔºåÊú¨Ë¥®Êù•ËØ¥ÔºåÂ∞±ÊòØ Iterable Êï∞ÊçÆÁªìÊûÑjsÂè™ÊúâArrayÂíåObject„ÄÇËÄåPythonÊúâÂæàÂ§öÔºåÈô§‰∫ÜlistÂíåtupleÔºåËøòÊúâstring‰πüÁÆóÔºåÁ≠âÁ≠â reducereduceÊää‰∏Ä‰∏™ÂáΩÊï∞‰ΩúÁî®Âú®‰∏Ä‰∏™Â∫èÂàó[x1, x2, x3, ‚Ä¶]‰∏äÔºåËøô‰∏™ÂáΩÊï∞ÂøÖÈ°ªÊé•Êî∂‰∏§‰∏™ÂèÇÊï∞ÔºåreduceÊääÁªìÊûúÁªßÁª≠ÂíåÂ∫èÂàóÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÂÅöÁ¥ØÁßØËÆ°ÁÆó,ÂÖ∂ÊïàÊûúÂ∞±ÊòØÔºö 1reduce(f,[x1, x2, x3]) = f(f(f(x1, x2,x3))) #‰∏â‰∏™fÂÖ≥Á≥ªÔºüÂÖ∂ÂÆûËøôÂ∞±ËØ¥Êòé‰∫Üreduce()Ëøô‰∏™ÂáΩÊï∞ÁöÑ‰ΩúÁî®‰∫Ü„ÄÇ ÊØîÂ¶ÇËØ¥Â∫èÂàóÊ±ÇÂíåÔºö 1234from functools import reduce def add(x, y): return x + yreduce(add, [1, 3, 5, 7, 9]) #25 filter()Âíåmap()Á±ª‰ººÔºåfilter()‰πüÊé•Êî∂‰∏Ä‰∏™ÂáΩÊï∞Âíå‰∏Ä‰∏™Â∫èÂàó„ÄÇÂíåmap()‰∏çÂêåÁöÑÊòØÔºåfilter()Êää‰º†ÂÖ•ÁöÑÂáΩÊï∞‰æùÊ¨°‰ΩúÁî®‰∫éÊØè‰∏™ÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÊ†πÊçÆËøîÂõûÂÄºÊòØTrueËøòÊòØFalseÂÜ≥ÂÆö‰øùÁïôËøòÊòØ‰∏¢ÂºÉËØ•ÂÖÉÁ¥†„ÄÇ ‰æãÂ¶ÇÔºåÂú®‰∏Ä‰∏™list‰∏≠ÔºåÂà†ÊéâÂÅ∂Êï∞ÔºåÂè™‰øùÁïôÂ•áÊï∞ÔºåÂèØ‰ª•Ëøô‰πàÂÜôÔºö 12def is_odd(n): return n % 2 == 1 js‰∏≠ÁöÑfilterÂêåÊ†∑ÊòØArrayÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÁî®‰∫éËøáÊª§Êï∞ÁªÑÂπ∂ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑ 1234const arr = [5, 16, 35, 15, 48]const r = arr.filter(item =&gt; &#123; //ËøîÂõûrÊòØ‰∏Ä‰∏™Â§ß‰∫é18ÁöÑÊï∞ÁªÑ item &gt;= 18&#125;) Áõ∏ÊØî‰∫éjsÊù•ËØ¥„ÄÇPythonÁöÑfilterÂíåmapÁ±ª‰ººÔºåÈÉΩÂèØ‰ª•‰ΩúÁî®‰∫éIterableÊï∞ÊçÆÁ±ªÂûã sorted()ÊéíÂ∫èÂÜÖÁΩÆÂáΩÊï∞ÔºåÁî®Ê≥ïÂíåjsÁöÑsort()Á±ª‰ºº„ÄÇ‰ΩÜÊòØjsÁöÑsort()ÊñπÊ≥ïÂú®Êú™‰º†ÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§ÊåâÁÖßÂ≠óÁ¨¶ÁºñÁ†ÅÁöÑÈ°∫Â∫èËøõË°åÊéíÂ∫è„ÄÇ12L = [1, 5, 15, 25, 8]r = sorted(L) #1,5,8,15,25 jsÁöÑsort(): 12345let arr = [1, 5, 15, 25, 8]arr.sort() // 1,15,25,5,8arr.sort(function(a, b)&#123; //1,5,8,15,25 return a - b&#125;) Áúã‰∏ãsorted()ÁöÑÂº∫Â§ßÔºöÂèØ‰ª•‰º†ÂÖ•‰∏â‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏ÄÂ∞±ÊòØÊéíÂ∫èÁöÑlistÔºåÁ¨¨‰∫å‰∏™ÊòØkeyÁöÑËßÑÂàôÔºåÁ¨¨‰∏â‰∏™ÊòØÂèçËΩ¨ÂÄíÂèôÔºö 1sorted(['bov','lv','hln', 'Zomp'], key = str.lower, reverse = True) PS : sorted()‰πüÊòØ‰∏Ä‰∏™È´òÈò∂ÂáΩÊï∞„ÄÇÁî®sorted()ÊéíÂ∫èÁöÑÂÖ≥ÈîÆÂú®‰∫éÂÆûÁé∞‰∏Ä‰∏™Êò†Â∞ÑÂáΩÊï∞ ËøîÂõûÂáΩÊï∞ÁÆÄÂçïÁúã‰∫Ü‰∏ãËøîÂõûÂáΩÊï∞ÁöÑÂÆö‰πâÔºåÈáåÈù¢ÊèêÂà∞‰∫ÜÈó≠ÂåÖÔºåËøô‰∏™jsÈáåÈù¢‰πüÁªèÂ∏∏ÊèêÂà∞ÁöÑÊìç‰Ωú„ÄÇÁÆÄÂçïËØ¥ÔºåÈó≠ÂåÖÂ∞±ÊòØÂáΩÊï∞ÂµåÂ•óÂáΩÊï∞ÔºåÂÜÖÈÉ®ÁöÑÂáΩÊï∞‰øùÂ≠ò‰∫ÜÂ§ñÂ±ÇÂáΩÊï∞ÁöÑÂèòÈáèÁ≠âÂèÇÊï∞ÔºåÂú®Â§ñÈÉ®ÂáΩÊï∞Ë¢´ÈîÄÊØÅÂêéÔºåÂÜÖÈÉ®ÂáΩÊï∞‰æùÊóßÂèØ‰ª•ÊãøÂà∞Â§ñÈÉ®ÂáΩÊï∞ÁöÑ‰º†ÂèÇ„ÄÇËøô‰∏™Ê¶ÇÂøµjsÂíåPythonÊ≤°Â§ßÁöÑÂå∫Âà´„ÄÇÊ∑±Â±ÇÊ¨°ÁêÜËß£ÁöÑËØùÔºåÂèÇËÄÉÂè¶Â§ñ‰∏ÄÁØáÂçöÂÆ¢Ôºö https://www.cnblogs.com/fanghl/p/11417906.html ÂåøÂêçÂáΩÊï∞ÂÖ≥ÈîÆÂ≠óÔºö lambdaÂè™ËÉΩÊúâ‰∏Ä‰∏™Ë°®ËææÂºèÔºå‰∏çÁî®ÂÜôreturnÔºåËøîÂõûÂÄºÂ∞±ÊòØË°®ËææÂºèÁöÑÁªìÊûú 1234list(map(lambda x: x * x, [1, 3, 5, 7] ))#lambda x: Áõ∏ÂΩì‰∫éÔºödef f(x): return x * x pythonÁöÑÂåøÂêçÂáΩÊï∞ÂíåjsÁöÑÂåøÂêçÂáΩÊï∞‰∏çÂ§™‰∏ÄÊ†∑Ôºå‰ΩÜ‰ΩúÁî®Â§ßÈÉΩÁõ∏‰ººÔºå‰∏çÁî®ÊãÖÂøÉÂáΩÊï∞ÂêçÂÜ≤Á™ÅÁ≠âÁ≠âÔºåÁÆÄÂåñÂÜôÊ≥ïÁ≠â„ÄÇjsÈáåÈù¢ÁöÑÂåøÂêçÂáΩÊï∞Â∑≤ÁªèÂçáÁ∫ßÂà∞‰∫ÜES6ÁÆ≠Â§¥ÂáΩÊï∞Ê®°ÂºèÔºåÁÆÄÂçïÊñπ‰æøÔºö 123456item =&gt; &#123; return item * item&#125;(x, y) =&gt; &#123; return x + y&#125; jsÈáåÈù¢ÂåøÂêçÂáΩÊï∞Áî®ÁöÑËæÉÂ∞ëÔºå‰∏ÄËà¨ÈÉΩÊòØÁî®‰∫ÜÁÆ≠Â§¥ÂáΩÊï∞Êõø‰ª£‰∫Ü„ÄÇÂåøÂêçÂáΩÊï∞ÁöÑ‰ΩøÁî®Âú∫ÊôØÊàë‰πüÊÉ≥‰∏çÂá∫Â§öÂ∞ëÔºå‰ΩÜÂú®ÂÆöÊó∂Âô®‰∏≠‰ΩøÁî®ËæÉÂ§öÔºö 1234567891011function test() &#123; setTimeout(function() &#123; console.log(1) &#125;, 1000 * 2)&#125;// ‰∏çËøá‰∏ÄËà¨ÈÉΩÁÆ≠Â§¥ÁÆÄÂåñ‰∫Üfunction test() &#123; setTimeout(() =&gt; &#123; console.log(1) &#125;, 1000 * 2)&#125; Ë£ÖÈ•∞Âô®‰ª£Á†ÅËøêË°åÊúüÈó¥Âä®ÊÄÅÂ¢ûÂä†ÂäüËÉΩÁöÑÊñπÂºèÔºåÁß∞‰πã‰∏∫‚ÄúË£ÖÈ•∞Âô®‚ÄùÔºàDecoratorÔºâÂáΩÊï∞‰πüÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåËÄå‰∏îÂáΩÊï∞ÂØπË±°ÂèØ‰ª•Ë¢´ËµãÂÄºÁªôÂèòÈáèÔºåÊâÄ‰ª•ÔºåÈÄöËøáÂèòÈáè‰πüËÉΩË∞ÉÁî®ËØ•ÂáΩÊï∞name ÂáΩÊï∞ÂØπË±°ÁöÑËØ•Â±ûÊÄßÂèØ‰ª•ÊãøÂà∞ÂáΩÊï∞ÁöÑÂÆö‰πâÊó∂ÂêçÂ≠óÊ≤°ÁúãÊáÇÔºåÁ≠âÊáÇ‰∫ÜÂÜçÂõûÊù•ÂÜô ÂÅèÂáΩÊï∞‰∏™‰∫∫ÁêÜËß£ÂèàÊòØ‰∏Ä‰∏™ËØ≠Ê≥ïÁ≥ñÔºÅÂáèÂ∞ë‰∏Ä‰∫õÂáΩÊï∞ÁöÑÁπÅÊùÇÂÜôÊ≥ïÂÖ≥ÈîÆÊ®°ÂùóÔºöfunctools partial 123import functoolsint2 = functolls.partial(int, base = 2)# ÂàõÈÄ†‰∏Ä‰∏™ÂÅèÂáΩÊï∞int2ÔºåÊù•ËøõË°å2ËøõÂà∂ÁöÑËΩ¨ÂåñÔºåbaseÊòØintÂÜÖÁΩÆÂáΩÊï∞Âõ∫ÊúâÁöÑÂèÇÊï∞ Ê®°ÂùóÊ®°ÂùóÊòØ‰∏ÄÁªÑPython‰ª£Á†ÅÁöÑÈõÜÂêàÔºåÂèØ‰ª•‰ΩøÁî®ÂÖ∂‰ªñÊ®°ÂùóÔºå‰πüÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÊ®°Âùó‰ΩøÁî®ÂàõÂª∫Ëá™Â∑±ÁöÑÊ®°ÂùóÊó∂ÔºåË¶ÅÊ≥®ÊÑèÔºöÊ®°ÂùóÂêçË¶ÅÈÅµÂæ™PythonÂèòÈáèÂëΩÂêçËßÑËåÉÔºå‰∏çË¶Å‰ΩøÁî®‰∏≠Êñá„ÄÅÁâπÊÆäÂ≠óÁ¨¶ÔºõÊ®°ÂùóÂêç‰∏çË¶ÅÂíåÁ≥ªÁªüÊ®°ÂùóÂêçÂÜ≤Á™ÅÔºåÊúÄÂ•ΩÂÖàÊü•ÁúãÁ≥ªÁªüÊòØÂê¶Â∑≤Â≠òÂú®ËØ•Ê®°ÂùóÔºåÊ£ÄÊü•ÊñπÊ≥ïÊòØÂú®Python‰∫§‰∫íÁéØÂ¢ÉÊâßË°åimport abcÔºåËã•ÊàêÂäüÂàôËØ¥ÊòéÁ≥ªÁªüÂ≠òÂú®Ê≠§Ê®°Âùó ‰ΩúÁî®Âüü__xxx__ ÂèòÈáèÊòØÁâπÊÆäÂèòÈáèÔºåÂèØ‰ª•Ë¢´Áõ¥Êé•ÂºïÁî®Ôºå‰ΩÜÊòØÊúâÁâπÊÆäÁî®ÈÄî_xxxÊàñ__xxxËøôÊ†∑ÁöÑÂáΩÊï∞ÊàñËÄÖÂèòÈáèÊòØÈùûÂÖ¨ÂºÄÁöÑÔºàprivateÔºâÔºå‰∏çÂ∫îËØ•Ë¢´Áõ¥Êé•ÂºïÁî® Á¨¨‰∏âÊñπÊ®°ÂùóÂÆâË£Ö pipÔºöÂÆâË£ÖÁ¨¨‰∏âÊñπÊ®°ÂùóÂ∑•ÂÖ∑ÂÆâË£ÖÂëΩ‰ª§Ôºöpip install xxx ÂèÇÁÖß npm ÊàñËÄÖ yarn ÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑ ÂÆâË£ÖÂ∏∏Áî®Ê®°Âùó Âú®‰ΩøÁî®PythonÊó∂ÔºåÊàë‰ª¨ÁªèÂ∏∏ÈúÄË¶ÅÁî®Âà∞ÂæàÂ§öÁ¨¨‰∏âÊñπÂ∫ìÔºå‰æãÂ¶ÇÔºå‰∏äÈù¢ÊèêÂà∞ÁöÑPillowÔºå‰ª•ÂèäMySQLÈ©±Âä®Á®ãÂ∫èÔºåWebÊ°ÜÊû∂FlaskÔºåÁßëÂ≠¶ËÆ°ÁÆóNumpyÁ≠â„ÄÇÁî®pip‰∏Ä‰∏™‰∏Ä‰∏™ÂÆâË£ÖË¥πÊó∂Ë¥πÂäõÔºåËøòÈúÄË¶ÅËÄÉËôëÂÖºÂÆπÊÄß„ÄÇÊàë‰ª¨Êé®ËçêÁõ¥Êé•‰ΩøÁî®AnacondaÔºåËøôÊòØ‰∏Ä‰∏™Âü∫‰∫éPythonÁöÑÊï∞ÊçÆÂ§ÑÁêÜÂíåÁßëÂ≠¶ËÆ°ÁÆóÂπ≥Âè∞ÔºåÂÆÉÂ∑≤ÁªèÂÜÖÁΩÆ‰∫ÜËÆ∏Â§öÈùûÂ∏∏ÊúâÁî®ÁöÑÁ¨¨‰∏âÊñπÂ∫ìÔºåÊàë‰ª¨Ë£Ö‰∏äAnacondaÔºåÂ∞±Áõ∏ÂΩì‰∫éÊääÊï∞ÂçÅ‰∏™Á¨¨‰∏âÊñπÊ®°ÂùóËá™Âä®ÂÆâË£ÖÂ•Ω‰∫ÜÔºåÈùûÂ∏∏ÁÆÄÂçïÊòìÁî®„ÄÇAnacondaÂÆòÁΩë: https://www.anaconda.com/download/ÂõΩÂÜÖÈïúÂÉèÔºö https://pan.baidu.com/s/1kU5OCOB#list/path=%2Fpub%2Fpython Èù¢ÂêëÂØπË±°ÁºñÁ®ã OOPÈù¢ÂêëËøáÁ®ãÂ§ÑÁêÜÂ≠¶ÁîüÁöÑÊàêÁª©Ë°®Ôºå‰∏∫‰∫ÜË°®Á§∫‰∏Ä‰∏™Â≠¶ÁîüÁöÑÊàêÁª©ÔºåÈù¢ÂêëËøáÁ®ãÁöÑÁ®ãÂ∫èÂèØ‰ª•Áî®‰∏Ä‰∏™dictË°®Á§∫ 12std1 = &#123;'name': 'bob', 'score': 95&#125;std1 = &#123;'name': 'ming', 'score': 59&#125; Â§ÑÁêÜÂ≠¶ÁîüÊàêÁª©ÈÄöËøáÂáΩÊï∞ÂÆûÁé∞ÔºåÊâìÂç∞Â≠¶ÁîüÊàêÁª©Ôºö 12def print_score(std): print('%s: %s' % (std['name'], std['score'])) Èù¢ÂêëËøáÁ®ãÔºåÈ°æÂêçÊÄù‰πâÔºåÂÖ≥ÂøÉÁöÑÊòØÁ®ãÂ∫è‰∏ã‰∏ÄÊ≠•ÊÄé‰πàËµ∞ÔºüËøô‰∏™ËøáÁ®ãÂ¶Ç‰Ωï‰øùÊåÅÊ≠£Á°ÆÁöÑËµ∞Ê≥ï„ÄÇËÄåÈù¢ÂêëÂØπË±°ÔºåÂç≥‰∏áÁâ©ÁöÜÂØπË±°ÔºåÊàë‰ª¨Ë¶ÅËÄÉËôëÂ≠¶ÁîüËøô‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéÁõ¥Êé•ÂàõÂª∫Ëøô‰∏™ÂØπË±°ÔºåÈúÄË¶Å‰ªÄ‰πàÂäüËÉΩÁõ¥Êé•Ë∞ÉÁî®Ëøô‰∏™ÂØπË±°‰∏äÈù¢ÁöÑÊñπÊ≥ïÂç≥ÂèØÔºå‰∏çÁî®ÁÆ°ËøáÁ®ãÔºÅ Èù¢ÂêëÂØπË±°1234567891011121314class Student(object): def __init__(self, name, score): self.name = name self.score = score def print_score(self): print('%s: %s' % (self.name, self.score))xiaoming = Student('xiaoming', 95)xiaohong = Student('xiaohong', 59)xiaoming.print_score()xiaohong.print_score() Â••ÔºåËØ≠Ë®ÄÈÉΩÊòØÁõ∏ÈÄöÁöÑÔºåJavaScriptÁöÑclassÂíåPythonÊÄùË∑ØÈÉΩÊòØ‰∏ÄÊØõ‰∏ÄÊ†∑ÂïäÔºå‰∏çËøájs‰∏≠classËøòÊúâÁªßÊâø„ÄÅsuper()„ÄÅconstructor()Á≠âÁ≠âÔºåPythonÂ∫îËØ•‰πüÊúâÁöÑÔºåÂæÄ‰∏ãÁªßÁª≠Â≠¶‰π†„ÄÇPS : js‰∏≠ÂÆö‰πâÁöÑClassÔºåÂàõÂª∫ÂÆû‰æãÈúÄË¶Å new ÂÖ≥ÈîÆÂ≠ó Á±ªÂíåÂÆû‰æã ÂàõÂª∫Á±ªclass + className + (ÁªßÊâøËá™Êüê‰∏™Á±ª) 12class Students(object): def __init__(self, xxx, xx1, xx2): 1234567891011121314class Student extends Person&#123; //jsÂÆûÁé∞ super() //ÁªßÊâøÂü∫Á±ªÁöÑÂ±ûÊÄß constructor(name, age) &#123; //Ëá™Â∑±ÁöÑÂ±ûÊÄß this.speed = 30 this.name = name this.age = age &#125; otherMethods() &#123; //ÊåÇËΩΩÂà∞StudentÁöÑÂéüÂûãÈìæ‰∏ä doSth... &#125;, otherMethods1() &#123; //ÊåÇËΩΩÂà∞StudentÁöÑÂéüÂûãÈìæ‰∏ä doOther... &#125;&#125; ÂàõÂª∫ÂÆû‰æã12# pyxiaoming = Student(arg) 12// jsconst xioaming = new Student(arg) ÁúãÂà∞ËøôÔºåÁªà‰∫éÊ∑±Âàª‰Ωì‰ºöÂà∞‰∫Ü‰∏∫Âï•class‰∏ÄÂÆöË¶ÅÈ¶ñÂ≠óÊØçÂ§ßÂÜôÔºÅjsÈáåÈù¢ÂèØËÉΩ‰Ωì‰ºö‰∏çÊ∑±ÔºåÂõ†‰∏∫Êúâ new ÂÖ≥ÈîÆÂ≠óÂú®class‰πãÂâçÔºåËÄåpyÈáåÈù¢ÔºåÂ¶ÇÊûú‰∏çÂå∫ÂàÜÔºåÈÇ£‰πàÂæàÂÆπÊòìÊêûÊ∑∑class Âíå function ÁâπÊÆäÊñπÊ≥ï__init__ ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ê∞∏ËøúÊòØselfÔºåË°®Á§∫ÂàõÂª∫ÁöÑÂÆû‰æãÊú¨Ë∫´ÔºåÂõ†Ê≠§ÔºåÂú®initÊñπÊ≥ïÂÜÖÈÉ®ÔºåÂ∞±ÂèØ‰ª•ÊääÂêÑÁßçÂ±ûÊÄßÁªëÂÆöÂà∞selfÔºåÂõ†‰∏∫selfÂ∞±ÊåáÂêëÂàõÂª∫ÁöÑÂÆû‰æãÊú¨Ë∫´„ÄÇdiff:ÂíåÊôÆÈÄöÁöÑÂáΩÊï∞Áõ∏ÊØîÔºåÂú®Á±ª‰∏≠ÂÆö‰πâÁöÑÂáΩÊï∞Âè™Êúâ‰∏ÄÁÇπ‰∏çÂêåÔºåÂ∞±ÊòØÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ê∞∏ËøúÊòØÂÆû‰æãÂèòÈáèselfÔºåÂπ∂‰∏îÔºåË∞ÉÁî®Êó∂Ôºå‰∏çÁî®‰º†ÈÄíËØ•ÂèÇÊï∞„ÄÇ ËÆøÈóÆÈôêÂà∂Â§ñÈÉ®‰ª£Á†ÅËøòÊòØÂèØ‰ª•Ëá™Áî±Âú∞‰øÆÊîπ‰∏Ä‰∏™ÂÆû‰æãÁöÑname„ÄÅscoreÂ±ûÊÄßÔºö 12xiaoming = Student('xiaoming', 95)xioaming.score = 12 #ÂèØ‰ª•‰øÆÊîπÂÆû‰æãÁöÑÂ±ûÊÄß Â§ßÊãõÊù•‰∫ÜÔºÅÔºÅÔºÅÂ¶ÇÊûúË¶ÅËÆ©ÂÜÖÈÉ®Â±ûÊÄß‰∏çË¢´Â§ñÈÉ®ËÆøÈóÆÔºåÂèØ‰ª•ÊääÂ±ûÊÄßÁöÑÂêçÁß∞ÂâçÂä†‰∏ä‰∏§‰∏™‰∏ãÂàíÁ∫ø__Ëøô‰∏™Â§ßÊãõjsÈáåÈù¢ÂèØÊ≤°ÊúâÂïäÂú®Python‰∏≠ÔºåÂÆû‰æãÁöÑÂèòÈáèÂêçÂ¶ÇÊûú‰ª•__ÂºÄÂ§¥ÔºåÂ∞±ÂèòÊàê‰∫Ü‰∏Ä‰∏™ÁßÅÊúâÂèòÈáèÔºàprivateÔºâÔºåÂè™ÊúâÂÜÖÈÉ®ÂèØ‰ª•ËÆøÈóÆÔºåÂ§ñÈÉ®‰∏çËÉΩËÆøÈóÆ 1234class Student(object): __init__(self, name, age): self.__name = name self__age = age ËøôÊ†∑Âú®Â§ñÈÉ®Â∞±Êó†Ê≥ïËÆøÈóÆÂà∞ÂÜÖÈÉ®ÁöÑÁßÅÊúâÂèòÈáè‰∫ÜÔºåÂè™ËÉΩË∞ÉÁî®ÂÜÖÈÉ®ÊñπÊ≥ïÊù•ËÆøÈóÆ„ÄÇ¬∑¬∑¬∑¬∑¬∑~ÁúüÁöÑÊòØËøôÊ†∑ÁöÑÂêóÔºüÔºàÊâãÂä®ÊªëÁ®Ω.jpgÔºâ,ÂΩìÁÑ∂‰∏çÊòØÂï¶Ôºå‰πãÊâÄÊúâÊàë‰ª¨Êó†Ê≥ï‰ªéÂ§ñÈÉ®ËÆøÈóÆÂà∞name,ÊòØÂõ†‰∏∫PythonËß£ÈáäÂô®ÊääËØ•ÂèòÈáèÂèòÊàê‰∫Ü _Studentname ,ÊâÄ‰ª•Âë¢ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá Áü≠Á∫ø Âä† Á±ªÂêç Âä†ÂèòÈáèÂêçÁªßÁª≠Êù•ËÆøÈóÆËØ•ÁßÅÊúâÂèòÈáèÂêÉÈ•±‰∫ÜÊíëÁùÄ‰∫ÜÂêóÔºüÂìàÂìà ÁªßÊâøÂíåÂ§öÊÄÅÊúâÁÇπC++ÁöÑÊÑüËßâ‰∫ÜÔºåÊØïÁ´üjsÊòØÊ≤°ÊúâÊòæÁ§∫ÁöÑÂ§öÊÄÅÁöÑ~ Á≠âÁ≠âÔºåÊàëÁêÜËß£ÂÆå‰∫ÜÔºåÂáâÂáâÊâìËÑ∏„ÄÇPythonÁöÑÂ§öÊÄÅÊåáÁöÑÊòØÂü∫Á±ªÂíåÂ≠êÁ±ªÊã•ÊúâÂêåÊ†∑ÁöÑÊñπÊ≥ïÊó∂ÔºåÂ≠êÁ±ªË¶ÜÁõñÂü∫Á±ª‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶emmmmÔºåÊåâÁÖßjsÊù•ËØ¥ÔºåËøôÂ∞±ÊòØÂéüÂûãÈìæÁöÑÊü•ÊâæÂü∫Êú¨ÂéüÁêÜÂïäÔºåÂÖàÂú®Ëá™Â∑±ÂÜÖÈÉ®ÊâæÔºåÊâæ‰∏çÂà∞‰∫ÜÂ∞±È°∫ÁùÄÂéüÂûãÈìæÂæÄ‰∏äÊü•ÊâæÔºå‰∏ÄÊØõ‰∏ÄÊ†∑ÁöÑ‚Ä¶‚Ä¶‚Ä¶.Êääpy‰∏≠ÁöÑclassÁêÜËß£‰∏∫‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåËøô‰∏™Êï∞ÊçÆÁªìÊûÑÂíåpyËá™Â∏¶ÁöÑlist,tuple,dict Ê≤°Êúâ‰ªª‰ΩïÂå∫Âà´„ÄÇÈÇ£‰πà isinstance() ‰∏çÂ∞±ÂèØ‰ª•Áî®‰∫Ü 12345678xiaoming = Student('xiaoming')isinstance(xiaoming, Student) # True isinstanceÂèØ‰ª•ÁêÜËß£‰∏∫Ê¥æÁîüclass Pupil(Student): passxiaoxioa = Pupil()isinstance(xiaoxiao, Student) # True Èöî‰ª£ÁöÑ‰πüÁÆóÊ¥æÁîüÂì¶ È∏≠Â≠êÊ®°Âûã Âä®ÊÄÅËØ≠Ë®ÄÁöÑÈ∏≠Â≠êÁ±ªÂûãÁâπÁÇπÂÜ≥ÂÆö‰∫ÜÁªßÊâø‰∏çÂÉèÈùôÊÄÅËØ≠Ë®ÄÈÇ£Ê†∑ÊòØÂøÖÈ°ªÁöÑ„ÄÇ Ëé∑ÂèñÂØπË±°‰ø°ÊÅØ type()Âà§Êñ≠ÂØπË±°Á±ªÂûãÔºåjs‰∏≠‰ΩøÁî® typeof() , jsÂà§Êñ≠Â≠óÁ¨¶‰∏≤ËøòÂèØ‰ª•Êõ¥‰∏∫ÂáÜÁ°ÆÁöÑ‰ΩøÁî®Object.prototype.toString().call()È¢òÂ§ñËØù‰∫ÜÔºåjsÁöÑtypeÂà§Êñ≠Âü∫Êú¨Á±ªÂûãÂ•ΩÁî®ÔºåÂÖ∂‰ªñÂ∞±ËøòÊòØÁî® instanceofÔºàÔºâËøôÁÇπ‰∏äÔºåJSÂíåpyËøòÊòØÈ´òÂ∫¶Áõ∏‰ººÁöÑÔºÅÔºÅtype() ===== typeof() ===== Âü∫Êú¨Á±ªÂûãisinstance() ==== instanceof() ===== Âà§Êñ≠ÂØπË±° dir()Ë¶ÅËé∑Âæó‰∏Ä‰∏™ÂØπË±°ÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®dir()ÂáΩÊï∞ÔºåÂÆÉËøîÂõû‰∏Ä‰∏™ÂåÖÂê´Â≠óÁ¨¶‰∏≤ÁöÑlistÔºåÊØîÂ¶ÇÔºåËé∑Âæó‰∏Ä‰∏™strÂØπË±°ÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ï‰ªÖ‰ªÖÊääÂ±ûÊÄßÂíåÊñπÊ≥ïÂàóÂá∫Êù•ÊòØ‰∏çÂ§üÁöÑÔºåÈÖçÂêàgetattr()„ÄÅsetattr()‰ª•Âèähasattr()ÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•Êìç‰Ωú‰∏Ä‰∏™ÂØπË±°ÁöÑÁä∂ÊÄÅ, js‰∏≠ÂêåÁêÜ„ÄÇsetAttribute()„ÄÅgetAttribute()„ÄÅhasAttribute() ÂÆû‰æãÂ±ûÊÄßÂíåÁ±ªÂ±ûÊÄßÊÄªÁªì‰∏ÄÂè•ËØùÔºåÂ∞±ÊòØclassÁöÑÁ±ªÂ±ûÊÄßÂêÑ‰∏™ÂÆû‰æãÈÉΩ‰ºöËÆøÈóÆÂà∞ÔºåÂÆû‰æãÁöÑÂÆû‰æãÂ±ûÊÄßÂêÑËá™Áõ∏‰∫íÁã¨Á´ã„ÄÇÂèØ‰ª•ÊääËøô‰∏§‰∏™Ê¶ÇÂøµÁêÜËß£‰∏∫ JS Âü∫Á±ª‰∏≠ÁöÑÊñπÊ≥ïÔºåÂ≠êÁ±ªÈÉΩ‰ºöÈ°∫ÁùÄÂéüÂûãÈìæÊâæÂà∞Âπ∂ËÆøÈóÆÂà∞„ÄÇ 12class Student(object): school = 'hantaiMiddleSchool' #ÊâÄÊúâÂÆû‰æãÈÉΩÂèØ‰ª•ËÆøÈóÆÂà∞ Èù¢ÂêëÂØπË±°È´òÁ∫ßÁºñÁ®ã__slots__slotsÁöÑ‰ΩúÁî®Â∞±ÊòØÂä®ÊÄÅÁªôclassÊ∑ªÂä†Â±ûÊÄßÁöÑ‰∏Ä‰∏™Á∫¶ÊùüÔºåÂê¶ÂàôÂú®classÁ±ªÂª∫Á´ãÂÆåÊØïÂêéÔºåËøêË°å‰ª£Á†ÅÁöÑÊó∂ÂÄôÂä®ÊÄÅÈöèÊÑèÁªëÂÆöÂ±ûÊÄß‰∏çÂ∞±‰π±Â•ó‰∫ÜÔºåÈúÄË¶Å‰∏Ä‰∏™Á∫¶ÊùüÔºåËÅåË¥£Â∞±ÊòØ slotsslots Ëã±ÊñáÔºö ÊèíÊßΩ„ÄÇÂú®Vue‰∏≠‰ΩøÁî®ÁöÑÂπøÊ≥õÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Âú®ËøôÈ¢ÑÂÖàÁªô‰Ω†Áïô‰∫Ü‰∏™‰ΩçÁΩÆÔºå‰ª•ÂêéÊÉ≥Áî®ÁöÑÊó∂ÂÄôÂèØ‰ª•Áî®ÔºåÊ≤°ÊúâÁïôËøô‰∏™‰ΩçÁΩÆÁöÑËØùÔºå‰ª•ÂêéÁõ∏Áî®ÈÉΩÁî®‰∏ç‰∫ÜÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Âõæ‰π¶È¶ÜÂêåÂ≠¶Â∏Æ‰Ω†Âç†Â∫ß 1234567#pythonclass Student(object): __slots__ = ('name', 'age')&gt;&gt;&gt; s = Student()&gt;&gt;&gt; s.name = 'xiaoming' # ÂèØ‰ª•ÁªëÂÆöÊàêÂäü&gt;&gt;&gt; s.score = 98 # ‰ºöÊä•ÈîôÔºå‚ÄúÂîâÔºåËøô‰ΩçÁΩÆÊúâ‰∫∫‰∫ÜÔºå‰Ω†Âùê‰∏ç‰∫ÜÔºàÊâãÂä®ÊªëÁ®Ω.jpgÔºâ‚Äù PS : ‰ΩøÁî®slotsË¶ÅÊ≥®ÊÑèÔºåslotsÂÆö‰πâÁöÑÂ±ûÊÄß‰ªÖÂØπÂΩìÂâçÁ±ªÂÆû‰æãËµ∑‰ΩúÁî®ÔºåÂØπÁªßÊâøÁöÑÂ≠êÁ±ªÊòØ‰∏çËµ∑‰ΩúÁî® @propertyËß£ÂÜ≥ÈóÆÈ¢òÂâçË®ÄÔºöÁªôClassÁªëÂÆöÂ±ûÊÄßÊó∂ÔºåÁõ¥Êé•ÊääÂ±ûÊÄßÊö¥Èú≤Âá∫ÂéªÔºåÂÜôËµ∑Êù•ÁÆÄÂçïÔºåË∞ÉÁî®Ëµ∑Êù•ÁÆÄÂçïÔºå‰ΩÜÊòØÊ≤°ÂäûÊ≥ïÊ£ÄÊü•ÂèÇÊï∞ÔºåÂØºËá¥ÂèØ‰ª•Èöè‰æø‰øÆÊîπÂÄº„ÄÇËøô‰∏çÂêàÁêÜËß£ÂÜ≥1Ôºö 123456789101112131415#Python#PythonËÆæÁΩÆset„ÄÅgetÊñπÊ≥ïÊù•ÊéßÂà∂Â±ûÊÄßËß£ÂÜ≥È™åËØÅÈóÆÈ¢òclass Student(onject): def get_score(self): return self.score def set_scsoe(self, value): if not isinstance(value, int): raise ValueError('score must be int') if value &lt; 0 or value &gt; 100: raise ValueError('score must be 0-100') self.score = value ‰ΩÜÊòØÔºå‰∏äÈù¢ÁöÑË∞ÉÁî®ÊñπÊ≥ïÂèàÁï•ÊòæÂ§çÊùÇÔºåÊ≤°ÊúâÁõ¥Êé•Áî®Â±ûÊÄßËøô‰πàÁõ¥Êé•ÁÆÄÂçïÊúâÊ≤°ÊúâÊó¢ËÉΩÊ£ÄÊü•ÂèÇÊï∞ÔºåÂèàÂèØ‰ª•Áî®Á±ª‰ººÂ±ûÊÄßËøôÊ†∑ÁÆÄÂçïÁöÑÊñπÂºèÊù•ËÆøÈóÆÁ±ªÁöÑÂèòÈáèÂë¢ÔºüÂØπ‰∫éËøΩÊ±ÇÂÆåÁæéÁöÑPythonÁ®ãÂ∫èÂëòÊù•ËØ¥ÔºåËøôÊòØÂøÖÈ°ªË¶ÅÂÅöÂà∞ÁöÑÔºÅËøòËÆ∞ÂæóË£ÖÈ•∞Âô®ÔºàdecoratorÔºâÂèØ‰ª•ÁªôÂáΩÊï∞Âä®ÊÄÅÂä†‰∏äÂäüËÉΩÂêóÔºüÂØπ‰∫éÁ±ªÁöÑÊñπÊ≥ïÔºåË£ÖÈ•∞Âô®‰∏ÄÊ†∑Ëµ∑‰ΩúÁî®„ÄÇPythonÂÜÖÁΩÆÁöÑ@propertyË£ÖÈ•∞Âô®Â∞±ÊòØË¥üË¥£Êää‰∏Ä‰∏™ÊñπÊ≥ïÂèòÊàêÂ±ûÊÄßË∞ÉÁî®ÁöÑÔºöÊÄªÁªìËµ∑Êù•ÔºöËØ≠Ê≥ïÁ≥ñÔºåÊú¨Ë¥®Ê≤°ÂèòÔºå‰ΩÜÊòØÁÆÄÂåñ‰∫ÜË∞ÉÁî®ÁöÑÁπÅÁêêÁ®ãÂ∫¶ 12345678910111213141516171819class Student(object): @property def score(self): return self.score @score.setter # ÂèØËØªÂèØÂÜôÂ±ûÊÄß def score(self, valule): if not isinstance(value, int): raise ValueError('score must be int') if value &lt; 0 or value &gt; 100: raise ValueError('score must be 0-100') self.score = value @property #Âè™ËØªÂ±ûÊÄß def age(self): return 23#ËøôÊ†∑ÔºåÂ∞±‰æùÊóßÂèØ‰ª•‰ΩøÁî®Â±ûÊÄßÁöÑ.Ë∞ÉÁî®ÊñπÊ≥ïËÆøÈóÆÂ±ûÊÄß„ÄÅËÆæÁΩÆÂ±ûÊÄßÂÄº‰∫Ü ÊÄªÁªìÔºö@propertyÂπøÊ≥õÂ∫îÁî®Âú®Á±ªÁöÑÂÆö‰πâ‰∏≠ÔºåÂèØ‰ª•ËÆ©Ë∞ÉÁî®ËÄÖÂÜôÂá∫ÁÆÄÁü≠ÁöÑ‰ª£Á†ÅÔºåÂêåÊó∂‰øùËØÅÂØπÂèÇÊï∞ËøõË°åÂøÖË¶ÅÁöÑÊ£ÄÊü•ÔºåËøôÊ†∑ÔºåÁ®ãÂ∫èËøêË°åÊó∂Â∞±ÂáèÂ∞ë‰∫ÜÂá∫ÈîôÁöÑÂèØËÉΩÊÄß Â§öÈáçÁªßÊâøÂÖ≥ÈîÆÂ≠óÔºö‰∏Ä‰∏™Â≠êÁ±ªÂèØ‰ª•Êã•ÊúâÂ§ö‰∏™Âü∫Á±ª„ÄÅmixinclassÈúÄË¶ÅÊñ∞ÁöÑÂäüËÉΩÔºåÂè™ÈúÄË¶ÅÂú®ÁªßÊâø‰∏Ä‰∏™Âü∫Á±ªÂ∞±ÂèØ‰ª•‰∫ÜÔºåÈÄöÂ∏∏Ôºå‰∏ªÁ∫øÈÉΩÊòØÂçï‰∏ÄÁªßÊâø‰∏ãÊù•ÁöÑ * ‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁúãÂá∫ÁªßÊâøÂÖ≥Á≥ªÔºåÊàë‰ª¨Êää‰∏ªÁ∫ø‰πãÂ§ñÈúÄË¶ÅÁªßÊâøÁöÑÂü∫Á±ªÂëΩÂêç‰∏∫ MixinÔºåËøôÊ†∑ÁöÑÁöÑËÆæËÆ°ÈÄöÂ∏∏Áß∞‰∏∫ *Mixin 12345678class Person(object): passclass ChineseMixin(Person): passclass ChinaPuple(Person, ChineseMixin): pass ÂÆöÂà∂Á±ªÈáçÁÇπÔºöÂâçÂêéÂèå‰∏ãÂàíÁ∫øÁöÑÂèòÈáèÊòØÁâπÊÆäÂèòÈáèÔºåpyÊúâÁâπÊÆäÁî®ÈÄîÁöÑÔºÅÔºÅ__slots____len__()__str____repr____iter____getitem____setitem____getattr____call__‰∏äÈù¢ÁΩóÂàóÁöÑÊñπÊ≥ïÊú™Êü•ÁúãÁõ∏ÂÖ≥‰ΩúÁî®Ôºå‰ª•ÂêéÈúÄË¶ÅÁî®Âà∞Âú®Êü•Áúã‰∏çËøüÔºåÂ∞±ÊúÄÂêé‰∏Ä‰∏™ __call__ ,Âú®js ‰∏≠Ë∞ÉÁî®Ëá™Ë∫´ÁöÑÊúâ arguments.callee() Êûö‰∏æÁ±ª‚Ä¶ÊåÅÁª≠Êõ¥Êñ∞‚Ä¶‚Ä¶.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∞èÁ®ãÂ∫èÈ°πÁõÆËá™ÊàëÊÄªÁªì]]></title>
    <url>%2F2019%2F08%2F22%2Fsummary201907%2F</url>
    <content type="text"><![CDATA[Â∫èË®ÄÂ∞èÁ®ãÂ∫èÔºö Áõ∏‰∫≤Â∞èÁ∫¢Âúà+toolÔºö wepy ‰º†ÈÄÅÈó®Ôºö[ wepy ] https://tencent.github.io/wepy/document.html#/[ Vue ] https://cn.vuejs.org/[ ES6 ] http://es6.ruanyifeng.com/[ git ] https://www.liaoxuefeng.com/ ‰∏ÉÊúà‰ªΩÁªìÊùüÔºåÈ°πÁõÆ‰∏äÁ∫øÔºåÂõûËøáÂ§¥Êù•Êï¥ÁêÜ‰∏Ä‰∏ãÈ°πÁõÆÔºåÈ°πÁõÆ‰∏∫wepy1.7.0ÂêéÁâàÊú¨ÂºÄÂèëÁöÑÂ∞èÁ®ãÂ∫èÔºåÈÖçÂ•óÁöÑÂêéÂè∞ÂâçÁ´Ø‰ΩøÁî®ant-design-vueÂºÄÂèëÔºå‰∏ä‰º†ÊµãËØïÊúçÂ∑•ÂÖ∑‰ΩøÁî®Xshell6„ÄÇ ÂÜÖÂÆπ wepyÊûÑÂª∫Â∑•Á®ãÂÖ∑‰ΩìÂèØÂú®wepyÂÆòÁΩë‰∏≠Êü•ÁúãÔºåÊ≠§Â§Ñ‰∏çÂ§ö‰ªãÁªç„ÄÇ 1234$ wepy init standard my-project /**ÂàõÂª∫È°πÁõÆ*/$ cd my-project /*ËøõÂÖ•È°πÁõÆÁõÆÂΩï*/$ npm install /**ÂÆâË£Ö‰æùËµñ*/$ wepy build --watch /*ËøêË°åÂ∑•Á®ãÂπ∂ÁõëÊéßÈ°πÁõÆ‰øÆÊîπËá™Âä®Âà∑Êñ∞*/ wepyÂ±û‰∫éÁ±ªVueÂÜôÊ≥ïÔºåË¶ÅÂú®wepy‰∏≠‰ΩøÁî®ÂºÇÊ≠•Êìç‰ΩúÔºàasync/awaitÔºâÈúÄË¶ÅÂú®Â∑•Á®ãÁöÑapp.wayÂÖ•Âè£Êñá‰ª∂‰∏≠constructorÂáΩÊï∞‰∏≠Ê≥®ÂÜå: 12345constructor () &#123; super() this.use('requestfix') this.use('promisify') /*‚ÜêÊâãÂä®Ê∑ªÂä†Ëøô‰∏™*/&#125; ÁîüÂëΩÂë®Êúü:Â∫îÁî®ÁîüÂëΩÂë®Êúü Â±ûÊÄß type ÊèèËø∞ Ëß¶ÂèëÊó∂Êú∫ onLaunch Function ÁîüÂëΩÂë®ÊúüÂáΩÊï∞‚ÄìÁõëÂê¨Â∞èÁ®ãÂ∫èÂàùÂßãÂåñ Áî®Êà∑È¶ñÊ¨°ÊâìÂºÄÂ∞èÁ®ãÂ∫èÔºåËß¶Âèë onLaunchÔºàÂÖ®Â±ÄÂè™Ëß¶Âèë‰∏ÄÊ¨°Ôºâ onShow Function ÁîüÂëΩÂë®ÊúüÂáΩÊï∞‚ÄìÁõëÂê¨Â∞èÁ®ãÂ∫èÊòæÁ§∫ ÂΩìÂ∞èÁ®ãÂ∫èÂêØÂä®ÔºåÊàñ‰ªéÂêéÂè∞ËøõÂÖ•ÂâçÂè∞ÊòæÁ§∫Ôºå‰ºöËß¶Âèë onShow onHide Function ÁîüÂëΩÂë®ÊúüÂáΩÊï∞‚ÄìÁõëÂê¨Â∞èÁ®ãÂ∫èÈöêËóè ÂΩìÂ∞èÁ®ãÂ∫è‰ªéÂâçÂè∞ËøõÂÖ•ÂêéÂè∞Ôºå‰ºöËß¶Âèë onHide È°µÈù¢ÁîüÂëΩÂë®Êúü Â±ûÊÄß type ÊèèËø∞ Ëß¶ÂèëÊó∂Êú∫ onLoad Function ÁõëÂê¨È°µÈù¢Âä†ËΩΩÔºå‰∏Ä‰∏™È°µÈù¢Âè™‰ºöË∞ÉÁî®‰∏ÄÊ¨° Â∞èÁ®ãÂ∫èÊ≥®ÂÜåÂÆåÊàêÂêéÔºåÂä†ËΩΩÈ°µÈù¢ÔºåËß¶ÂèëonLoadÊñπÊ≥ï,ÂèÇÊï∞ÂèØ‰ª•Ëé∑Âèñwx.navigateToÂíåwx.redirectToÂèä‰∏≠ÁöÑ queryÂèÇÊï∞ onReady Function ÁõëÂê¨È°µÈù¢ÂàùÊ¨°Ê∏≤ÊüìÂÆåÊàê,‰ª£Ë°®È°µÈù¢Â∑≤ÁªèÂáÜÂ§áÂ¶•ÂΩìÔºåÂèØ‰ª•ÂíåËßÜÂõæÂ±ÇËøõË°å‰∫§‰∫í È¶ñÊ¨°ÊòæÁ§∫È°µÈù¢Ôºå‰ºöËß¶ÂèëonReadyÊñπÊ≥ïÔºåÊ∏≤ÊüìÈ°µÈù¢ÂÖÉÁ¥†ÂíåÊ†∑ÂºèÔºå‰∏Ä‰∏™È°µÈù¢Âè™‰ºöË∞ÉÁî®‰∏ÄÊ¨° onShow Function ÁõëÂê¨È°µÈù¢ÊòæÁ§∫,ÂΩìredirectToÊàñnavigateBackÁöÑÊó∂ÂÄôË∞ÉÁî® ÂΩìÂ∞èÁ®ãÂ∫èÊúâÂêéÂè∞ËøõÂÖ•Âà∞ÂâçÂè∞ËøêË°åÊàñÈáçÊñ∞ËøõÂÖ•È°µÈù¢Êó∂ÔºåËß¶ÂèëonShowÊñπÊ≥ï„ÄÇ onHide Function ÁõëÂê¨È°µÈù¢ÈöêËóè,ÂΩìnavigateToÊàñÂ∫ïÈÉ®tabÂàáÊç¢Êó∂Ë∞ÉÁî® ÂΩìÂ∞èÁ®ãÂ∫èÂêéÂè∞ËøêË°åÊàñË∑≥ËΩ¨Âà∞ÂÖ∂‰ªñÈ°µÈù¢Êó∂ÔºåËß¶ÂèëonHideÊñπÊ≥ï onUnload Function ÁõëÂê¨È°µÈù¢Âç∏ËΩΩ ÂΩì‰ΩøÁî®ÈáçÂÆöÂêëÊñπÊ≥ïwx.redirectTo(OBJECT)ÊàñÂÖ≥Èó≠ÂΩìÂâçÈ°µËøîÂõû‰∏ä‰∏ÄÈ°µwx.navigateBack()ÔºåËß¶ÂèëonUnload„ÄÇ ÁâàÊú¨Êõ¥Êñ∞ÁâàÊú¨Êõ¥Êñ∞‰ª£Á†ÅÔºå‰∏ÄËà¨ËæÉ‰∏∫Âõ∫ÂÆöÔºåÁõ¥Êé•Â§çÂà∂Âú® onLaunch ÁîüÂëΩÂë®ÊúüÂÜÖ 123456789101112131415161718192021222324if(wx.canIUse('getUpdateManager'))&#123; const updateManager = wx.getUpdateManager(); updateManager.onCheckForUpdate((res) =&gt; &#123; if(res.hasUpdate)&#123; updateManager.onUpdateReady((res) =&gt; &#123; wx.showModal(&#123; title: 'Êõ¥Êñ∞ÊèêÁ§∫', content: 'Êñ∞ÁâàÊú¨Â∑≤ÁªèÂáÜÂ§áÂ•ΩÔºåÊòØÂê¶ÈáçÂêØÂ∫îÁî®Ôºü', success: function (res) &#123; if(res.confirm)&#123; updateManager.applyUpdate() &#125; &#125; &#125;) &#125;) updateManager.onUpdateFailed(function () &#123; wx.showModal(&#123; title: 'Â∑≤ÁªèÊúâÊñ∞ÁâàÊú¨‰∫ÜÂìü~', content: 'Êñ∞ÁâàÊú¨Â∑≤Áªè‰∏äÁ∫øÂï¶~ÔºåËØ∑ÊÇ®Âà†Èô§ÂΩìÂâçÂ∞èÁ®ãÂ∫èÔºåÈáçÊñ∞ÊêúÁ¥¢ÊâìÂºÄÂìü~' &#125;) &#125;) &#125; &#125;)&#125; ÁªÑ‰ª∂ÁªÑ‰ª∂Â§çÁî®ËØ¥ÊòéÔºö ÁªÑ‰ª∂Â§çÁî®ÔºåÂú® Âêå‰∏Ä‰∏™È°µÈù¢Ôºå‰∏Ä‰∏™ÁªÑ‰ª∂Â§öÊ¨°Â§çÁî®‰∏îÊØèÊ¨°‰º†ÂÖ•‰∏çÂêåÁöÑÊï∞ÊçÆÊ∫êÔºå‰ΩÜÊòØË°®Áé∞Âá∫Êù•ÁöÑÊï∞ÊçÆÊ∫êÂÖ®ÈÉ®‰∏ÄËá¥ÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂπ∂Ê≤°ÊúâÊ∏≤Êüì‰∏äÂéüÂõ†Ôºö ÁªÑ‰ª∂Âêç‰∏ÄËá¥ÂØºËá¥wepyËÆ§‰∏∫ÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÁªÑ‰ª∂ÔºåÂ¶ÇÊ≠§Êï∞ÊçÆÊ∫ê‰πü‰∏ç‰ºöÂèòÂä®Ëß£ÂÜ≥Ôºö ÁªÑ‰ª∂ÂºÇÂêçÂåñ 123456import CompA from &apos;path&apos;components = &#123; CompB: CompA, CompC: CompA,&#125; ËøôÊ†∑ÔºåÊó¢ÂèØ‰ª•ÈáçÂ§çËøêÁî®ÁªÑ‰ª∂ ÊñáÂ≠óÊç¢Ë°åÂ∞èÁ®ãÂ∫èÊñáÂ≠óÊç¢Ë°åÔºö 1&lt;text&gt;Á¨¨‰∏ÄË°å\nÁ¨¨‰∫åË°å\nÁ¨¨‰∏âË°å\n&lt;/text&gt; ÂÆöÊó∂Âô® È°µÈù¢‰∏öÂä°ÈÄªËæëÊúâÈúÄË¶ÅÁî®Âà∞ÂÄíËÆ°Êó∂ÂäüËÉΩÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ Âú®È°µÈù¢‰∏≠ÊúâÈúÄË¶ÅÁî®Âà∞ÂÄíËÆ°Êó∂ÊàñËÄÖÂÖ∂‰ªñÂÆöÊó∂Âô®‰ªªÂä°Êó∂ÔºåÊñ∞Âª∫ÁöÑÂÆöÊó∂Âô®Âú®Âç∏ËΩΩÈ°µÈù¢Êó∂‰∏ÄÂÆöË¶ÅÊ∏ÖÈô§ÊéâÔºåÊúâÊó∂ÂÄôÈ°µÈù¢ÂèØËÉΩ‰∏çÊ≠¢‰∏Ä‰∏™ÂÆöÊó∂Âô®ÈúÄÊ±ÇÔºåÂú®Âç∏ËΩΩÈ°µÈù¢ÔºàonUnloadÈí©Â≠êÂáΩÊï∞ÔºâÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶ÅÊ∏ÖÈô§ÊéâÂΩìÂâç‰∏çÁî®ÁöÑÂÆöÊó∂Âô®ÂÆöÊó∂Âô®Áî®Êù•ÂÅöÂÄíËÆ°Êó∂ÊïàÊûú‰πü‰∏çÈîôÔºåÂàùÂßãÊó∂Èó¥ÂêéÂè∞Ëé∑ÂèñÔºåÂâçÁ´ØÂ§ÑÁêÜÔºåÂêéÂè∞Áõ¥Êé•Âú®Êï∞ÊçÆÂ∫ìÊü•ËØ¢ÊãøÂà∞ÁöÑÊ†áÂáÜÊó∂Èó¥ÔºàÊï∞ÊçÆÂ∫ìÂéüÂßãÊó∂Èó¥ÔºåTÂàÜÂâ≤ÔºâÔºåÂâçÁ´ØÈúÄË¶ÅÊ≠£ÂàôÂ§ÑÁêÜ‰∏Ä‰∏ãËøô‰∏™Êó∂Èó¥Ôºö 123456let overTimeStr = data.over_time.split('T')let time1 = overTimeStr[0].replace(/-/g,",")let time2 = overTimeStr[1].replace(/:/g,',')let overTime = time1+ ',' + time2let overTimeArr = overTime.split(',')this.countDownCtrl( overTimeArr, 0 ); ÊúÄÁªàÊääÊó∂Èó¥ÂàÜÂâ≤‰∏∫[Âπ¥ÔºåÊúàÔºå Êó•Ôºå Êó∂Ôºå ÂàÜÔºå Áßí]ÁöÑÊï∞ÁªÑÔºåÔºàÂ¶ÇÊûúÂêéÁ´ØÂ∑≤ÁªèÊääÊó∂Èó¥Â§ÑÁêÜËøá‰∫ÜÈÇ£Â∞±Êõ¥Â•Ω‰∫ÜÔºâÔºåÁÑ∂ÂêéÊääËØ•Êï∞ÁªÑ‰º†ÈÄíÁªôÂÄíËÆ°Êó∂ÂáΩÊï∞ 123456789101112131415161718192021222324252627282930313233countDownCtrl( time, group ) &#123; let deadline = new Date()//ÂÖçË¥πÊà™Ê≠¢Êó∂Èó¥ÔºåÊúàÁöÑ‰∏ã‰ªé0ÂºÄÂßã deadline.setFullYear(time[0], time[1]-1, time[2]) deadline.setHours(time[3], time[4], time[5]) let curTimeJudge = new Date().getTime() let timeJudge = deadline.getTime()-curTimeJudge let remainTimeJudge = parseInt(timeJudge/1000) if( remainTimeJudge &lt; 0) &#123; log('ÂÄíËÆ°Êó∂Â∑≤ÁªèËøáÊúü') return; &#125; this.interva1 = setInterval(() =&gt; &#123; let curTime = new Date().getTime() let time = deadline.getTime()-curTime //Ââ©‰ΩôÊØ´ÁßíÊï∞ let remainTime = parseInt(time/1000) //ÊÄªÁöÑÂâ©‰ΩôÊó∂Èó¥,‰ª•ÁßíËÆ° let day = parseInt( remainTime/(24*3600) )//Ââ©‰ΩôÂ§© let hour = parseInt( (remainTime-day*24*3600)/3600 )//Ââ©‰ΩôÂ∞èÊó∂ let minute = parseInt((remainTime-day*24*3600-hour*3600)/60)//Ââ©‰ΩôÂàÜÈíü let sec = parseInt(remainTime%60)//Ââ©‰ΩôÁßí hour = hour &lt; 10 ? '0' + hour : hour; minute = minute &lt; 10 ? '0' + minute : minute sec = sec &lt; 10 ? '0' + sec : sec let countDownText = hour+ ":" +minute+ ":" +sec if( group === 0) &#123; //‰∏™‰∫∫‰∏öÂä°ÈÄªËæëÔºåÂõ†‰∏∫‰∏Ä‰∏™È°µÈù¢Êúâ‰∏§‰∏™ÂÄíËÆ°Êó∂ÈúÄÊ±ÇÔºå‰ª£Á†ÅÂ§çÁî®Âå∫ÂàÜ this.countDown = countDownText; &#125; else if( group === 1 ) &#123; this.countDownGroup = countDownText &#125; this.$apply() &#125;, 1000 ); &#125; Ëá≥Ê≠§ÔºåÂÄíËÆ°Êó∂ÊïàÊûúÂ§ÑÁêÜÂÆåÊØïÔºåPSÔºöÁªàÊ≠¢Êó∂Èó¥‰∏ÄÂÆöË¶ÅÂ§ß‰∫écurrentDateÔºåÂê¶ÂàôÊòæÁ§∫‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÔºàÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÂÄíËÆ°Êó∂Èó™ÁÉÅ„ÄÅ‰π±Á†ÅÁ≠âÔºâ ÊúÄÂêéÔºåÈÄÄÂá∫ËØ•È°µÈù¢ÂéªÂÖ∂‰ªñÈ°µÈù¢Êó∂Ôºå‰∏ÄÂÆöË¶ÅÂú®È°µÁ†ÅÂç∏ËΩΩÈí©Â≠ê‰∏≠Ê∏ÖÈô§ÂÄíËÆ°Êó∂ÔºÅÔºÅÔºÅ 123onUnload() &#123; clearInterval(this.interva1);&#125; ÁªÑ‰ª∂‰º†ÂÄºÁªÑ‰ª∂‰º†ÂÄºÂíåVueÊúâÁÇπÁªÜÂæÆÂå∫Âà´ÔºåVueÂº∫Ë∞ÉÁà∂ÁªÑ‰ª∂ÁöÑÊï∞ÁªÑÂíåÂØπË±°‰∏çË¶ÅÁõ¥Êé•‰º†Âà∞Â≠êÁªÑ‰ª∂‰ΩøÁî®ÔºåÂ∫î‰∏∫Â≠êÁªÑ‰ª∂ÂèØËÉΩ‰ºö‰øÆÊîπËøô‰∏™dataÔºåÂ¶ÇÂõæÔºö ‰ΩÜÊòØÔºåwepy‰∏≠ÔºåÊúâÊó∂ÂÄôÁ°ÆÂÆûÈúÄË¶ÅÊää‰∏Ä‰∏™ÂØπË±°‰º†ÈÄíÂà∞Â≠êÁªÑ‰ª∂‰ΩøÁî®ÔºåÂçï‰∏™‰º†ÈÄíÂØπË±°Â±ûÊÄßËøá‰∫éÁπÅÁêêÔºåËÄå‰∏îÔºÅÔºÅÔºÅÂ¶ÇÊûúÂçï‰∏™‰º†ÈÄíÂØπË±°ÁöÑÂ±ûÊÄßÂà∞Â≠êÁªÑ‰ª∂ÔºåÂ¶ÇÊûúËØ•Â±ûÊÄßÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂàôÂ≠êÁªÑ‰ª∂Ê∞∏Ëøú‰ºöÊé•Êî∂Âà∞ undefined „ÄÇÊ≠§Êó∂ÊúÄÂ•ΩÁî®Êï¥‰∏™ÂØπË±°‰º†ÂÄºÊõø‰ª£Âçï‰∏™ÂØπË±°Â±ûÊÄßÈÄê‰∏™‰º†ÂÄºÁöÑÊñπÊ≥ïÔºå‰∏î‰∏ÄÂÆöË¶ÅÂú®‰º†ÂÄºÊó∂Âä†ÂÖ• .sync ‰øÆÈ•∞Á¨¶ÔºåÂèåÂêë‰º†ÂÄºÁªëÂÆö„ÄÇÁ°Æ‰øù‰ªéÊé•Âè£ÊãøÂà∞ÁöÑÊï∞ÊçÆ‰πüËÉΩÂÆûÊó∂‰º†ÈÄíÂà∞Â≠êÁªÑ‰ª∂ÔºåËÄåÈùû undefined :circleMembersList.sync=&quot;circleMembersList&quot; ÈòªÊ≠¢ÁªÑ‰ª∂ÁöÑÁÇπÂáª‰∫ã‰ª∂‰º†Êí≠Ëß£ÂÜ≥Ôºö Ê∑ªÂä†ÂáΩÊï∞ catchtap=‚ÄùfuncName‚Äù Âç≥ÂèØÔºåfuncNameÂèØ‰∏∫Á©∫ÂáΩÊï∞Ôºå‰πüÂèØ‰ª•Áõ¥Êé•‰∏çÂÜô tokenÂà§Êñ≠ Â∞èÁ®ãÂ∫èË∞ÉËØïÊó∂ÔºåÊúâÊó∂ÂÄô‰ºöÂá∫Áé∞È¶ñÊ¨°ÊâìÂºÄÊó†ÂÜÖÂÆπÔºàÊãø‰∏çÂà∞Êï∞ÊçÆÔºâÁöÑÁä∂ÊÄÅÔºåÈúÄË¶Å‚ÄúÊùÄÊ≠ª‚ÄùÂ∞èÁ®ãÂ∫èÂÜçÊâìÂºÄÊâçËÉΩÁúãÂà∞Êï∞ÊçÆÂÜÖÂÆπÔºåÂÖ∂‰∏≠ÂèØËÉΩÁöÑÂéüÂõ†‰πã‰∏Ä‰æøÊòØ token ÁöÑÂ§±Êïà„ÄÇÂú®‰∏éÂêéÂè∞‰∫§‰∫íÁöÑÊó∂ÂÄôÔºåtokenÂøÖ‰∏çÂèØÂ∞ë„ÄÇÂ∞§ÂÖ∂ÊòØÂú®Â∞èÁ®ãÂ∫èÂàÜ‰∫´Âá∫ÂéªÁöÑÈìæÊé•ÔºåÁî±ÂÖ∂‰ªñÁî®Êà∑ÁÇπÂºÄÂàÜ‰∫´ÈìæÊé•ËøõÂÖ•Â∞èÁ®ãÂ∫èÂÜÖÈÉ®ÔºåÊ≠§Êó∂Êõ¥ÊòØË¶ÅÂà§Êñ≠tokenÔºåtokenÁöÑÂà§Êñ≠‰∏ÄËà¨ÈÄâÂú® onShowÔºàÔºâÈí©Â≠êÊâßË°åËÄå‰∏çÂú® onLoadÔºàÔºâÈí©Â≠êÂÜÖÊâßË°å„ÄÇËã•‰∏çÂ≠òÂú®tokenÔºåÂàôÂ∫îËØ•ÊâßË°åÁôªÂΩïÂéªÊãøÂèñtokenÔºåÂÜçËøõË°å‰∏öÂä°ÈÄªËæë 1234567891011onShow() &#123; const that = this; if( !wepy.getStorageSync('token') ) &#123; wepy.login().then(async (res) =&gt; &#123; if(res.code) &#123; let code = res.code; await that.login(code) &#125; &#125;); &#125; &#125; formid ÂæÆ‰ø°Êèê‰æõ‰∫ÜÊúçÂä°ÈÄöÁü•ÔºåÂç≥Âú®‰Ω†ÊîØ‰ªò„ÄÅÂø´ÈÄíÁ≠âË°å‰∏∫Êó∂ÔºåÂæÆ‰ø°‰ºöÁõ¥Êé•Áªô‰Ω†Âèë‰∏Ä‰∏™ÊúçÂä°ÈÄöÁü•ÔºàÊ®°ÊùøÊ∂àÊÅØÔºâÊù•ÊèêÈÜíÔºåÊØèÊ¨°ÊèêÈÜíÈÉΩ‰ºöÊ∂àËÄóËØ•Áî®Êà∑Â≠òÂÇ®ÁöÑformIDÔºåformID‰∏∫Ê∂àËÄóÂìÅÔºåÁî®‰∏Ä‰∏™Â∞ë‰∏Ä‰∏™ÔºåÂè™ÊúâÈÄöËøáÁî®Êà∑ÁöÑË°®ÂçïÊèê‰∫§Ë°å‰∏∫ÊâçÂèØ‰ª•ÁßØÊîíformID 12345678&lt;form @submit="submitForm" report-submit="true"&gt; &lt;button form-type="submit" class="editCard" @tap = "goModifiPage('editFormTab')"&gt;‰øÆÊîπ&lt;/button&gt;&lt;/form&gt;//jsÊñπÊ≥ïsubmitForm(e) &#123; this.postFormId( e.detail.formId ) // ÂêëÂêéÁ´Ø‰º†Ëæìformid&#125; ÊîØ‰ªò ÂáÜÂ§áÔºö crypto-js.js &amp;&amp; md5.js ÂæÆ‰ø°ÊîØ‰ªòÊµÅÁ®ã‰∏∫Ôºö ÂâçÁ´ØÁÇπÂáªÊîØ‰ªòÊåâÈíÆÊãâËµ∑ÊîØ‰ªò ==„Äã ÂáÜÂ§áÂä†ÂØÜÊï∞ÊçÆ ==„Äã Ë∞ÉÁî®ÂêéÁ´ØÊé•Âè£Ôºå‰º†ÂÖ•ÈúÄË¶ÅÁöÑÂä†ÂØÜÊï∞ÊçÆ ==„Äã ÂêéÁ´ØÈ™åËØÅÂä†ÂØÜÊï∞ÊçÆÔºåÂÜçËøîÂõûÂä†ÂØÜÊï∞ÊçÆ ==„Äã ÂâçÁ´ØÊãøÂà∞ÂêéÁ´ØÂä†ÂØÜÊï∞ÊçÆÔºàÊó∂Èó¥Êà≥„ÄÅÂÜÖÂÆπ„ÄÅÁ≠æÂêçÔºâÔºåÂØπÊó∂Èó¥Êà≥ÂíåÂÜÖÂÆπËøõË°åÊú¨Âú∞Á≠æÂêçÔºåÂÜçÂà§Êñ≠Êú¨Âú∞Á≠æÂêçÂíåÂêéÁ´ØÁ≠æÂêçÊòØÂê¶‰∏ÄËá¥ÔºåËã•‰∏ç‰∏ÄËá¥ÔºåÁõ¥Êé•ËøîÂõûÔºåÈÄÄÂá∫ÊîØ‰ªòÔºåÊîØ‰ªòÂ§±Ë¥•ÔºÅËã•‰∏ÄËá¥ÔºåÂØπÂàöÂàöÂêéÂè∞ËøîÂõûÁöÑcontentÔºàÂÜÖÂÆπÔºâËøõË°åËß£ÊûêÔºåÊãøÂà∞ÊâÄÈúÄËÆ¢ÂçïÊï∞ÊçÆÔºåÂâçÁ´ØÊãâËµ∑ÂæÆ‰ø°ÊîØ‰ªòÔºåÂèÇÊï∞‰º†ÂÖ•ÂàöÂàöËß£ÊûêÊï∞ÊçÆ ===„Äã ÂæóÂà∞ÊîØ‰ªòÁªìÊûú success or fail ÔºÅÁªìÊùü 12345678/** * Á≠æÂêçÂáΩÊï∞ Sign */function sign(timestamp, content) &#123; var raw = timestamp + salt + content var hash = CryptoJS.SHA256(raw).toString() return CryptoJS.MD5(hash).toString()&#125; ÂâçÁ´ØÁÇπÂáªÊîØ‰ªòÊåâÈíÆÔºö 123456789101112131415161718192021222324252627// ÂçïÁã¨ÊîØ‰ªòÊé•Âè£alonePay(arg) &#123; const that = this; if( that.buttonClicked === false ) return; //Èò≤Ê≠¢ÈáçÂ§çÂ§öÊ¨°ÊãâËµ∑ÊîØ‰ªò that.buttonClicked = false; let mode = 1; //‰∏öÂä°ÈúÄÊ±ÇÔºåÊàëÊúâ‰∫îÁßç‰∏çÂêåÊ®°ÂºèÊîØ‰ªò let appId = this.$parent.globalData.appId; let content; let sign; const timeStamp = new Date().Format("yyyy-MM-dd hh:mm:ss").toString(); let code = wepy.getStorageSync('code'); wepy.login().then((res) =&gt; &#123; //Ëé∑ÂèñÊúÄÊñ∞ÁöÑcodeÔºåÂèØËÉΩËøôÈáåÊ≤°ÂøÖË¶ÅÔºåÂÖ∑‰ΩìÂíåÂêéÁ´ØÂïÜÈáè if(res.code) &#123; let code = res.code; log('code', code) wepy.setStorage(&#123; key: "code", data: code &#125;) &#125; &#125;).then( res =&gt; &#123; content = `mode=$&#123;mode&#125;&amp;app_id=$&#123;appId&#125;` sign = Sign.sign(timeStamp,content); &#125;).then(res =&gt; &#123; that.goCirclePay( that.circle_id, timeStamp, sign, content, mode ) &#125;)&#125;, ÊîØ‰ªòÂáΩÊï∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879// ÊîØ‰ªòÂáΩÊï∞ÔºåÊàëÂâçÁ´ØÊúâ‰∫îÁßçÊîØ‰ªòÊÉÖÂÜµÔºàÂçïÁã¨„ÄÅËá™Â∑±ÂèëËµ∑ÊãºÂõ¢„ÄÅÊãºÂà´‰∫∫Âõ¢„ÄÅios„ÄÅÂÖçË¥π‰∫îÁßçÊîØ‰ªòÔºâÔºåÊâÄ‰ª•ÂçïÁã¨ÊäΩÂá∫ÊîØ‰ªòÔºåÊØèÊ¨°Ë∞ÉÁî®ÊîØ‰ªòÂáΩÊï∞goCirclePay( circle_id, timestamp, sign, content, mode) &#123; const that = this; circleApi.goCirclePay(&#123; data: &#123; circle_id, timestamp, sign, content &#125;, getToken: true &#125;).then( res =&gt; &#123; log('ÊîØ‰ªòresÔºö', res) let data = res.data const SignServer = data.sign const timeStampServer = data.timestamp let contentServer = data.content const SignLocal = Sign.sign(timeStampServer,contentServer); if( mode === 0 &amp;&amp; data.status === "success") &#123; that.nav('/pages/circleDetail?circle_id=' + that.circle_id) return; &#125; if( SignLocal !== SignServer ) &#123; log('Á≠æÂêç‰∏ç‰∏ÄËá¥ÔºÅ') wx.showToast(&#123; title: "ÊÇ®Â∑≤ÁªèÊîØ‰ªòËøá‰∫Ü", duration: 1500, image: "../images/common/icon_wxchat.png", &#125;) return &#125; let contentArr = contentServer.split('&amp;') const timeStamp = contentArr[0].split('=')[1]; const nonceStr = contentArr[1].split('=')[1]; let index = contentArr[2].indexOf("="); const package1 = contentArr[2].slice(index+1) const signType = contentArr[3].split('=')[1]; const paySign = contentArr[4].split('=')[1]; wepy.requestPayment(&#123; timeStamp, nonceStr, package: package1, signType, paySign &#125;).then(res =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve() &#125;, 1000) &#125;) &#125;).then(res =&gt; &#123; //ÊîØ‰ªòÂêépromiseÔºåËøôÈáåÊúâÊàêÂäüÂíåfail‰∏§ÁßçÔºåfailÂú®catchÊçïËé∑ÔºåËøôÈáåÁõ¥Êé•ÂºÄÂßãÂÜôÊîØ‰ªòsuccessÂêéÁöÑ‰∏öÂä°‰ª£Á†Å that.buttonClicked = true; let groupFormIdGet; circleApi.getGroupFormId(&#123; ////Ëé∑ÂèñgetGroupFormId data: &#123; circle_id: that.circle_id &#125;, getToken: true &#125;).then( res =&gt; &#123; // let data = res.data that.group_form_id = data.group_form_id groupFormIdGet = data.group_form_id if( mode === 1) &#123; that.nav(`/pages/paySuccess?circle_id=$&#123;that.circle_id&#125;&amp;shareLink=$&#123;that.shareLink&#125;`) &#125; else if( mode === 2) &#123; that.nav(`/pages/paySuccess?circle_id=$&#123;that.circle_id&#125;&amp;group_form_id=$&#123;groupFormIdGet&#125;`) &#125; that.$apply() //ËÑèÂÄºÊ£ÄÊü•Ëß¶Âèë &#125;) &#125;).catch(res =&gt; &#123; log('ÊîØ‰ªòÂ§±Ë¥•', res) that.buttonClicked = true; &#125;) &#125;)&#125; ÂõæÁâá‰∏ä‰º†Ôºà‰∏ÉÁâõ‰∫ëÔºâ Êõ¥Â§öÂõæÂ∫äÁΩëÁ´ôËØ∑ËßÅÊàëÂçöÂÆ¢Ôºö https://www.cnblogs.com/fanghl/p/11419914.html ÂõæÁâá‰∏ä‰º†ÊúçÂä°Âô®ÈááÁî®‰∏ÉÁâõ‰∫ëÊúçÂä°ÔºåÂú®app.wpyÂÜÖÂ∞èÁ®ãÂ∫èËß¶ÂèëÁöÑÊó∂ÂÄôÔºåËØ∑Ê±Ç‰∏ÉÁâõ‰∫ëÊãøÂà∞tokenÂ≠ò‰∏∫ÂÖ®Â±ÄÂèòÈáè„ÄÇ 123456789101112//app.wpyonLaunch() &#123; //other code *** // ‰∏ÉÁâõ‰∫ë,Ëé∑Âèñ‰∏ÉÁâõ‰∫ëtoken wepy.request(&#123; url: 'https://****************/qiniu_token/', header:&#123;'content-type': 'application/json'&#125;, &#125;).then((res) =&gt; &#123; this.globalData.qiniuToken = res.data.token &#125;);&#125; ÂØºÂÖ•‰∏ÉÁâõ‰∫ëÊñá‰ª∂import qiniuyun from &#39;@/utils/qiniuUploader&#39; base.js‰ª£Á†ÅÔºö 1234567891011121314// ‰∏ä‰º†ÂõæÁâá base.jsconst uploadImg = (imageURL, uptokenURL) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; qiniuyun.upload(imageURL, (res) =&gt; &#123; resolve(res); &#125;, (error) =&gt; &#123; reject(error); &#125;, &#123; region: 'ECN', domain: 'Â°´ÂÖ•ÂüüÂêç', uptoken: uptokenURL &#125;); &#125;); &#125; È°µÈù¢ÁªìÊûÑ 12345678910111213141516&lt;!-- ‰∏ä‰º†ÁîüÊ¥ªÁÖß --&gt; &lt;view class="baseInfoTip" style="border: 0"&gt;‰∏ä‰º†ÁîüÊ¥ªÁÖß &lt;view class="imgUploadText"&gt;(ÊúÄÂ§ö9Âº†)&lt;/view&gt; &lt;view class="leftOriginLine"&gt;&lt;/view&gt; &lt;/view&gt; &lt;view class="uploadImgBox"&gt; &lt;repeat for="&#123;&#123;images&#125;&#125;" index="index" item="item" key="index"&gt; &lt;view class="itemBox"&gt; &lt;image class="imgItem" src="&#123;&#123;item&#125;&#125;" mode="aspectFill"&gt;&lt;/image&gt; &lt;image class="imgItemCancel" id="&#123;&#123;index&#125;&#125;" src="../images/common/icon_cardImg_cancel.png" @tap.stop="cancelUploadImg"&gt;&lt;/image&gt; &lt;/view&gt; &lt;/repeat&gt; &lt;view class="itemBox" @tap="addImg" wx:if="&#123;&#123;!addImgCtrl&#125;&#125;"&gt; &lt;image class="imgItem" src="../images/common/icon_addImg.png"&gt;&lt;/image&gt; &lt;/view&gt; &lt;/view&gt; ‰∏ä‰º†ÂõæÁâá‰∏öÂä°Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// ‰ªéÁõ∏ÂÜåÈÄâÊã©ÁÖßÁâá‰∏ä‰º†addImg()&#123; const that = this; if( that.buttonClicked === false ) return; that.buttonClicked = false; wepy.chooseImage(&#123; count:9 - that.images.length, sizeType: 'compressed', &#125;).then(async(res1) =&gt; &#123; that.buttonClicked = true; that.toast('‰∏ä‰º†ÂõæÁâá‰∏≠...','loading'); let filePath = res1.tempFilePaths; for(let i = 0;i &lt; filePath.length;i++)&#123; let imgSrc= res1.tempFilePaths[i]; let imgType = imgSrc.substring(imgSrc.length-3); let imgSize = res1.tempFiles[i].size; if(imgSize &gt; 2000000 || imgType === 'gif')&#123; that.toast('ËØ•ÂõæÁâáÊ†ºÂºèÈîôËØØÔºÅËØ∑ÈáçÊñ∞ÈÄâÊã©‰∏ÄÂº†', 'none', 3000); continue &#125; let res = await base.uploadImg(filePath[i], that.$parent.globalData.qiniuToken); that.images.push(res.imageURL); log('imageÈïøÂ∫¶Ôºö', that.images.length) log('imageÔºö', that.images) if( that.images.length &gt;= 9) &#123; that.addImgCtrl = true &#125; if(that.images.length &gt; 9)&#123; that.images = that.images.slice(0,9) &#125; if(that.images.length &gt;0 &amp;&amp; that.config.fImages)&#123; that.config.progress = that.config.progress + parseFloat(that.config.getConfigs.lifepicweight*100); that.config.fImages = false &#125; that.$apply(); // ‰∏ä‰º†Áî®Êà∑Â§¥ÂÉèÂàóË°® that.userInfo.photos = that.images if(i === filePath.length -1)&#123; wepy.hideToast(); &#125; &#125; &#125;).catch((res) =&gt; &#123; if(res.errMsg === "chooseImage:fail:system permission denied")&#123; that.toast('ËØ∑ÊâìÂºÄÂæÆ‰ø°Ë∞ÉÁî®ÊëÑÂÉèÂ§¥ÁöÑÊùÉÈôê', 'none', 3500) &#125; &#125;)&#125;,// ÂèñÊ∂àÂõæÁâá‰∏ä‰º†cancelUploadImg(e) &#123; if( this.images.length &lt; 10 ) &#123; this.addImgCtrl = false &#125; let index = e.target.id this.images.splice(index, 1)&#125;, ÂæÆ‰ø°Ê∂àÊÅØËÅäÂ§©Â∏ÉÂ±ÄÂæÆ‰ø°ËÅäÂ§©Ê°ÜÊï¥‰ΩìÂ∏ÉÂ±ÄÁâπÁÇπÊúâÔºö Êé•Êî∂ÊñπÂíåÂèëÈÄÅÊñπÊ∂àÊÅØÂàÜÂà´‰Ωç‰∫éÂ±èÂπïÁöÑÂ∑¶Âè≥‰∏§‰æß„ÄÅÊúÄÊñ∞ÁöÑÊ∂àÊÅØ‰∏ÄÂÆöÊòØÂú®Â±èÂπïÊúÄÂ∫ïÈÉ®„ÄÅËøõÂÖ•Ê∂àÊÅØdialogÈ°µÈù¢‰∏ÄÂÆöÊòØÊòæÁ§∫ÁöÑÊúÄÊñ∞Ê∂àÊÅØÔºåÂç≥È°µÈù¢ÊªëÂä®Âú®ÊúÄÂ∫ïÈÉ®„ÄÇËøô‰∏â‰∏™Âü∫Êú¨ÁâπÂæÅÊûÑÊàê‰∫ÜÂæÆ‰ø°ËÅäÂ§©È°µÈù¢ÁöÑÂ∏ÉÂ±ÄÂéüÂàô„ÄÇÂÖàÁúãÊïàÊûúÂõæ ÔºàÈùûÊúÄÁªàÊïàÊûúÔºâÔºö‚ÜìÂ∏ÉÂ±ÄÊÄùË∑ØÔºöflexÂèçÂêëÂ∏ÉÂ±Ä 1234567891011121314151617&lt;!-- Ê†ºÂºèÂåñ‰ª£Á†Å --&gt;&lt;view class="msgBox" id="msgBox"&gt; &lt;repeat for="&#123;&#123;talkContent&#125;&#125;" key="index" item="item"&gt; &lt;view class="msgItem &#123;&#123;item.send_user === configData.send_user ? 'msgItemReverse' : ''&#125;&#125;"&gt; &lt;image class="adverseHeadimg" src="&#123;&#123;item.send_user === configData.send_user ? configData.user_img : talkAimerInfo.headimg&#125;&#125;" mode="aspectFill"&gt; &lt;/image&gt; &lt;text class="textBox &#123;&#123;item.send_user == configData.send_user ? 'textGreen' : ''&#125;&#125;" selectable="true"&gt; &#123;&#123;item.message&#125;&#125; &lt;/text&gt; &lt;/view&gt; &lt;view class="timeTip" wx:if="&#123;&#123;item.send_user != configData.send_user&#125;&#125;"&gt; &#123;&#123;item.create_time&#125;&#125; &lt;/view&gt; &lt;/repeat&gt;&lt;/view&gt; 1234.msgBox&#123; display: flex; /*Êï¥‰ΩìÊ∂àÊÅØÊ°ÜflexÂ∏ÉÂ±ÄÔºåÁ∫µÂêëÂèñÂèçÂ∏ÉÂ±Ä*/ flex-direction: column-reverse;&#125; 12345678.msgItem&#123; /*Ê∂àÊÅØitemÊ†∑Âºè*/ position: relative; display: flex; flex-direction: row;&#125;.msgItemReverse&#123; /*ÂØπÊñπÁöÑÊ∂àÊÅØÊ†∑ÂºèÔºåflexË°åÂèñÂèçÂ∏ÉÂ±Ä*/ flex-direction: row-reverse;&#125; ‰øùÊåÅÈ°µÈù¢ÂßãÁªàÊªëÂä®Âú®ÊúÄÂ∫ïÈÉ®ÂáΩÊï∞ 12345678910pageScrollToBottom( msgLength ) &#123; //Âú®È°µÈù¢ÈúÄË¶ÅËøõË°åÂèòÂåñÊó∂Ë∞ÉÁî® wx.createSelectorQuery().select('#contentBox').boundingClientRect(function(rect)&#123; // ‰ΩøÈ°µÈù¢ÊªöÂä®Âà∞Â∫ïÈÉ® log('rect', rect) wx.pageScrollTo(&#123; scrollTop: rect.bottom + msgLength*60, duration: 80 &#125;) log('msgBoxÁöÑ‰∏ãËæπÁïåÂùêÊ†áÔºö ', msgLength ) &#125;).exec() &#125; Ëá™Â∑±ÂèëÈÄÅÁöÑÊ∂àÊÅØÊï∞ÊçÆÂèØ‰ª•Áõ¥Êé•ÂéãÂÖ•Êú¨Âú∞Êï∞ÁªÑ talkContent ÂÜÖÔºåUnshift()ËøõÂÖ•ÔºåÂæóÂà∞‚ÄúË¥üË¥üÂæóÊ≠£‚ÄùÊïàÊûúÔºåÂç≥Êï∞ÊçÆÂèçÔºåÂ∏ÉÂ±ÄÂèçÂç≥ÂèØÂæóÂà∞‰ªéÂ∫ïÈÉ®ÊéíÂàóÁöÑÂ∏ÉÂ±Ä„ÄÇÂØπÊñπÁöÑÊ∂àÊÅØ‰ªéÊúçÂä°Âô®Êãâ‰∏ãÊù•ÁöÑÊó∂ÂÄôÔºåÊîæÂÖ• talkContent ÂÜÖÂâç reverse() ‰∏Ä‰∏ãÂç≥ÂèØ ËÅäÂ§©È°µÈù¢inputÈ°∂Ëµ∑È°µÈù¢Áõ∏ÂÖ≥ËÅäÂ§©inputÁÇπÂáªÂêéÔºåÈªòËÆ§‰∏∫È°∂Ëµ∑È°µÈù¢Ôºå‰πüÂèØ‰ª•ÂÖ≥Èó≠ÈªòËÆ§ÈÄâÊã©‰∏çÈ°∂Ëµ∑„ÄÇ‰ΩÜÊòØ‰∏çÈ°∂Ëµ∑È°µÈù¢ÂÖ∂ÂÆûÊòØinputËÑ±Á¶ªÂΩìÂâçpageÔºå‰ºöÂá∫Áé∞ÈîÆÁõò‰∏äÊñπÊ≤°ÊúâÊàë‰ª¨ÁöÑËæìÂÖ•Ê°ÜÔºÅÂõ†‰∏∫ÈîÆÁõò‰∏çÈ°∂Ëµ∑È°µÈù¢ÔºåÊïÖ‰∏ç‰ºöÂΩ±Âìç‰πãÂâçÁöÑÂ∏ÉÂ±ÄÔºåËæìÂÖ•Ê°Ü‰∏ÄËà¨ÈÉΩÂú®È°µÈù¢ÊúÄÂ∫ïÈÉ®„ÄÇËß£ÂÜ≥Ôºö wx.onKeyboardHeightChange ÁõëÂê¨ÈîÆÁõòÈ´òÂ∫¶Ôºå‰∏•Èáç‰∏çÊé®ËçêinputËá™Ë∫´ÂáΩÊï∞bindkeyboardheightchangeÔºåÂõ†‰∏∫bindkeyboardheightchange Âú®ÊâãÂäø‰∏äÂàíÈöêËóèÈîÆÁõòÊó∂AndroidÊòØ‰∏ç‰ºöË¢´Ëß¶ÂèëÁöÑÔºÅÔºÅÔºÅÊÄùË∑ØÔºö adjust-position = &quot;false&quot;ËÆæÁΩÆ‰∏çÈ°∂Ëµ∑È°µÈù¢ÔºåÂú®ÊâãÂä®ÊääÂÜÖÂÆπÂ±ïÁ§∫view ÁöÑÈ´òÂ∫¶ÂáèÂ∞ëÈîÆÁõòÁöÑÈ´òÂ∫¶ÔºÅÂú®ÈîÆÁõòÊãâËµ∑Êó∂ÔºåÂÜÖÂÆπÈ´òÂ∫¶ÂáèÂ∞ëÈîÆÁõòÁöÑÈ´òÂ∫¶ÔºåÂú®ÈîÆÁõòÈöêËóèÂºèÔºåÂõûÂ§çÂéüÈ´òÂ∫¶„ÄÇÊúÄÂêéÁöÑÊïàÊûúÂíåÂæÆ‰ø°ÂéüÁîüËÅäÂ§©‰∏ÄÊ†∑ÔºÅÊïàÊûúÔºö ‰ºòÂåñÔºöÂú®ÂáèÂ∞ëÈ´òÂ∫¶ÁöÑÂêåÊó∂ÔºåÊääÂÜÖÂÆπÈ°µÈù¢ÊªëÂà∞ÊúÄÂ∫ïÈÉ®Ôºå‰ª•Â±ïÁ§∫ÊúÄÊñ∞Ê∂àÊÅØÔºÅ 12345678910&lt;input class="inputContent" type="text" value="&#123;&#123;userInputContent&#125;&#125;" bindinput = "InputBlur" adjust-position = "&#123;&#123;false&#125;&#125;" hold-keyboard = true confirm-hold = true confirm-type = 'done' @tap="onInpueChange"&gt; 123456789101112131415161718onInpueChange() &#123; const that = this that.scrollBottom() wx.onKeyboardHeightChange(res =&gt; &#123; that.log(res.height) that.scrollView.height = res.height *2 + 20 that.$apply() &#125;)&#125;// È°µÈù¢ÊªöÂä®Âà∞Â∫ïÈÉ®scrollBottom()&#123; const that = this; that.scrollTopValue++; setTimeout(function() &#123; that.scrollTop = that.scrollTopValue; that.$apply() &#125;, 300);&#125; CSSÊ≥®ÊÑèÁÇπCSSÊåÅÁª≠Ë°•ÂÖÖ‰∏≠‚Ä¶‚Ä¶word-break: break-all; //Êç¢Ë°åÊñáÂ≠óÔºåËã±ÊñáÊ∫¢Âá∫-webkit-overflow-scrolling: touch; //iosÁ´ØÂêØÁî®Á°¨‰ª∂Âä†ÈÄüÔºåËß£ÂÜ≥iosÁ´ØÊªëÂä®Á≤òÊâãcatchtouchmove=&#39;true&#39; //Ê®°ÊÄÅÊ°Ü‰∏≠Ê∑ªÂä†ÔºåÁ¶ÅÊ≠¢È°µÈù¢ÊªëÂä®circleDynamic:last-of-type //ÁâπÂÆöÁ±ªcircleDynamic‰∏≠ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†:nth-of-type(1/odd/even) //ÈÄâÊã©ÁâπÂÆöÂÖÉÁ¥†‰∏ãÁ¨¨Âá†‰∏™ÂÖÉÁ¥† 123 /* CSS Âê∏È°∂ */position: sticky; top: 0; async/awaitÂºÇÊ≠•ÁºñÁ®ãÁöÑÁªàÊûÅËß£ÂÜ≥ÊñπÊ°àÔºåÂú®Â∞èÁ®ãÂ∫èÂÜÖÊãøÂèñcodeÊàñËÄÖloginÊó∂‰ºöÁî®Âà∞ÔºåawaitÂèØÁêÜËß£‰∏∫Ê±ÇÂÄºÔºÅasyncÂèØÁêÜËß£‰∏∫Êê≠ÈÖçawaitÁöÑËØ≠Ê≥ïÔºåÂ¶ÇÊûúÂºÇÊ≠•ÂáΩÊï∞ÂéªÊéâawaitÔºåËøîÂõûÁöÑ‰∏ÄËà¨ÊòØ promise ÂØπË±°ÔºåÈúÄË¶ÅÊâãÂä®Âéªreject Âíå resolve „ÄÇ 123456789101112if( !wepy.getStorageSync('token') ) &#123; wepy.login().then(async (res) =&gt; &#123; if(res.code) &#123; let code = res.code; await that.login(code) wepy.setStorage(&#123; key: "code", data: code &#125;) &#125; &#125;); &#125; else &#123;&#125; ios/androidÊú∫ÂûãÂå∫Âà´Áî±‰∫éÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁöÑËøêË°åËßÑËåÉÈôêÂà∂Á≠âÔºå‰∏Ä‰∫õÂú® Android ‰∏äÂèØ‰ª•Â≠òÂú®ÁöÑ‰∏öÂä°ÈúÄÊ±ÇÂπ∂‰∏çËÉΩÂéüÂ∞Å‰∏çÂä®Âú® ios Á´ØËøêË°åÔºåÂê¶ÂàôÂ∞èÂøÉ Â∞ÅÂè∑Ë≠¶Âëä ÔºàÊ≠§Â§ÑÊâãÂä®ÊªëÁ®Ω.jpgÔºâ,ÊâÄ‰ª•‰∏ÄËà¨ÈááÂèñ‰∏§‰∏™Á≥ªÁªüÁöÑÁî®Êà∑ËøõÂÖ•Êüê‰∏Ä‰∏™È°µÈù¢ÔºåÂ±ïÁé∞‰∏çÂêåÁöÑÂÜÖÂÆπ„ÄÇÂà§Êñ≠Êú∫ÂûãÔºöÂú® app.wpy ÂÖ•Âè£Êñá‰ª∂‰∏≠Ôºåonlaunch ÁîüÂëΩÂë®ÊúüÂÜÖÂà§Êñ≠Êú∫ÂûãÂπ∂‰øùÂ≠òÂà∞ÂÖ®Â±ÄÂèòÈáèÂç≥ÂèØ 12345678getSystemInfo() &#123; const that = this; wx.getSystemInfo(&#123; success(res) &#123; that.globalData.userPlatform = res.platform; &#125; &#125;)&#125; ÂàÜÂåÖÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂÆòÊñπÈôêÂà∂Â∞èÁ®ãÂ∫è‰ª£Á†ÅÂ§ßÂ∞è‰∏çÂæóË∂ÖËøá 2M ÔºåÂú®‰∏öÂä°ÈÄªËæëËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÊü•Ëøá2MÂêéÔºåÊàë‰ª¨ÂèØ‰ª•ÈááÁî®ÂàÜÂåÖÂä†ËΩΩ„ÄÇ 1234567891011121314151617181920//app.wpyconfig = &#123; pages: [ &apos;basePage1&apos;, &apos;basePage2&apos;, &apos;basePage3&apos;, ], subPackages: [ &#123; root: &apos;dirName&apos;, //ÈÄöÂ∏∏ÁªìÊûÑÂíå pages: [ &apos;subPage1&apos;, &apos;subPage2&apos;, ] &#125; ]&#125;//È°µÈù¢‰ΩøÁî®Ôºöthis.nav(`/dirName/pages/subPage1`) canvasÁîüÊàêÊµ∑Êä•Â∞èÁ®ãÂ∫èÂàÜ‰∫´Ëá≥ÊúãÂèãÂúàÁöÑÊµ∑Êä•Âà∂‰ΩúËøáÁ®ãÔºåÊµ∑Êä•ÂÜÖÂÆπ‰∏∫Âä®ÊÄÅËé∑ÂèñÔºåÂÜÖÂÆπÊ†πÊçÆÊØè‰∏™Áî®Êà∑ÁîüÊàê‰∏çÂêåÁöÑÊµ∑Êä• Â¶ÇÂõæÔºåÈô§‰∫ÜËÉåÊôØ‰ΩøÁî®Êú¨Âú∞ÂõæÁâáÔºåÂÖ∂‰ªñÁöÑÊâÄÊúâÂÜÖÂÆπÂùá‰∏∫Âä®ÊÄÅËé∑ÂèñÔºå‰∏îÊØèÊ¨°Ëé∑ÂèñÁöÑ‰∏çÂ∞ΩÁõ∏Âêå„ÄÇ ÂõæÁâáÂÖà‰ªéÁΩëÁªúÂõæÁâá‰∏ãËΩΩÂà∞Êú¨Âú∞ÊâçÂèØ‰ª•Ê∏≤ÊüìÔºåÂ¶ÇÊûúÂºÄÂèëÂ∑•ÂÖ∑ÂèØ‰ª•Ê≠£Â∏∏ÊòæÁ§∫ÔºåËÄåÁúüÊú∫Êó†Ê≥ïÁªòÂà∂ÔºåÈÇ£‰πàËØ∑ÂÖàÊ£ÄÊü•‰Ω†ÁöÑ downloadFile ÂüüÂêç!!! ÁªòÂà∂ÂúÜËßí-Áõ¥ËßíÂõæÁâá ÂõæÁâá‰øùÂ≠òÊ®°Á≥ä 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788//ÁªòÂà∂ÊñáÂ≠ó drawTxt(fontSize, color, content, x, y, bold=false) &#123; this.ctx.save() this.ctx.setFontSize(fontSize) this.ctx.setFillStyle(color) this.ctx.fillText(content, x, y) if (bold) &#123; this.ctx.fillText(content, x, y + 0.3) this.ctx.fillText(content, x + 0.3, y) &#125; this.ctx.setTextBaseline('middle') this.ctx.restore() &#125;//ÁªòÂà∂ÂúÜËßíÂõæÁâá(ÈªòËÆ§)-Áü©ÂΩ¢ÂõæÁâá getRectWithRadius(ctx, x, y, w, h, r, c, borderArgs = []) &#123; // r &gt; 0 ÂàôÈªòËÆ§ÁªòÂà∂ÂúÜËßíÂõæÁâáÔºå r = 0 ,ÂàôÁªòÂà∂Áü©ÂΩ¢ //ÁªòÂà∂ÂúÜÂΩ¢ Âàô r = 1/2 w || 1/2h //ÁªòÂà∂‰ªªÊÑèÁõ¥Ëßí Âàô borderArgs = [leftTop, rightTop, rightBottom, leftBottom]ÊéßÂà∂ let rate = this.rate let b = borderArgs ctx.beginPath() ctx.moveTo(x / rate, y / rate) b &amp;&amp; b[0] ? '' : ctx.arc((x + r) / rate, (y + r) / rate, r / rate, Math.PI, 1.5 * Math.PI) b &amp;&amp; b[1] ? ctx.lineTo((x + w) / rate, y / rate) : ctx.lineTo((x + w - r) / rate, y / rate) b &amp;&amp; b[1] ? '' : ctx.arc((x + w - r) / rate, (y + r) / rate, r / rate, 1.5 * Math.PI, 0) b &amp;&amp; b[2] ? ctx.lineTo((x + w) / rate, (y + h) / rate) : ctx.lineTo((x + w) / rate, (y + h - r) / rate) b &amp;&amp; b[2] ? '' : ctx.arc((x + w - r) / rate, (y + h - r) / rate, r / rate, 0, 0.5 * Math.PI) b &amp;&amp; b[3] ? ctx.lineTo((x) / rate, (y + h) / rate) : ctx.lineTo((x + r) / rate, (y + h) / rate) b &amp;&amp; b[3] ? '' : ctx.arc((x + r) / rate, (y + h - r) / rate, r / rate, 0.5 * Math.PI, Math.PI) ctx.closePath() if (c) &#123; ctx.fillStyle = c ctx.fill() &#125; &#125;// ‰øùÂ≠òÊµ∑Êä• savePosterToLocal() &#123; const that = this // Ëé∑ÂèñÁî®Êà∑ÊòØÂê¶ÂºÄÂêØÁî®Êà∑ÊéàÊùÉÁõ∏ÂÜå wx.getSetting(&#123; success(res) &#123; // Â¶ÇÊûúÊ≤°ÊúâÂàôËé∑ÂèñÊéàÊùÉ if (!res.authSetting['scope.writePhotosAlbum']) &#123; wx.authorize(&#123; scope: 'scope.writePhotosAlbum', success() &#123; that.saveCanvas() &#125;, fail() &#123; that.toast('Âè≥‰∏äËßíÂºÄÂêØÊéàÊùÉ', 'none') wx.openSetting() &#125; &#125;) &#125; else &#123; that.saveCanvas() &#125; &#125; &#125;) &#125;//canvas‰øùÂ≠òËá≥Áõ∏ÂÜå saveCanvas() &#123; // 1-ÊääÁîªÂ∏ÉËΩ¨ÂåñÊàê‰∏¥Êó∂Êñá‰ª∂ const that = this wx.canvasToTempFilePath(&#123; x: 0, y: 0, width: 560, // ÁîªÂ∏ÉÁöÑÂÆΩ height: 996, // ÁîªÂ∏ÉÁöÑÈ´ò destWidth: 1080 * 750 / wx.getSystemInfoSync().windowWidth, destHeight: 1920 * 750 / wx.getSystemInfoSync().windowWidth, canvasId: 'poster', success(res) &#123; wepy.saveImageToPhotosAlbum(&#123; filePath: res.tempFilePath, success(res2) &#123; that.toast('‰øùÂ≠òËá≥Áõ∏ÂÜåÊàêÂäü', 'none') &#125;, fail() &#123; that.toast('‰øùÂ≠òÂ§±Ë¥•ÔºåÁ®çÂêéÂÜçËØï', 'none') &#125; &#125;) &#125;, fail() &#123; that.toast('‰øùÂ≠òÂ§±Ë¥•ÔºåÁ®çÂêéÂÜçËØï', 'none') &#125; &#125;) &#125; Â§öÂº†ÂõæÁâá‰∏ãËΩΩÁΩëÁªúÂõæÁâá‰∏ãËΩΩÊàêÊú¨Âú∞ÂõæÁâáÔºå‰∏îÂÖ®ÈÉ®‰∏ãËΩΩÂÆåÂÖ®ÂêéÊâçÂèØ‰ª•ÁªòÂà∂canvas 1234567891011121314151617181920212223242526272829let promise1 = new Promise(function(resolve,reject)&#123; wx.getImageInfo(&#123; src: that.posterData.matchmaker.qrcord, success:function(res)&#123; imgResource.qrcord = res.path resolve(res); &#125;, fail:function(res)&#123; reject(res); &#125; &#125;) &#125;)let promise2 = new Promise(function(resolve,reject)&#123; wx.getImageInfo(&#123; src: that.posterData.matchmaker.qrcord, success:function(res)&#123; imgResource.qrcord = res.path resolve(res); &#125;, fail:function(res)&#123; reject(res); &#125; &#125;)&#125;)Promise.all([promise1, promise2, promise3]).then(res =&gt; &#123; //ÂºÄÂßãÁªòÂà∂ const ctx = wx.createCanvasContext('poster') that.ctx = ctx&#125; ÂºÇÂ∏∏ÊòæÁ§∫ÊúâÊó∂ÂÄôAndroidÊâãÊú∫‰ºöÊòæÁ§∫‰∏çÂÆåcanvasÔºåÂÆΩÂ∫¶ÂºÇÂ∏∏ÔºåiosÂç¥Ê≤°ÊúâËØ•ÂºÇÂ∏∏Áé∞Ë±°„ÄÇÂÖ∂‰∏≠‰∏ÄÁßçÂèØËÉΩÂ∞±ÊòØËÆæÁΩÆcanvasÊ†áÁ≠æÁöÑÂÆΩÈ´òÂçï‰Ωç‰∏ç‰∏ÄËá¥ÔºåcanvasÂÜÖÂçï‰ΩçÂêå‰∏Ä‰Ωç px ÔºåÊääÂ∏∏Áî®ÁöÑ rpx ÊõøÊç¢‰∏∫ px &lt;canvas canvas-id=&quot;poster&quot; style=&quot;width: 280px; height: 498px;&quot;&gt;&lt;/canvas&gt; touchmove/onPageScrollÂä®ÁîªÊïàÊûúÂ¶ÇÂõæÔºåÂè≥‰∏ãËßíÁöÑÊåâÈíÆÔºå‰∏ÄËà¨‰ºöÂÅöËøôÊ†∑ÁöÑÊïàÊûúÔºåÂΩìÁî®Êà∑ÊªëÂä®ÂàóË°®Êó∂ÔºåËØ•ÊåâÈíÆÂêë‰∏ãÊªëÂä®Âπ∂ÈöêËóèÔºåÂΩìÁî®Êà∑ÂÅúÊ≠¢ÊªëÂä®‰∏îÈ°µÈù¢‰∫¶ÂÅúÊ≠¢ÊªëÂä®ÔºàÈùûÁî®Êà∑ÊâãÊåáËÑ±Á¶ªÂ±èÂπïÔºâÊó∂ÔºåËØ•ÊåâÈíÆÂÜç‰ªéÈ°µÈù¢Â∫ïÈÉ®ÊªëÂá∫„ÄÇ touchmove„ÄÅ onPageScroll ÊÄùË∑Ø1Ôºö Á¨¨‰∏ÄÁßçÊÉ≥Ê≥ïÊòØtouchstartÊó∂Ôºå Ëß¶Âèë‰∏ãÊªëÂä®ÁîªÔºåtouchendÊó∂Ëß¶Âèë‰∏äÂàíÂä®Áîª Áº∫ÁÇπÔºö tapÁÇπÂáª‰∫ã‰ª∂‰πü‰ºöÂÖàËß¶Âèëstart Âíå end ‰∫ã‰ª∂ÔºåÊïÖÁÇπÂáªÂ±èÂπï‰πü‰ºöËß¶ÂèëÂä®ÁîªÔºå‰∏îÂ±èÂπïÊäñÂä®Ôºåpass ÊÄùË∑Ø2Ôºö touchmove Êó∂Ëß¶ÂèëÂä®ÁîªÔºåtouchendÊó∂‰∏äÂàíÂä®ÁîªÔºå Áº∫ÁÇπÔºöËôΩÁÑ∂ÈÅøÂÖç‰∫ÜÁÇπÂáªÂ∞±Ëß¶ÂèëÂä®ÁîªÔºå‰ΩÜÊïàÊûú‰∏ç‰Ω≥ÔºåÊâãÊåáÁ¶ªÂºÄÂ±èÂπïÔºåÈ°µÈù¢ËøòÂú®ÊªëÂä®ÔºåÂä®ÁîªÂ∑≤Ëß¶Âèë„ÄÇ ÊúÄÁªàËß£Ôºö Âè™Áî® touchmove Êù•Âà§Êñ≠Áî®Êà∑ÊªëÂä®ÂàóË°®ÔºåÂÜçÁî® onPageScroll ÈÖçÂêà Ë∂ÖÊó∂Âô® Êù•Â§ÑÁêÜÈ°µÈù¢ÂÅúÊ≠¢ÊªëÂä®„ÄÇ ‰ª£Á†ÅÔºö 12345678910111213141516171819202122//template&lt;view calss="&#123;&#123;isSlide ? 'down-slide-hide' : 'up-slide-hide'&#125;&#125;"&gt;&lt;/view&gt;// datadata: &#123; isSlide: false, timer: null,&#125;//methodstouchmove(e) &#123; this.isSlide = true this.$apply()&#125;,onPageScrool(e) &#123; const that = this clearTimeout(that.timer) that.timer = setTimeout(() =&gt; &#123; that.isSlide = false that.$apply() &#125;, 400)&#125; È°µÈù¢‰∏ÄÁõ¥Â§Ñ‰∫éÊªëÂä®Êó∂ÔºåË∂ÖÊó∂Âô®‰∏ç‰ºöÁîüÊïàÔºåÂè™ÊúâÂú®È°µÈù¢ÂÅúÊ≠¢ÊªëÂä®ÂêéÔºåË∂ÖÊó∂Âô®ÊâçÁîüÊïàÔºåÁ®ãÂ∫èÊâßË°å ÂΩïÈü≥ ÂΩïÈü≥Ê≤°ÊúâÈöæÂ∫¶Ôºå‰∏ä‰º†ËØ≠Èü≥ÈááÁî®‰∏ÉÁâõ‰∫ëÊúçÂä°ÔºåÊãøÂà∞‰∏¥Êó∂Ë∑ØÂæÑÁªèËøá‰∏ÉÁâõ‰∫ëÊãøÂà∞ÁΩëÁªúË∑ØÂæÑÔºåÂú®‰º†ÁªôËá™Â∑±ÊúçÂä°Âô®„ÄÇËøôÈáåÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂúÜÁéØËøõÂ∫¶Êù°ÔºàcanvasÔºâÔºåÂú®ÂΩïÈü≥Êó∂ÈÖçÂêàÂΩïÈü≥Êó∂ÈïøÂ±ïÁ§∫ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//ÁªòÂà∂ËøõÂ∫¶Êù°ÂúÜÁéØstartRocord() &#123; ... this.countInterval()&#125;drawCircle(step) &#123; !this.ctx &amp;&amp; this.ctx = wx.createCanvasContext('progressBar') let ctx = this.ctx // ctx.clearRect(0, 0, 120, 120) //Ê∏ÖÈô§ÁîªÂ∏ÉÔºåÔºàÂ§öÊ¨°ÈáçÂ§çÁªòÂà∂ÈúÄË¶Å„ÄÇ‰ΩÜÁªòÂà∂Ê≠•‰ºêËøáÂø´‰ºöÂØºËá¥Èó™Â±èÔºâ // ctx.draw() ctx.setLineWidth(10) ctx.setStrokeStyle('#FF5757') ctx.setLineCap('round') ctx.beginPath() ctx.arc(60, 60, 55, -Math.PI/2, step*Math.PI - Math.PI/2, false) ctx.stroke() ctx.draw()&#125;//ËøõÂ∫¶ÁªòÂà∂ÂÆöÊó∂Âô®countInterval() &#123; this.countTimer = setInterval(() =&gt; &#123; if (this.count &lt;= 600) &#123; //ÁªòÂà∂Ê≠•‰ºêÔºåËøôÈáå0.1ÁßíÁªòÂà∂ÔºåÂæà‰∏ùÊªë this.drawCircle(this.count / (600/2)) this.count++ this.$apply() &#125; else &#123; clearInterval(this.countTimer) this.count = 0 &#125; &#125;, 1000 * 0.1);&#125;//ÂΩïÈü≥ÂÆû‰æã initRecord() &#123; !this.RM &amp;&amp; (this.RM = wx.getRecorderManager()) let RM = this.RM RM.onStop(async res =&gt; &#123; //ÁõëÂê¨ÂΩïÈü≥ÁªìÊùüÔºå res‰ºöËøîÂõûÂΩïÈü≥‰ø°ÊÅØÔºà‰∏¥Êó∂Êñá‰ª∂Ë∑ØÂæÑ„ÄÅÊó∂Èïø„ÄÅÊñá‰ª∂Â§ßÂ∞èÔºâ //‰∏ÉÁâõ‰∫ë‰∏ä‰º†‰∏¥Êó∂Ë∑ØÂæÑ let result = await base.uploadImg(res.tempFilePath, wepy.$instance.globalData.qiniuToken) ... &#125;) RM.start(&#123; duration: 60*1000, format: 'mp3', &#125;)&#125; Êí≠Èü≥ createInnerAudioContext Áî®Êù•Êí≠ÊîæÂêÑ‰∏™Áî®Êà∑ËØ≠Èü≥ÔºåÂèØ‰ª•ÈöèÊó∂ÂàáÊç¢‰∏çÂêåÁî®Êà∑ÁöÑËØ≠Èü≥Êí≠ÊîæÔºåÂÆâÂçìËßÑËßÑÁü©Áü©Ê≤°ÈóÆÈ¢ò iosÊí≠ÊîæÂºÇÂ∏∏ iosÁî®Êà∑ÂàáÊç¢ËØ≠Èü≥Êó∂‰ºöÊí≠ÊîæÁ¨¨‰∏Ä‰∏™Èü≥È¢ëÔºå‰ΩÜÈöèÂêéÁöÑËØ≠Èü≥Âç¥‰∏ç‰ºöÊí≠ÊîæÔºåÂÆû‰æãÂ∑≤ÁªèÈîÄÊØÅÔºå‰ΩÜË≤å‰ººÂØπiosÊó†Êïà„ÄÇËß£ÂÜ≥ÔºöÂçï‰æãÊ®°ÂºèÂàõÂª∫ÂÆû‰æãÔºåÂú®ÈîÄÊØÅÂÆû‰æãÂêéÔºåÂú®Â∞ÜÂèòÈáèÊâãÂä®Ê∏ÖÁ©∫ÔºåÂèØ‰ª•Ëß£ÂÜ≥iosÊñ∞Âª∫Êí≠Èü≥ÂÆû‰æãÊó†ÊïàÈóÆÈ¢ò„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940//dataIAC: null,isAudition: false,/*** src: Èü≥È¢ë cubicleÔºöÊí≠ÊîæÂºÄÂÖ≥ index: Áî®Êà∑Á¥¢Âºï(‰∏çÂêåÈü≥È¢ë) currentUserÔºöÂΩìÂâçÈúÄË¶ÅÊí≠ÊîæÁöÑÁî®Êà∑ lastUserÔºö ‰∏ä‰∏Ä‰∏™Êí≠ÊîæÁöÑÁî®Êà∑ isAuditionStatusÔºö Êí≠ÊîæÁä∂ÊÄÅÔºàÊú™Êí≠ÊîæÔºåÊ≠£Âú®Êí≠ÊîæÔºâ* handleSound ÁõëÂê¨Êñ∞ËÄÅÁî®Êà∑Êí≠Èü≥ÔºåËã•IACÊ≠£Âú®Êí≠Èü≥ÔºåÊ≠§Êó∂ÁªßÁª≠ÁÇπÂáªÂêå‰∏ÄÁî®Êà∑ÔºåÂàôÊöÇÂÅúÂΩìÂâçÈü≥È¢ëÔºåËã•IACÊú™Âú®Êí≠Èü≥ÔºåÂàôÊí≠Èü≥ÂΩìÂâçÁî®Êà∑„ÄÇËã•ÁÇπÂáª‰∏çÂêåÁî®Êà∑ÔºåÂàôÊöÇÂÅúÂΩìÂâçÊ≠£Âú®Êí≠Èü≥ÁöÑÁî®Êà∑ÔºåÊí≠ÊîæÊñ∞Áî®Êà∑ÂΩïÈü≥„ÄÇ*/async handleSound(src, cubicle, index) &#123; if (this.currentUser !== index) &#123; this.lastUser = this.currentUser this.currentUser = index this.changeUser = true &#125; if (this.changeUser) &#123; this.IAC &amp;&amp; this.IAC.destroy() this.IAC = null //iosËøôÁÇπ‰∏ç‰ªÖÈúÄË¶ÅdestroyÂÆû‰æãÔºåËøòË¶ÅÊâãÂä®Ê∏ÖÁ©∫ÂèòÈáè this.lastUser != -1 &amp;&amp; (this.recommUserList[this.lastUser].isAuditionStatus = 0) !this.IAC &amp;&amp; (this.IAC = wx.createInnerAudioContext()) let IAC = this.IAC IAC.src = src IAC.play() IAC.onPlay(() =&gt; &#123; this.recommUserList[this.currentUser].isAuditionStatus = wepy.$instance.globalData.isPlaying = 1 this.$apply() &#125;) IAC.onStop(() =&gt; &#123; this.recommUserList[this.currentUser].isAuditionStatus = wepy.$instance.globalData.isPlaying = 0 this.$apply() &#125;) IAC.onEnded(() =&gt; &#123; this.recommUserList[this.currentUser].isAuditionStatus = wepy.$instance.globalData.isPlaying = 0 this.$apply() &#125;) this.changeUser = false this.$apply() &#125; else &#123; cubicle ? this.IAC.play() : this.IAC.stop() &#125;&#125; ‰∏çÁÆ°ÊòØÂΩïÈü≥ËøòÊòØÊí≠Èü≥ÔºåÂú®È°µÈù¢Âç∏ËΩΩÔºàonUnloadÔºâÁöÑÊó∂ÂÄôÊ∏ÖÈô§ÊéâÂÆû‰æãÊàñËÄÖÂàùÂßãÂåñ,Êúâcanvas‰πüË¶ÅÊ∏ÖÈô§ÁîªÂ∏É Âçé‰∏∫-textarea-Â±ÇÁ∫ßÂºÇÂ∏∏Âçé‰∏∫ÈÉ®ÂàÜÊú∫ÂûãÔºåÂØπÂ∞èÁ®ãÂ∫èÁöÑtextareaÊ†áÁ≠æÊîØÂá∫Âπ∂‰∏çÂèãÂ•ΩÔºåÂÖ∂textareaÁöÑÂÜÖÂÆπ‰ª•Âèä placeholder ÂÜÖÂÆπÊÅ®Â§©È´òÔºåÊó†Ê≥ïÈÄöËøáÁ®ãÂ∫èÊéßÂà∂ÔºåÁîöËá≥Â∞èÁ®ãÂ∫èÂÆòÊñπËØ¥ canvas ÁöÑÂ±ÇÁ∫ßÊòØÊúÄÈ´òÁöÑÔºå‰ΩÜ‰πüÊ≤°È´òËøátextareaÔºÅ ÈóÆÈ¢òÔºö ÁõñÂú®textarea‰∏äÈù¢ÁöÑÂºπÊ°Ü‰ºöË¢´textareaÁöÑÂÜÖÂÆπÁ©øÊéâÁõñ‰∏ç‰ΩèÔºåÂπ∂‰∏îÁÇπÂáª‰∫ã‰ª∂Áõ¥Êé•Á©øÈÄè Ëß£ÂÜ≥ÔºöÂú®ÊãâËµ∑ÁõñÂú®textarea‰∏äÈù¢ÁöÑÂºπÊ°ÜÔºàÊàñÁªÑ‰ª∂ÔºâÊó∂ÔºåÁî® view Ê†áÁ≠æÈáçÂÜôÊ®°‰ªø textarea Ê†∑ÂºèÔºåÂπ∂Êää textarea ÂÖ≥Èó≠Êéâ„ÄÇ ÊåÅÁª≠Êõ¥Êñ∞‚Ä¶‚Ä¶.]]></content>
      <categories>
        <category>Â∑•‰ΩúÊÄªÁªì</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[firstBlog]]></title>
    <url>%2F2019%2F08%2F19%2FfirstBlog%2F</url>
    <content type="text"><![CDATA[#Êó¢Êò®Â§©ÊêûÂ¥©GitHubÂçöÂÆ¢ÔºåÂÜçÊ¨°ÂùöÂº∫ÁöÑÂ∞ùËØï Êó¢Êò®Â§©ÊêûÂ¥©GitHubÂçöÂÆ¢ÔºåÂÜçÊ¨°ÂùöÂº∫ÁöÑÂ∞ùËØïÊó¢Êò®Â§©ÊêûÂ¥©GitHubÂçöÂÆ¢ÔºåÂÜçÊ¨°ÂùöÂº∫ÁöÑÂ∞ùËØï####Êó¢Êò®Â§©ÊêûÂ¥©GitHubÂçöÂÆ¢ÔºåÂÜçÊ¨°ÂùöÂº∫ÁöÑÂ∞ùËØï #####Êó¢Êò®Â§©ÊêûÂ¥©GitHubÂçöÂÆ¢ÔºåÂÜçÊ¨°ÂùöÂº∫ÁöÑÂ∞ùËØï 1alert('hello world')]]></content>
      <categories>
        <category>test</category>
      </categories>
      <tags>
        <tag>Programming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F08%2F15%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
